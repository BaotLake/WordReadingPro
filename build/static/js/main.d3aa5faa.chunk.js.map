{"version":3,"sources":["components/res/explainBoxArrow.svg","components/res/audio.svg","components/res/star.svg","components/res/more.svg","components/res/open.svg","components/res/arrowShadow.png","components/word.js","components/switch.js","components/readPanel.js","components/explainPanel.js","components/translatePanel.js","head.js","components/a.js","App.js","home.js","status.js","components/navBar.js","components/findPage.js","webApp.js","serviceWorker.js","index.js","components/res/logo.png"],"names":["module","exports","key","word","props","state","style","touchMoving","movingRecord","sumX","sumY","lastX","lastY","e","this","touches","pageX","pageY","self","setTimeout","Math","abs","translate","console","warn","log","w","clientX","clientY","setState","toString","id","className","content","React","Component","Switch","status","hasInit","switchStyle","boxSizing","width","height","backgroundColor","borderRadius","display","alignItems","padding","color","transition","verticalAlign","marginLeft","dotStyle","border","onStyle","justifyContent","offStyle","switchChange","initStatus","Object","assign","undefined","init","onClick","handleClick","ReadPanel","menuPosition","top","left","opacity","pointerEvents","touchStartDate","rpMenu","h","touchTarget","window","getSelection","anchorNode","parentElement","target","hiddenSomeone","Date","touchTime","touchMove","preventDefault","stopPropagation","changedTouches","targetTouches","view","x","y","vw","screen","availWidth","vh","availHeight","position","split","includes","classList","add","handleCloseRpMenu","hiddenList","document","getElementsByClassName","length","i","remove","rm","getElementById","offsetWidth","offsetHeight","onTouchStart","handleTouchStart","onTouchEnd","handleTouchEnd","onTouchMove","handleTouchMove","fill","viewBox","type","d","p-id","handleRpHidden","handleRpRemove","handleRpShow","ExpainPanel","more","isShow","menu","backStyle","data","audio","audioUK","audioUS","expain","moreWord","starred","autoPlay","playUS","zoom","clickedWord","positionStyle","arrowStyle","moreElements","audioElements","epFontSize","ww","innerWidth","innerHeight","aw","parseFloat","ah","ew","eh","remRatioPx","toLowerCase","url","request","XMLHttpRequest","open","withCredentials","onreadystatechange","readyState","DONE","responseText","json","JSON","parse","icibaParseData","send","keys","symbols","ph_tts_mp3","ph_en_mp3","ph_am_mp3","parts","map","o","part","means","join","match","push","canvas","getContext","ctx","beginPath","moveTo","lineTo","right","filter","maxWidth","setWord","aliIciba","value","calcArrowPostion","ep","fontSize","parseInt","getComputedStyle","audioList","playingStyle","animation","n","t","auto","max","m","play","version","src","moreList","packList","handleClickMoreWord","unshift","handleClickMore","size","maxNumber","text","show","handleClickMenu","Zoomstyle","test","loading","calcFontSize","handleSetting","TranslatePanel","showStatus","movingStyle","dragY","moving","slipY","slipNum","tpHeight","count","setTranslateY","transform","tp","xhr","setRequestHeader","onload","translateText","encodeURIComponent","element","addEventListener","translateCount","panelStyle","hidden","bottom","half","full","handleTouchSlip","onMouseMove","handleMouseMove","onMouseDown","handleMouseDown","onMouseUp","handleMouseUp","onMouseLeave","handleMouseLeave","clickWord","handleAdjustmentHeight","elements","head","child","concat","ReactDOM","render","A","currentTarget","attributes","clickLink","error","children","WrpApp","showExplainPanel","showLinkDialog","htmlElements","extractScope","front","behind","fn","bn","sId","docId","link","hash","config","splitWord","splitSentence","runScript","jQuery","noConflict","doc","abstract","links","getElementsByTagName","rel","indexOf","icon","href","title","docTitle","textContent","docH1","body","pTags","description","trim","slice","spanTags","des","input","isURL","setReadHistory","nodeName","node","deep","isInline","lastChild","previousSibling","parentNode","firstChild","nextSibling","nextNode","frontHaveWordEnd","behindHaveWordEnd","offset","anchorOffset","wholeText","clickedChar","extractPart","texts","sentence","wordpattern","List","splitList","getWord","pattern","list","onlyOneChild","childElementCount","v","cssText","replace","g","toUpperCase","styleFormat","att","attName","name","attValue","styleConvert","styleObj","alterNode","getCross","cross","other","wordSplit","c","crossChildren","otherChildren","htmlTraversal","extractFront","attToProps","createElement","handleClickWord","otherWord","extractBehind","frontCross","t1","now","indexList","childNodes","nodeChar","lastNodeChar","re","t2","frontOther","childrenList","haveCross","haveCross2","haveCrossWord","extractBothEnds","behindCross","middle","newFrontCross","behindOther","sentenceSplit","innerText","styles","findIndex","insertBefore","base","createBaseTag","names","URL","docUrl","origin","pathname","direction","subPart","testParent","result","break","findSubPart","copyWord","frontFind","copy","driectTarget","behindFind","frontPattern","behindPattern","frontTarget","returnChilren","deepCopy","ignoreTag","noChildren","setInput","setStatus","docParser","headChildList","extractHead","extractAbstract","scrollTo","to","externalLink","xmlns","readNewPage","that","wrpReadPanel","scriptList","fakeHead","headScriptList","wrpApp","s","script","hasAttribute","getAttribute","async","setAttribute","appendChild","DOMContentLoaded_event","createEvent","initEvent","dispatchEvent","withRouter","ItemCard","Home","typing","urlPattern","jumpChange","history","clipboardData","getData","pasteText","pasteHtml","inputIsURL","search","inputGo","focus","readHistory","createHistory","logo","setTyping","autoComplete","contentEditable","onChange","handleChange","onKeyUp","handleKeyUp","onPaste","handlePaste","onFocus","placeholder","Status","wrapper","errorIcon","statusContent","NavBar","useState","currentIndex","setCurrentIndex","pathName","location","current","fixCurrentIndex","colors","itemCard","aria-hidden","fill-rule","itemIcon","WebApp","xmlDoc","histStr","localStorage","getItem","Array","isArray","parser","DOMParser","encode","url2","timeout","host","ontimeout","abort","contentType","getResponseHeader","parseFromString","onabort","onerror","searchParams","get","splice","shift","stringify","setItem","componentDidUpdate","dir","checkURI","loadXmlDoc","path","exact","data-hotkey","data-unscoped-placeholder","data-scoped-placeholder","autocapitalize","aria-label","onInput","Boolean","hostname","renderTarget","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.d3aa5faa.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/explainBoxArrow.cd1bf698.svg\";","module.exports = __webpack_public_path__ + \"static/media/audio.4030fa08.svg\";","module.exports = __webpack_public_path__ + \"static/media/star.e07fbbc9.svg\";","module.exports = __webpack_public_path__ + \"static/media/more.26f6d80d.svg\";","module.exports = __webpack_public_path__ + \"static/media/open.4645967c.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAACPCAMAAADnajhVAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAADwUExURQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP39/fX19bW1tfr6+uvr64aGhv7+/tra2tzc3Ozs7Pj4+Pb29re3t/v7+/z8/PHx8eXl5fv7++Tk5IuLi9fX1729vff398LCwvr6+vr6+vPz88LCwtfX1+jo6Obm5vLy8szMzO/v7/j4+Lm5ufv7+/39/b+/v/n5+fHx8fb29o+Pj5KSksTExI2Njezs7CrMGcQAAABQdFJOUwAHCAkEBQYBAgMKCwwNDw4REBMSFRQXFhkaGBwbHR4fIAIIGAUNHAIUEg0HCBgDBAkPBBEaBhUGCgMECAUDDA0JCAcFFwIBFAQIBhgXEhkJC8EEWQAABhpJREFUeNrNnOdy2zoQRteWrxVfyypUoVok05HCOHac3nvvyfu/zUUjCQggRRIL6O5M/Edg5sxZgPioEQhQu5p6gfdq5tX/g8IrSXNbece4JpdnEDPEBop/iiNenklUiiO1VBIPHDLFAS+dxBOGxHAgsXgByTASin+ykkncgigYAuIwKYHiA0TFEBB7vASKCuIcg8kQEPu0BIpQ4hQk7UqKwRkatDiLDOKsMzJGQkER/qXFWRKSDMQLBmM4Pj6OyT/G4gNE4mAYRAaFaLVaH+Ej+UtRqBIG4o5D0UExiAxKcXJyQj4lfxkJVUJAHAoxYRCITqf9g3z6o93pEBQTiMuu7LGetChFu8c+77UpSYv1Zs9hZxQdKUa71+t+Z59/7/Z6bQnEkRChQ2BQjuMWddHt92M2IO73u9QJbQ1dNQIEW4jWFYpBKILgjRjxJggoiQBROuNKh4QxHMRiSDwYqiAuhEg6SFfYShEYb9MxbwUIWzWsM+hCNB1kihKM4SAcRemgaBQOhgSETFZXQhQdtCtkpXCM39Ko3xyErJqkM8hCMh18krKu9INBOB1fScOuxtNwEPRZZ6SpiidkUwfrCsP4qoz7ykDkzqAK2dDB1ko3GIaj8eRKGXg1GY/CYdBlawZfiK6DdGU4IBhPNkY+ISBkitDO4AvRdPCujKaT2eXG0MvZZDrincEXYtBB1ko4ncz/aGP/zCfTkK4ZfCEb9w6mg6yV0Xh+/UwbfHZ9TjpD1kwiBO8eYtIRUB2zR4bRj2ZUSIAvxKiDrhWTDiGEdAZdiDRLMx2sKwvj+AXvzIYQa44cHaQri9vGC24vWGewheTrWOZcsXQipKqOQiE+dbgRkixaXcf93GvuG4RYLt0CHVHuRRG+kE0drVTHecFV56mQFo6QWjocCFF1NErqUIU07IXIOg5VHXcLL7yrCjm0FGLSEQyojhtbrrxBhbBtF0GIkn+y3EF1rLZcuqJCshxil4c2Nnyqg7alhA4uhAezREjt7V+Ng/SZhabSUjoyISSp0oc7GyG6jnZpHZmQtq2QHB1TouOsxOVnRMgUQ0iOjvFscbPU9TcXszGCkDwdk3I6mJAJghBbHUhC1DjYyDb8sjokIR0hpE5A1HY4oWO+OC39f5wu5omQurtdfjperktzrJfWiTl3w6+gQxJSe/vH0FEoxDb/nFa6B51a5qHcdLx8WInj4dIqMRfoiCpxRHZC8tPxrYp75S2bxIymw1JIfjquqkMVUjEgFqTjB5U5HtRPzPXTMWpitkjHqInZJh0jJmardIyYmO3SMVpitkzHaInZPg6iBETrdIyUmF3oqCEEIR2jJGaMdIyQmJs4cdA6MeOkY/vE7EpHxcSMlY5tE3N+Ol5bc6zLJ2bEOGgVEPHSsVVidqqjghDMdGyRmAvScYTCEZVLzLjpuHZiRk7HtRMzdjqumZjR03HNxIyfjmsl5oJ0fIHIcbEtMbuJg5UDopN0XCMx+9KxRYijdFw5MbtKx1UTs7s4WC0gOkvH1RIzeNRRJATcpeNKiRny4uDaCcc6LyCCtuGj5p9teSi9l4Fhw9/+U4L6dc7zkLb9Q84OFzniiHJ2O2gab+mudDAhhpt7E8zPcJEzjsj8bAfGRXsH3NUd49IFYyxdOeRYGYMqmNriUgcRYmoMmNqycsqxMjUG9NUy/wRu69NcXzFgaMuFY44LQ2NACmIil/4E1/VTzal00wX9B9CXzjku9Z9TgzZNf4H7+qVNVNCm6VMPHE+1iQrSdw2cA3zUBseBxhHe88JxLyzmGIbgp5IDGWaO/vCdJ4537MiOkYPdP8BXDaUTOzIHP0/y0hvHS/l8iszBDpTE3jhifjwl4ziSzsT9BX/1VzprJ+5jyQTpxB454o58oAuks4onH8BnfTiRzkCCfFgx9soRy0cgQTq8+Qz81jPpSCikz/r7jW+eOb6x89z8mR+SA+h7++/Bd73nOjhHerr3hXeOF9mJYUhP5D8G//U4Pe0P6asBnu+A43n60gFIXl/xCnZRr5IXZIjvP44OPu+E47PA4N/DEJDXsJt6Ld7SAeKVHl92xPFFvCwExLtFYFcl3lnyHxBWPMa6+jxoAAAAAElFTkSuQmCC\"","import React from 'react';\r\nimport { getKeys } from 'eslint-visitor-keys';\r\n\r\nvar key = 0;\r\nfunction getMyKeys(){\r\n    key += 1\r\n    return key.toString()\r\n}\r\n\r\nclass word extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            style:{}\r\n        }\r\n        this.touchMoving = false;\r\n        this.movingRecord = {\r\n            sumX:0,\r\n            sumY:0,\r\n            lastX:0,\r\n            lastY:0\r\n        }\r\n    }\r\n\r\n\r\n    handleTouchMove(e){\r\n        // console.log('touchMove',e,e.touches,e.targetTouches)\r\n        // console.log(e.touches[0].pageX, e.touches[0].pageY, this.touchMoving)\r\n        if(!this.touchMoving){\r\n            // 触摸开始\r\n            this.touchMoving = true;\r\n            let self = this;\r\n            setTimeout(()=>{\r\n                self.touchMoving = false;\r\n                // console.log('time up', this.touchMoving)\r\n            }, 100, this);\r\n            // 记录初始化\r\n            this.movingRecord = {\r\n                sumX:0,\r\n                sumY:0,\r\n                lastX:e.touches[0].pageX,\r\n                lastY:e.touches[0].pageY\r\n            }\r\n        }else{\r\n            // 滑动中 记录\r\n            this.movingRecord.sumX = this.movingRecord.sumX + e.touches[0].pageX - this.movingRecord.lastX;\r\n            this.movingRecord.sumY = this.movingRecord.sumY + e.touches[0].pageY - this.movingRecord.lastY;\r\n            this.movingRecord.lastX = e.touches[0].pageX;\r\n            this.movingRecord.lastY = e.touches[0].pageY;\r\n        }\r\n\r\n        // 滑动 判断\r\n        if(Math.abs(this.movingRecord.sumX) > 50 && Math.abs(this.movingRecord.sumY) < 15){\r\n            // 成立\r\n            // console.log(\"translate\")\r\n            try{\r\n                this.props.translate(e)\r\n            }catch(e){\r\n                console.warn(\"word: props.translate is not function!\", e);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    handleMouseMove(e){\r\n        // console.log('handleMouseMove', this.touchMoving);\r\n        if(this.touchMoving){\r\n            // console.log('handleMouseMove', e)\r\n        }\r\n    }\r\n\r\n    handleMouseDown(e){\r\n        this.touchMoving = true;\r\n    }\r\n\r\n    handleMouseUp(e){\r\n        this.touchMoving = false;\r\n    }\r\n\r\n    handleDoubleClick(e){\r\n        console.log('double click')\r\n        try{\r\n            this.props.translate(e)\r\n        }catch(e){\r\n            console.warn(\"word: props.translate is not function!\", e);\r\n        }\r\n    }\r\n\r\n    handleTest(w, e){\r\n        console.log(\"click e->\", e, e.clientX, e.clientY)\r\n        this.setState({\r\n            style:{\r\n                \"backgroundColor\":\"#fff\",\r\n                \"borderRadius\":\"5px\"\r\n            }\r\n        })\r\n    }\r\n\r\n    render(){\r\n        let key = getMyKeys()\r\n        return (\r\n            <span\r\n                key={key}\r\n                id={key}\r\n                className=\"@w\"\r\n                // onTouchMove={(e)=>this.handleTouchMove(e)}\r\n                // onMouseDown={(e)=>this.handleMouseDown(e)}\r\n                // onMouseMove={(e)=>this.handleMouseMove(e)}\r\n                // onMouseUp={(e)=>this.handleMouseUp(e)}\r\n                // style={this.state.style}\r\n            >{this.props.content}</span>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default word;","import React from 'react';\r\n\r\nclass Switch extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            status:false,\r\n        };\r\n        this.hasInit = false;\r\n        this.switchStyle = {\r\n            boxSizing :\"border-box\",\r\n            width :'2.5em',\r\n            height :'1.2em',\r\n            backgroundColor:\"#ccc\",\r\n            // border:\"1px solid #888\",\r\n            borderRadius:'0.6em',\r\n            display:\"inline-flex\",\r\n            alignItems:\"center\",\r\n            padding:\"0 0.1em\",\r\n            color:'#fff',\r\n            transition:'all 0.3s',\r\n            verticalAlign:'middle',\r\n            marginLeft:'0.5em',\r\n\r\n        };\r\n        this.dotStyle = {\r\n            boxSizing :\"border-box\",\r\n            width:\"0px\",\r\n            height:\"0px\",\r\n            border:\"0.5em solid\",\r\n            borderRadius:'50%'\r\n        };\r\n        this.onStyle = {\r\n            backgroundColor:'#0f0',\r\n            color:\"#fff\",\r\n            justifyContent:'flex-end'\r\n        };\r\n        this.offStyle = {\r\n            backgroundColor:'#ccc',\r\n            color:\"#fff\",\r\n            justifyContent:'flex-start'\r\n        };\r\n    }\r\n\r\n    handleClick(){\r\n        let status = !this.state.status;\r\n        this.setState({\r\n            status:status\r\n        });\r\n        try{\r\n            this.props.switchChange(status);\r\n        }catch(e){\r\n            console.warn('Switch component no incoming \"props.switchChange\" function.', e);\r\n        }\r\n    }\r\n\r\n    init(props){\r\n        if(props.initStatus != this.state.status && this.hasInit == false){\r\n            this.hasInit = true;\r\n            this.setState({\r\n                status:props.initStatus\r\n            });\r\n        }\r\n        if(props.onStyle){\r\n            let onStyle = Object.assign({}, this.onStyle);\r\n            Object.assign(onStyle, this.props.onStyle);\r\n            this.onStyle = onStyle;\r\n        };\r\n        if(props.offStyle){\r\n            let offStyle = Object.assign({}, this.offStyle);\r\n            Object.assign(offStyle, this.props.offStyle);\r\n            this.offStyle = offStyle;\r\n        };\r\n        if(props.switchStyle){\r\n            let switchStyle = Object.assign({}, this.switchStyle);\r\n            Object.assign(switchStyle, this.props.switchStyle);\r\n            this.switchStyle = switchStyle;\r\n        };\r\n\r\n        if(props.status != undefined && props.status != this.state.status){\r\n            this.setState({\r\n                status:props.status\r\n            })\r\n        }\r\n    }\r\n\r\n    render(){\r\n\r\n        this.init(this.props);\r\n\r\n        let style = Object.assign({},this.switchStyle);\r\n        // console.log('style ', style, Object.isExtensible(style), Object.isFrozen(style))\r\n        switch(this.state.status){\r\n            case true:\r\n                style = Object.assign(style, this.onStyle);\r\n                break\r\n            case false:\r\n                style = Object.assign(style, this.offStyle);\r\n                break\r\n        }\r\n\r\n        return (\r\n            <div style={style} onClick={()=>this.handleClick()}>\r\n                <div style={this.dotStyle}></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default Switch;  ","import React from \"react\";\r\nimport './readPanel.css';\r\n\r\nimport Switch from './switch.js';\r\n\r\nclass ReadPanel extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            menuPosition:{\r\n                top:0,\r\n                left:0,\r\n                opacity:0,\r\n                pointerEvents:'none',\r\n            },\r\n\r\n        }\r\n        this.touchStartDate = 0;\r\n        this.rpMenu = {w:60,h:200};\r\n        this.touchTarget = null;\r\n\r\n        this.touchMoving = false;\r\n        this.movingRecord = {\r\n            sumX:0,\r\n            sumY:0,\r\n            lastX:0,\r\n            lastY:0\r\n        }\r\n    }\r\n\r\n    handleClick(e){\r\n        // console.log(\"click e->\", e,e.pageX,e.pageY, e.clientX, e.clientY)\r\n\r\n        // console.log('e ->', e,e.target, e.currentTarget,e.detail, window.getSelection())\r\n\r\n        // console.log('window', window.getSelection())\r\n        \r\n        let anchorNode = window.getSelection().anchorNode && window.getSelection().anchorNode.parentElement;\r\n        if(anchorNode == e.target){\r\n            try{\r\n                this.props.handleClick(e);\r\n            }catch(e){\r\n                console.warn(\"readPanel.js need props.hanleClick function!\", e)\r\n            }\r\n        }else{\r\n            try{\r\n                this.props.hiddenSomeone('explainPanel linkDialog');\r\n            }catch(e){\r\n                console.warn(\"readPanel.js need props.hiddenSomeone function!\", e)\r\n            }\r\n        }\r\n        \r\n        \r\n        // e.stopPropagation()\r\n    }\r\n\r\n    handleTouchStart(e){\r\n        this.touchStartDate = new Date();\r\n        // console.log('touchstart',e,e.target)\r\n        // 记录初始化\r\n        this.movingRecord = {\r\n            sumX:0,\r\n            sumY:0,\r\n            lastX:e.touches[0].pageX,\r\n            lastY:e.touches[0].clientY\r\n        }\r\n    }\r\n\r\n    handleTouchEnd(e){\r\n        this.touchMoving = false;\r\n        // 滑动 判断\r\n        if(Math.abs(this.movingRecord.sumX) > 50 && Math.abs(this.movingRecord.sumY) < 15){\r\n            // 成立\r\n            try{\r\n                this.props.translate(e)\r\n            }catch(e){\r\n                console.warn(\"word: props.translate is not function!\", e);\r\n            }\r\n        }\r\n\r\n        let touchTime = (new Date()) - this.touchStartDate;\r\n        console.log('record', this.movingRecord.sumX,this.movingRecord.sumY )\r\n        let touchMove = Math.abs(this.movingRecord.sumX) < 15 && Math.abs(this.movingRecord.sumY) < 15;\r\n        if(touchTime > 300 && touchTime < 2000 && touchMove){\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            console.log('Touch', e, e.changedTouches, e.targetTouches, e.view, e.touches, e.target)\r\n            let x = e.changedTouches[0].clientX;\r\n            let y = e.changedTouches[0].clientY;\r\n            let vw = window.screen.availWidth;\r\n            let vh = window.screen.availHeight;\r\n            let marg = 8;\r\n            let position = Object.assign({},this.state.menuPosition);\r\n\r\n            if((x + this.rpMenu.w) > vw) x = vw - this.rpMenu.w - marg;\r\n            if((y + this.rpMenu.h) > vh) y = vh - this.rpMenu.h - marg;\r\n\r\n            position.top = y;\r\n            position.left = x;\r\n            position.opacity = '1';\r\n            position.pointerEvents = 'all';\r\n\r\n            this.setState({\r\n                menuPosition:position\r\n            })\r\n            this.touchTarget = e.target;\r\n        }\r\n    }\r\n\r\n    handleTouchMove(e){\r\n        // console.log('touchMove',e,e.touches,e.targetTouches)\r\n        // console.log(e.touches[0].pageX, e.touches[0].pageY, this.touchMoving)\r\n        if(!this.touchMoving){\r\n            // 触摸开始\r\n            this.touchMoving = true;\r\n            let self = this;\r\n            // setTimeout(()=>{\r\n            //     self.touchMoving = false;\r\n            //     // console.log('time up', this.touchMoving)\r\n            // }, 100, this);\r\n            // 记录初始化\r\n            this.movingRecord = {\r\n                sumX:0,\r\n                sumY:0,\r\n                lastX:e.touches[0].pageX,\r\n                lastY:e.touches[0].clientY\r\n            }\r\n        }else{\r\n            // 滑动中 记录\r\n            this.movingRecord.sumX = this.movingRecord.sumX + e.touches[0].pageX - this.movingRecord.lastX;\r\n            this.movingRecord.sumY = this.movingRecord.sumY + e.touches[0].clientY - this.movingRecord.lastY;\r\n            this.movingRecord.lastX = e.touches[0].pageX;\r\n            this.movingRecord.lastY = e.touches[0].clientY;\r\n        }\r\n    }\r\n\r\n    handleCloseRpMenu(){\r\n        let position = Object.assign({},this.state.menuPosition);\r\n        position.opacity = '0';\r\n        position.pointerEvents = 'none';\r\n\r\n        this.setState({\r\n            menuPosition:position\r\n        })\r\n    }\r\n\r\n    handleRpHidden(){\r\n        if(!this.touchTarget) return;\r\n        if(this.touchTarget.className.split(' ').includes('wrp-read-panel')) return;\r\n        this.touchTarget.classList.add('wrp-rp-hidden');\r\n        this.handleCloseRpMenu();\r\n    }\r\n\r\n    handleRpRemove(){\r\n        if(!this.touchTarget) return;\r\n        if(this.touchTarget.className.split(' ').includes('wrp-read-panel')) return;\r\n        this.touchTarget.classList.add('wrp-rp-remove');\r\n        this.handleCloseRpMenu();\r\n    }\r\n\r\n    handleRpShow(){\r\n        let hiddenList = document.getElementsByClassName('wrp-rp-hidden');\r\n        console.log('hiddenList', hiddenList.length)\r\n        for(let i = hiddenList.length - 1; i >= 0; i--){\r\n            console.log('show ->',i,hiddenList.length)\r\n            let element = hiddenList[i];\r\n            element.classList.remove('wrp-rp-hidden');\r\n            // break;\r\n        }\r\n        this.handleCloseRpMenu();\r\n    }\r\n\r\n    componentDidMount(){\r\n        let rm = document.getElementById('wrp-rp-menu');\r\n        this.rpMenu.w = rm.offsetWidth;\r\n        this.rpMenu.h = rm.offsetHeight;\r\n    }\r\n\r\n    render(){\r\n\r\n        let style = {};\r\n        if(this.props.padding) style.padding = '1em';\r\n\r\n\r\n        return (\r\n            <div \r\n                id=\"wrp-read-panel\" \r\n                style={style}\r\n                onClick={(e)=>this.handleClick(e)}\r\n                onTouchStart={(e)=>this.handleTouchStart(e)}\r\n                onTouchEnd={(e)=>this.handleTouchEnd(e)}\r\n                onTouchMove={(e)=>this.handleTouchMove(e)}\r\n\r\n            >\r\n                {this.props.content}\r\n\r\n                <div id=\"wrp-rp-menu\" style={this.state.menuPosition}>\r\n                    <div className=\"wrp-nav-item\" onClick={()=>this.handleCloseRpMenu()}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill='var(--t-fore-c)' viewBox=\"0 0 1024 1024\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M877.216 491.808M575.328 510.496 946.784 140.672c17.568-17.504 17.664-45.824 0.192-63.424-17.504-17.632-45.792-17.664-63.36-0.192L512.032 446.944 143.712 77.216C126.304 59.712 97.92 59.648 80.384 77.12 62.848 94.624 62.816 123.008 80.288 140.576l368.224 369.632L77.216 879.808c-17.568 17.504-17.664 45.824-0.192 63.424 8.736 8.8 20.256 13.216 31.776 13.216 11.424 0 22.848-4.352 31.584-13.056l371.36-369.696 371.68 373.088C892.192 955.616 903.68 960 915.168 960c11.456 0 22.912-4.384 31.648-13.088 17.504-17.504 17.568-45.824 0.096-63.392L575.328 510.496 575.328 510.496zM575.328 510.496\" p-id=\"10091\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\"></div>\r\n                    </div>\r\n                    <div className=\"wrp-nav-item\" onClick={()=>this.handleRpHidden()}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill='var(--t-fore-c)' viewBox=\"0 0 1024 1024\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M947.6 477.2c-85-106-175.9-177.5-272.8-214.7l60.1-122.3c8.8-17.8 1.4-39.5-16.4-48.2-17.8-8.8-39.5-1.4-48.2 16.4l-65.6 133.4c-30.4-6.4-61.3-9.6-92.7-9.6-159.3 0-304.5 81.7-435.6 245-8.3 10.2-12.4 22.6-12.4 35s4.1 24.8 12.3 35.1C161.3 653.2 252.2 724.7 349 762l-59.9 121.9c-8.8 17.8-1.4 39.5 16.4 48.2s39.5 1.3 48.2-16.4l65.3-133c30.4 6.4 61.4 9.6 93 9.6 159.3 0 304.5-81.7 435.6-245 16.4-20.5 16.4-49.7 0-70.1z m-799.1 35c112.4-140 232.8-207.8 363.5-207.8 20.1 0 39.9 1.6 59.6 4.8L544.7 364c-10.5-2.3-21.5-3.5-32.7-3.5-83.8 0-151.8 68-151.8 151.8 0 46.7 21.1 88.5 54.4 116.4L381.4 696c-81.5-30.8-159-91.7-232.9-183.8z m443.3 0c0 43.8-35.3 79.4-79 79.8l62.9-127.9c10.1 13.4 16.1 30.1 16.1 48.1z m-159.6 0c0-43.8 35.2-79.2 78.8-79.8l-62.8 127.8c-10.1-13.3-16-29.9-16-48zM512 720c-20.2 0-40.1-1.6-59.7-4.9l26.9-54.7c10.6 2.3 21.6 3.6 32.8 3.6 83.8 0 151.8-68 151.8-151.8 0-46.8-21.2-88.6-54.5-116.5l33.1-67.4C724 359.1 801.5 420 875.5 512.2 763.1 652.2 642.6 720 512 720z\" p-id=\"7888\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\">隐藏</div>\r\n                    </div>\r\n                    <div className=\"wrp-nav-item\" onClick={()=>this.handleRpRemove()}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill='var(--t-fore-c)' viewBox=\"0 0 1024 1024\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M668.8 896h-320c-48.64 0-88.32-37.76-92.8-87.68L211.2 403.2c-1.92-17.28 10.88-33.28 28.16-35.2 17.28-1.92 33.28 10.88 35.2 28.16l44.16 405.76c1.28 17.28 14.08 30.08 28.8 30.08h320c14.72 0 27.52-12.8 28.8-29.44l44.16-406.4c1.92-17.28 17.92-30.08 35.2-28.16 17.28 1.92 30.08 17.92 28.16 35.2l-44.16 405.76c-2.56 49.28-42.88 87.04-90.88 87.04zM826.24 321.28H190.72c-17.92 0-32-14.08-32-32s14.08-32 32-32h636.16c17.92 0 32 14.08 32 32s-14.72 32-32.64 32z\" p-id=\"13417\"></path><path d=\"M424.96 789.12c-16.64 0-30.72-12.8-32-29.44l-27.52-347.52c-1.28-17.92 11.52-33.28 29.44-34.56 17.92-1.28 33.28 11.52 34.56 29.44l27.52 347.52c1.28 17.92-11.52 33.28-29.44 34.56h-2.56zM580.48 789.12h-2.56c-17.92-1.28-30.72-16.64-29.44-34.56L576 407.04c1.28-17.92 16.64-30.72 34.56-29.44 17.92 1.28 30.72 16.64 29.44 34.56l-27.52 347.52c-1.92 16.64-15.36 29.44-32 29.44zM581.76 244.48c-17.92 0-32-14.08-32-32 0-23.68-19.2-43.52-43.52-43.52s-43.52 19.2-43.52 43.52c0 17.92-14.08 32-32 32s-32-14.08-32-32c0-59.52 48-107.52 107.52-107.52s107.52 48 107.52 107.52c0 17.28-14.08 32-32 32z\" p-id=\"13418\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\">移除</div>\r\n                    </div>\r\n                    <div className=\"wrp-nav-item\" \r\n                        onClick={()=>this.handleRpShow()}\r\n                    >\r\n                        <svg className=\"wrp-nav-item-icon\" fill='var(--t-fore-c)' viewBox=\"0 0 1024 1024\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M512.14 819c-136.83 0-253.2-59.32-326.73-109.08C97.84 650.6 35.29 581.25 12.15 538.82a56.53 56.53 0 0 1 0-54.35c23.14-42.44 85.69-111.79 173.26-171 73.53-49.77 189.9-109.09 326.73-109.09 137.53 0 253.1 57.92 325.84 106.51 40.4 27 78.56 58.49 110.35 91.12 28.79 29.53 51.46 59.18 63.84 83.48a57.94 57.94 0 0 1 0 52.4c-12.38 24.3-35 53.95-63.84 83.48-31.79 32.63-70 64.14-110.35 91.13C765.24 761 649.67 819 512.14 819zM67 511.64c10 17.43 28.73 40.66 51.89 64.2a672.78 672.78 0 0 0 100.8 83.41c66.45 45 171.14 98.59 292.48 98.59 122.21 0 226.18-52.32 291.89-96.21 78.53-52.46 133.92-114.07 152.88-150-19-35.92-74.35-97.53-152.88-150-65.71-43.89-169.68-96.21-291.89-96.21-121.34 0-226 53.61-292.48 98.59a672.23 672.23 0 0 0-100.8 83.42C95.7 471 76.93 494.21 67 511.64z\" fill=\"#333333\" p-id=\"8662\"></path><path d=\"M511.81 682.86c-94.41 0-171.22-76.81-171.22-171.22s76.81-171.22 171.22-171.22S683 417.23 683 511.64s-76.78 171.22-171.19 171.22z m0-278.44A107.22 107.22 0 1 0 619 511.64a107.34 107.34 0 0 0-107.19-107.22z\" fill=\"#333333\" p-id=\"8663\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\">显示</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ReadPanel;","import React from \"react\";\r\n\r\nimport Switch from './switch.js';\r\n\r\nimport './explainPanel.css';\r\n\r\nimport arrow_icon from \"./res/explainBoxArrow.svg\";\r\nimport audio_icon from \"./res/audio.svg\";\r\nimport star_icon from \"./res/star.svg\";\r\nimport menu_icon from \"./res/more.svg\";\r\nimport open_icon from './res/open.svg';\r\nimport arrowShadow_icon from './res/arrowShadow.png'\r\n\r\nclass ExpainPanel extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            more:{\r\n                style:{opacity:0,width:0},\r\n                isShow:false\r\n            },\r\n            menu:{\r\n                style:{},\r\n                isShow:false,\r\n                backStyle:{},\r\n            },\r\n            data:{\r\n                word:'',\r\n                audio:'',\r\n                audioUK:'',\r\n                audioUS:'',\r\n                expain:'',\r\n                moreWord:[],\r\n                starred:false\r\n            },\r\n            autoPlay:true,\r\n            playUS:true,\r\n            zoom:0,\r\n            status:'1',\r\n            // status: 0, loading; 1, completed\r\n        }\r\n        this.clickedWord = {};\r\n        this.positionStyle = {\r\n            style:{\r\n                \"width\":\"17em\",\r\n                \"height\":\"8em\",\r\n                \"position\":\"absolute\"\r\n            },\r\n            arrowStyle:{\r\n                \"position\":\"absolute\",\r\n                \"width\":\"2.8em\",\r\n                \"height\":\"2.8em\",\r\n                // \"top\":\"-1.9em\"\r\n            },\r\n            x:0, // test\r\n            y:0      // test\r\n        }\r\n        this.moreElements = [];\r\n        this.audioElements = [];\r\n        this.epFontSize = 14;\r\n    }\r\n\r\n\r\n    calcArrowPostion(positionStyle, position){\r\n        // console.log('position,. ', position)\r\n        // 返回style={}, x,y 为箭头中心点\r\n        //window.width, window.height\r\n        let x = position.x, y= position.y, clientY = position.clientY;\r\n        let ww = window.innerWidth, wh= window.innerHeight;\r\n        let style =  Object.assign({},positionStyle.style);\r\n        let arrowStyle = Object.assign({},positionStyle.arrowStyle);\r\n        let aw = parseFloat(arrowStyle.width);\r\n        let ah = parseFloat(arrowStyle.height);\r\n\r\n        let ew = parseFloat(style.width), eh = parseFloat(style.height);\r\n        const topDistance = 12;         //em 顶部距离小于topDistance时,expainPanel显示在单词下方\r\n        const wordDistance = 3;         //em expainPanel距离单词的距离\r\n        const edgeDistance = 1;         //em 左右边距\r\n        const arrowOverlapping = 0.1;   // 箭头和框的重叠距离\r\n\r\n        let remRatioPx = 16;            // 1 rem = 16 px\r\n        remRatioPx = remRatioPx + remRatioPx*this.state.zoom;\r\n\r\n        // x 不能小于18,不能大于 ww - 18, 否则箭头和框出现分离, 下面两行代码矫正\r\n        // if(x < 18) x = 18;\r\n        // if(x > ww - 18) x = ww - 18;\r\n\r\n        //纵向位置 Vertical position\r\n        if(clientY >= topDistance * remRatioPx){\r\n            // expainPanel显示在单词上方\r\n            style.top = `calc(${y}px - ${eh}em - ${wordDistance}em)`;\r\n            // arrowStyle.transform = 'rotate(180deg)'\r\n            arrowStyle.top = `${eh - ah / 2 - arrowOverlapping}em`\r\n        }else{\r\n            // expainPanel显示在单词下方\r\n            style.top = `calc(${y}px + ${wordDistance}em)`;\r\n            arrowStyle.top = `-${ah / 2 - arrowOverlapping}em`;\r\n            // arrowStyle.transform = 'rotate(0deg)';\r\n        }\r\n\r\n\r\n        // 横向位置 Horizontal position\r\n        if(x >= ww - (ew / 2 + edgeDistance) * remRatioPx){\r\n            // 单词位置靠右边框\r\n            style.left = `calc(${ww}px - ${ew}em - ${edgeDistance}em)`;\r\n            // 太偏右 调整\r\n            if( (ww - x) < (edgeDistance * remRatioPx + aw / 2 * remRatioPx)) x = ww - (edgeDistance * remRatioPx + aw / 2 * remRatioPx);\r\n            arrowStyle.left = `calc(${x - ww}px + ${ew + edgeDistance - aw / 2}em)`;\r\n        }else if(x <= (ew / 2 + edgeDistance) * remRatioPx){\r\n            // 单词位置靠左边框\r\n            style.left = `${edgeDistance}em`;\r\n            // 太偏左 调整\r\n            if(x < (edgeDistance * remRatioPx + aw / 2 * remRatioPx)) x = edgeDistance * remRatioPx + aw / 2 * remRatioPx;\r\n            arrowStyle.left = `calc(${x}px - ${edgeDistance + aw / 2}em)`;\r\n        }else{\r\n            // 中间\r\n            style.left = `calc(${x}px - ${ew / 2}em)`;\r\n            arrowStyle.left = `${ew / 2 - aw / 2}em`;\r\n        }\r\n\r\n        return {style,arrowStyle,x,y};\r\n  \r\n    }\r\n\r\n    setWord(w){\r\n        if(!w) w = this.props.clickedWord.word;\r\n        let data = this.state.data;\r\n        data.word = w;\r\n        this.setState({\r\n            data:data,\r\n            status:'0'\r\n        })\r\n    }\r\n\r\n    aliIciba(w){\r\n        if(!w) w = this.props.clickedWord.word;\r\n        w = w.toLowerCase();\r\n\r\n        // if(this.state.data.word == w) return ;\r\n        // let url = `https://1773134661611650.cn-beijing.fc.aliyuncs.com/2016-08-15/proxy/WordingReadingPro/iciba/?key=zysj&q=${w};`\r\n        // let url = `https://service-edwl7wbn-1258889000.sh.apigw.tencentcs.com/test/iciba_tr?key=zysj&q=${w}`;\r\n\r\n        // let url = `http://47.94.145.177:8000/iciba?w=${w}`;\r\n        let url = `https://47.94.145.177:8001/iciba?w=${w}`;\r\n\r\n        let request = new XMLHttpRequest(false,true);\r\n        let self = this;\r\n        request.open(\"GET\",url);\r\n        request.withCredentials = false;\r\n        // myRequest.setRequestHeader('Referer','');\r\n        request.onreadystatechange = function(){\r\n            if(request.readyState === XMLHttpRequest.DONE && request.status === 200){\r\n                let responseText = request.responseText;\r\n                let json = JSON.parse(responseText);\r\n                // console.log(\"response\", json);\r\n                self.icibaParseData(json, w,);\r\n            }else{\r\n\r\n            }\r\n        }\r\n\r\n        request.send();\r\n\r\n    }\r\n\r\n    icibaParseData(json,w){\r\n        let data = {};\r\n        data.word = w;\r\n        data.moreWord = [];\r\n        if(Object.keys(json).includes('word_name')){\r\n            data.audio = json.symbols[0].ph_tts_mp3;\r\n            data.audioUK = json.symbols[0].ph_en_mp3;\r\n            data.audioUS = json.symbols[0].ph_am_mp3;\r\n            // data.expain = json.symbols[0].parts.map(o=>o.part + o.means.join(' ')).join('\\n');\r\n            data.expain = json.symbols[0].parts.map(o=><dt className=\"wrp-explain-text\"><span className=\"wrp-explain-tag\">{o.part + ' '}</span>{o.means.join(' ')}</dt>);\r\n            // data.moreWord = json.exchange.word_pl;\r\n\r\n            // 提取单词解释里的单词\r\n            let more = json.symbols[0].parts.map(i=>i.means.join(' ')).join(' ').match(/[a-zA-Z]{3,20}/);\r\n            if(more) data.moreWord.push(more[0]);\r\n        }\r\n        \r\n        // data.moreWord = ['word','most','many'];\r\n        // console.log('parsed data', data);\r\n\r\n        this.setState({\r\n            data:data,\r\n            status:'1'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    // 废弃\r\n    renderArrow(){\r\n        // <canvas id=\"e-arrow\" width=\"60\" height=\"60\" ></canvas>\r\n        var canvas = document.getElementById('e-arrow');\r\n        console.log('canvas ', canvas)\r\n        if(canvas.getContext){\r\n            console.log(\"getContext\", canvas.getContext)\r\n            var ctx = canvas.getContext('2d');\r\n            ctx.beginPath();\r\n            ctx.moveTo(0, 50);\r\n            ctx.lineTo(60, 30);\r\n            ctx.lineTo(20, 25);\r\n            ctx.fill();\r\n        }else{\r\n            console.log(\"no canvas Context\" )\r\n        }   \r\n    }\r\n\r\n    handleClickMenu(){\r\n        console.log('menu')\r\n        let menu = this.state.menu;\r\n        if(this.state.menu.isShow){\r\n            menu.isShow = false;\r\n            menu.style = {right:'-20em',opacity:0};\r\n            menu.backStyle = {filter:'blur(0px)'}\r\n        }else{\r\n            menu.isShow = true;\r\n            menu.style = {right:'0em',opacity:1};\r\n            menu.backStyle = {filter:'blur(30px)'}\r\n        }   \r\n        this.setState({\r\n            menu:menu\r\n        })\r\n    }\r\n\r\n    handleClickMore(){\r\n        let more = this.state.more;\r\n        if(this.state.data.moreWord.length <= 1) return '';\r\n        if(this.state.more.isShow){\r\n            more.isShow = false;\r\n            more.style = {opacity:0,maxWidth:0,transition:'all 0.5s',display:'flex'};\r\n        }else{\r\n            more.isShow = true;\r\n            more.style = {opacity:1,maxWidth:'15em',transition:'all 0.5s',display:'flex'};\r\n        }\r\n        this.setState({\r\n            more:more\r\n        })\r\n    }\r\n\r\n    handleClickMoreWord(w){\r\n        this.setWord(w)\r\n        this.aliIciba(w);\r\n    }\r\n\r\n    handleSetting(key, value){\r\n        switch(key){\r\n            case 'autoPlay':\r\n                this.setState({\r\n                    autoPlay:value\r\n                });\r\n                break;\r\n            case 'playUS':\r\n                this.setState({\r\n                    playUS:value\r\n                });\r\n                break;\r\n            case 'zoom':\r\n                    let zoom = this.state.zoom;\r\n                    zoom = zoom + value;\r\n                    if(zoom > 10) zoom = 10;\r\n                    if(zoom < -10) zoom = -10;\r\n                    console.log('zoom', zoom)\r\n                    this.setState({\r\n                        zoom:zoom\r\n                    });\r\n                    this.positionStyle = this.calcArrowPostion(this.positionStyle, this.props.clickedWord.position);\r\n                    break;\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        // this.renderArrow()\r\n        let ep = document.getElementById('wrp-ep');\r\n        let fontSize =parseInt(window.getComputedStyle(ep,null).fontSize);\r\n        if(fontSize > 5 && fontSize < 30){\r\n            this.epFontSize = fontSize;\r\n        }\r\n\r\n    }\r\n\r\n    audio(data){\r\n        let audioList = [];\r\n        let playingStyle = {animation :\"0.3s ease-out 0.1s 2 alternate wrp-audio\"};\r\n        // if(!data.audio && !data.audioUK && !data.audioUS) return audioList;\r\n\r\n        // 优先级计算\r\n        let autoPlay = [[this.state.playUS?2:1, !!data.audioUS],[!this.state.playUS?2:1, !!data.audioUK],[0, !!data.audio]].map(\r\n            (n,i,t,auto=this.state.autoPlay)=>{\r\n                // console.log(n, n[0] + n[1] * 3, (n[0] + n[1] * 3),auto ,(n[0] + n[1] * 3) * auto)\r\n                return (n[0] + n[1] * 3) * auto;\r\n            }\r\n        );\r\n        // console.log('autoPlay n',autoPlay)\r\n        let max = autoPlay[0] > autoPlay[1]?autoPlay[0]:autoPlay[1]; max = max > autoPlay[2]?max:autoPlay[2];\r\n        autoPlay = autoPlay.map(\r\n            (n,i,t,m=max)=>{\r\n                // console.log('n,max',n,m)\r\n                if(n == m && n >= 3){\r\n                    return true;\r\n                }else{\r\n                    return false;\r\n                }\r\n            }\r\n        );\r\n\r\n        if(data.audioUS){\r\n            audioList.push(\r\n                <div className=\"title-tts\"  onClick={()=>document.getElementById(\"a-us\").play()}>\r\n                    <div className=\"\" >US</div>\r\n                    {/*<img className=\"title-audio\" style={autoPlay[0]?playingStyle:{}} src={audio_icon}></img>*/}\r\n                    <svg className=\"title-audio\" style={autoPlay[0]?playingStyle:{}} viewBox=\"0 0 1024 1024\" fill=\"var(--t-fore-c)\" version=\"1.1\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M541.2 132.3c-7.2-3.3-15.2-5-23.3-5-13.9 0-26.8 5.1-36.5 14.4L280.6 312.4h-158c-11.5 0-23.9 3.9-33.6 10.4h-4l-8.7 9.2c-7.5 7.9-12.2 20.8-12.2 33.8v290.7c0 15 6.7 31.4 16.9 41.6 10.2 10.3 26.6 16.9 41.6 16.9h158.2l200.7 165.6c8.4 7.9 23.3 16 35.6 16 5.6 0 16.5 0 27.1-8 10-4.2 17.8-10.4 23.1-18.6 5.7-8.6 8.4-19.1 8.4-32V184c0-12.9-2.8-23.4-8.4-32-5.8-9-14.6-15.6-26.1-19.7z m-24.8 57.4v642.9L310.2 662.5l-8.2-6.8v0.1H123.3V371.7h179l214.1-182zM899.3 300c-20.9-32.7-46.5-61.1-75.9-84.2l-0.1-0.1c-1.3-1.1-2.2-1.8-2.9-2.4-4.5-2.8-9.6-4.3-15.1-4.3-10.3 0-21.6 5.3-31.1 14.5l-0.1 0.1c-8.4 13.5-3.9 35.9 9 45.2l0.1 0.1c6.1 2.5 14.7 9.7 20.8 15.4 9.4 8.7 23.6 23.7 38.1 45.6 24.3 36.8 53.3 99.7 53.3 190.8 0 91-27.4 153.9-50.3 190.6-13.7 22-27.2 36.9-36.1 45.6-8.6 8.3-15.3 13.5-20.1 15.5l-0.1 0.1c-13.9 9.8-17.2 28.6-8.1 46.7 3.8 7.7 17.2 12.9 27.3 12.9 3.8 0 13.9 0 17.4-3.5 0.7-0.7 1.5-1.4 3.3-2.8 28.1-22.9 52.6-51 72.7-83.8 38.8-63.2 58.5-137.6 58.5-221.4 0-83.4-20.4-157.6-60.6-220.6z\" p-id=\"778\"></path><path d=\"M752.7 376.7c-23.8-27.4-48.4-40.2-53.7-42.1h-1.6l-1.9-1.3c-3.2-2.2-7.4-3.3-12-3.3-11.9 0-24.9 7.6-27.8 16.4l-0.3 1-0.6 0.9c-3.8 5.8-4.3 14.2-1.4 22.7 2.9 8.4 8.6 15.1 14.6 17.1l0.6 0.2 0.6 0.3c0.7 0.4 17.2 9.5 33.6 29.7 15.1 18.5 33.1 50.3 33.1 96.7 0 96.6-54.4 128.5-60.7 131.9-13.8 9.4-23 27.9-14.6 40.4l0.3 0.4 0.2 0.5c4.3 8.7 18.9 18.6 27.3 18.6 5.5 0 8.4-0.1 11.7-3.8l2.2-2.2H704.7c6.2-2.3 28.7-15.6 50.6-44.2 20.6-26.9 45.1-74.4 45.1-147.4 0-64.2-25.9-107.5-47.7-132.5z\" p-id=\"779\"></path></svg>\r\n                    <audio id=\"a-us\" src={data.audioUS} autoPlay={autoPlay[0]}></audio>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if(data.audioUK){\r\n            audioList.push(\r\n                <div className=\"title-tts\" onClick={()=>document.getElementById(\"a-uk\").play()}>\r\n                    <div className=\"\" >UK</div>\r\n                    {/*<img className=\"title-audio\" style={autoPlay[1]?playingStyle:{}} src={audio_icon}></img>*/}\r\n                    <svg className=\"title-audio\" style={autoPlay[1]?playingStyle:{}} viewBox=\"0 0 1024 1024\" fill=\"var(--t-fore-c)\" version=\"1.1\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M541.2 132.3c-7.2-3.3-15.2-5-23.3-5-13.9 0-26.8 5.1-36.5 14.4L280.6 312.4h-158c-11.5 0-23.9 3.9-33.6 10.4h-4l-8.7 9.2c-7.5 7.9-12.2 20.8-12.2 33.8v290.7c0 15 6.7 31.4 16.9 41.6 10.2 10.3 26.6 16.9 41.6 16.9h158.2l200.7 165.6c8.4 7.9 23.3 16 35.6 16 5.6 0 16.5 0 27.1-8 10-4.2 17.8-10.4 23.1-18.6 5.7-8.6 8.4-19.1 8.4-32V184c0-12.9-2.8-23.4-8.4-32-5.8-9-14.6-15.6-26.1-19.7z m-24.8 57.4v642.9L310.2 662.5l-8.2-6.8v0.1H123.3V371.7h179l214.1-182zM899.3 300c-20.9-32.7-46.5-61.1-75.9-84.2l-0.1-0.1c-1.3-1.1-2.2-1.8-2.9-2.4-4.5-2.8-9.6-4.3-15.1-4.3-10.3 0-21.6 5.3-31.1 14.5l-0.1 0.1c-8.4 13.5-3.9 35.9 9 45.2l0.1 0.1c6.1 2.5 14.7 9.7 20.8 15.4 9.4 8.7 23.6 23.7 38.1 45.6 24.3 36.8 53.3 99.7 53.3 190.8 0 91-27.4 153.9-50.3 190.6-13.7 22-27.2 36.9-36.1 45.6-8.6 8.3-15.3 13.5-20.1 15.5l-0.1 0.1c-13.9 9.8-17.2 28.6-8.1 46.7 3.8 7.7 17.2 12.9 27.3 12.9 3.8 0 13.9 0 17.4-3.5 0.7-0.7 1.5-1.4 3.3-2.8 28.1-22.9 52.6-51 72.7-83.8 38.8-63.2 58.5-137.6 58.5-221.4 0-83.4-20.4-157.6-60.6-220.6z\" p-id=\"778\"></path><path d=\"M752.7 376.7c-23.8-27.4-48.4-40.2-53.7-42.1h-1.6l-1.9-1.3c-3.2-2.2-7.4-3.3-12-3.3-11.9 0-24.9 7.6-27.8 16.4l-0.3 1-0.6 0.9c-3.8 5.8-4.3 14.2-1.4 22.7 2.9 8.4 8.6 15.1 14.6 17.1l0.6 0.2 0.6 0.3c0.7 0.4 17.2 9.5 33.6 29.7 15.1 18.5 33.1 50.3 33.1 96.7 0 96.6-54.4 128.5-60.7 131.9-13.8 9.4-23 27.9-14.6 40.4l0.3 0.4 0.2 0.5c4.3 8.7 18.9 18.6 27.3 18.6 5.5 0 8.4-0.1 11.7-3.8l2.2-2.2H704.7c6.2-2.3 28.7-15.6 50.6-44.2 20.6-26.9 45.1-74.4 45.1-147.4 0-64.2-25.9-107.5-47.7-132.5z\" p-id=\"779\"></path></svg>\r\n                    <audio id=\"a-uk\" src={data.audioUK} autoPlay={autoPlay[1]}></audio>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if(audioList.length == 0 && data.audio){\r\n            audioList.push(\r\n                <div className=\"title-tts\"  onClick={()=>document.getElementById(\"a-tts\").play()}>\r\n                    {/*<img className=\"title-audio\" style={autoPlay[2]?playingStyle:{}} src={audio_icon}></img>*/}\r\n                    <svg className=\"title-audio\" style={autoPlay[2]?playingStyle:{}} viewBox=\"0 0 1024 1024\" fill=\"var(--t-fore-c)\" version=\"1.1\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M541.2 132.3c-7.2-3.3-15.2-5-23.3-5-13.9 0-26.8 5.1-36.5 14.4L280.6 312.4h-158c-11.5 0-23.9 3.9-33.6 10.4h-4l-8.7 9.2c-7.5 7.9-12.2 20.8-12.2 33.8v290.7c0 15 6.7 31.4 16.9 41.6 10.2 10.3 26.6 16.9 41.6 16.9h158.2l200.7 165.6c8.4 7.9 23.3 16 35.6 16 5.6 0 16.5 0 27.1-8 10-4.2 17.8-10.4 23.1-18.6 5.7-8.6 8.4-19.1 8.4-32V184c0-12.9-2.8-23.4-8.4-32-5.8-9-14.6-15.6-26.1-19.7z m-24.8 57.4v642.9L310.2 662.5l-8.2-6.8v0.1H123.3V371.7h179l214.1-182zM899.3 300c-20.9-32.7-46.5-61.1-75.9-84.2l-0.1-0.1c-1.3-1.1-2.2-1.8-2.9-2.4-4.5-2.8-9.6-4.3-15.1-4.3-10.3 0-21.6 5.3-31.1 14.5l-0.1 0.1c-8.4 13.5-3.9 35.9 9 45.2l0.1 0.1c6.1 2.5 14.7 9.7 20.8 15.4 9.4 8.7 23.6 23.7 38.1 45.6 24.3 36.8 53.3 99.7 53.3 190.8 0 91-27.4 153.9-50.3 190.6-13.7 22-27.2 36.9-36.1 45.6-8.6 8.3-15.3 13.5-20.1 15.5l-0.1 0.1c-13.9 9.8-17.2 28.6-8.1 46.7 3.8 7.7 17.2 12.9 27.3 12.9 3.8 0 13.9 0 17.4-3.5 0.7-0.7 1.5-1.4 3.3-2.8 28.1-22.9 52.6-51 72.7-83.8 38.8-63.2 58.5-137.6 58.5-221.4 0-83.4-20.4-157.6-60.6-220.6z\" p-id=\"778\"></path><path d=\"M752.7 376.7c-23.8-27.4-48.4-40.2-53.7-42.1h-1.6l-1.9-1.3c-3.2-2.2-7.4-3.3-12-3.3-11.9 0-24.9 7.6-27.8 16.4l-0.3 1-0.6 0.9c-3.8 5.8-4.3 14.2-1.4 22.7 2.9 8.4 8.6 15.1 14.6 17.1l0.6 0.2 0.6 0.3c0.7 0.4 17.2 9.5 33.6 29.7 15.1 18.5 33.1 50.3 33.1 96.7 0 96.6-54.4 128.5-60.7 131.9-13.8 9.4-23 27.9-14.6 40.4l0.3 0.4 0.2 0.5c4.3 8.7 18.9 18.6 27.3 18.6 5.5 0 8.4-0.1 11.7-3.8l2.2-2.2H704.7c6.2-2.3 28.7-15.6 50.6-44.2 20.6-26.9 45.1-74.4 45.1-147.4 0-64.2-25.9-107.5-47.7-132.5z\" p-id=\"779\"></path></svg>\r\n                    <audio id=\"a-tts\" src={data.audio} autoPlay={autoPlay[2]}></audio>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return audioList;\r\n    }\r\n\r\n    more(data){\r\n        let moreList = [];\r\n        let packList = []; // 多于一个单词时，多的单词放入packList中折叠， 点击显示\r\n        if(!data.moreWord) return moreList;\r\n        for(let i=0; i < data.moreWord.length; i++){\r\n            if(i == 0){\r\n                moreList.push(\r\n                    <span className=\"more-word\" onClick={()=>this.handleClickMoreWord(data.moreWord[i])}>{data.moreWord[i]}</span> \r\n                );\r\n            }else{\r\n                packList.push(\r\n                    <span className=\"more-word\" onClick={()=>this.handleClickMoreWord(data.moreWord[i])}>{data.moreWord[i]}</span> \r\n                );\r\n            }\r\n        }\r\n        // console.log('moreList', moreList, moreList.length)\r\n        if (packList.length > 0){\r\n            moreList.unshift(\r\n                <svg className=\"more-open\" onClick={()=>this.handleClickMore()} viewBox=\"0 0 1024 1024\" fill=\"var(--t-fore-c)\" version=\"1.1\" width=\"200\" height=\"200\"><path d=\"M553.28 1010.112L55.488 512.32 553.984 13.824l45.248 45.248-453.248 453.248 452.672 452.544z\" p-id=\"4883\" ></path><path d=\"M916.736 1010.112L419.008 512.32 917.504 13.824l45.248 45.248-453.248 453.248 452.48 452.544z\" p-id=\"4884\"></path></svg>\r\n            );\r\n            moreList.push(\r\n                <div style={this.state.more.style} >{packList}</div>\r\n            );\r\n        }\r\n\r\n        return moreList;\r\n    }\r\n\r\n    calcFontSize(size,maxNumber,text){\r\n        /**size:初始字符大小, maxNumber:初始字符大小下可以显示的最大字符, text：当前字符 */\r\n        if(!text) return size;\r\n        if(text.length <= maxNumber) return size;\r\n        return size*maxNumber/text.length;\r\n    }\r\n\r\n    render(){\r\n\r\n        let isShow = this.props.show;\r\n        let data = this.state.data;\r\n\r\n        if(this.state.data.word != ''){\r\n\r\n        }\r\n\r\n        if(this.props.clickedWord != this.clickedWord && this.props.clickedWord.word){\r\n            this.clickedWord = this.props.clickedWord;\r\n            this.setWord();\r\n            this.aliIciba();\r\n            this.positionStyle = this.calcArrowPostion(this.positionStyle, this.props.clickedWord.position);\r\n            if(this.props.clickedWord.word.toLowerCase() != this.state.data.word) data = {};\r\n\r\n            if(this.state.more.isShow) this.handleClickMore();\r\n            if(this.state.menu.isShow) this.handleClickMenu();\r\n        }\r\n\r\n\r\n        // zoom\r\n        let Zoomstyle = Object.assign({}, this.positionStyle.style);\r\n        Zoomstyle.fontSize = `${this.epFontSize + this.state.zoom}px`;\r\n\r\n        this.positionStyle.style = Zoomstyle;\r\n        \r\n        this.moreElements = this.more(data);\r\n        this.audioElements = this.audio(data);\r\n\r\n        let test = {\r\n            top:`${this.positionStyle.y}px`,\r\n            left:`${this.positionStyle.x}px`,\r\n            position:\"absolute\",\r\n            backgroundColor:\"#f00\",\r\n            width:\"3px\",\r\n            height:\"3px\",\r\n            display:'none'\r\n        }\r\n\r\n        let loading = (\r\n            <div className=\"wrp-ep-loading\">\r\n                <div className=\"wrp-icon\">\r\n                    <div className=\"wrp-loading-icon\">\r\n                        <div/> <div/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n        // <img className=\"arrow\" style={position.arrowStyle} src={arrow}></img>\r\n        // <svg className=\"arrow\" style={position.arrowStyle} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 135 143\"><defs></defs><polygon  style={{fill:\"#fff\"}} points=\"7 143 67.5 16 128 143 7 143\"/></svg>\r\n        \r\n        return (\r\n            <div\r\n                id=\"wrp-ep\"\r\n                className={`explain-panel ${isShow?'':'explain-hidden'}`} \r\n                style={this.positionStyle.style}\r\n            >\r\n                <div style={test}></div>\r\n                {/*<img className=\"wrp-ep-arrow\" style={this.positionStyle.arrowStyle} src={arrowShadow_icon}></img>\r\n                <svg className=\"wrp-ep-arrow\" style={this.positionStyle.arrowStyle} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 135 143\"><defs></defs><polygon  style={{fill:\"#fff\"}} points=\"7 143 67.5 16 128 143 7 143\"/></svg>*/}\r\n                <div className=\"wrp-ep-arrow-container\" style={this.positionStyle.arrowStyle}>\r\n                    <div className=\"wrp-ep-arrow\"></div>\r\n                </div>\r\n                <div className=\"wrp-explain-content\">\r\n                    <div className=\"wrp-ep-title\">\r\n                        <div className=\"wrp-title-left\">\r\n                            <h1 className=\"wrp-title-word\" \r\n                                style={{fontSize:`${this.calcFontSize(1.2, 11, this.state.data.word  || this.props.clickedWord.word)}em`}}>\r\n                                {this.state.data.word  || this.props.clickedWord.word}\r\n                            </h1>\r\n                            {this.audioElements}\r\n                        </div>\r\n                        <div>\r\n                            {/*<img className=\"wrp-title-button\" hidden src={star_icon}></img>*/}\r\n                            <svg className=\"wrp-title-button\" style={{display:'none'}} viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\" fill=\"var(--t-fore-c)\"><defs><style type=\"text/css\"></style></defs><path d=\"M1009.562 454.103c-72.264 88.023-200.049 233.339-200.049 233.339s20.9 159.55 32.614 268.534c5.09 55.51-34.928 79.513-80.25 57.876-86.242-43.325-217.478-110.448-247-125.573-30.044 14.97-162.6 80.988-249.733 124.211-45.844 21.586-86.343-2.416-81.193-57.825 11.869-108.82 32.983-268.216 32.983-268.216S87.685 541.44 14.582 453.529c-25.836-31.928-9.247-77.311 41.697-85.657 103.885-19.64 264.909-50.944 264.909-50.944s88.074-162.335 143.8-261.755C495.657-5.325 516.874 1.66 520.5 3.441c9.452 3.256 24.371 15.022 43.848 51.783 55.091 99.574 142.172 262.124 142.172 262.124s159.13 31.304 261.806 50.995c50.33 8.397 66.765 53.832 41.237 85.76z\"  p-id=\"3336\"></path></svg>\r\n                            {/*<img className=\"wrp-title-button\" onClick={()=>{this.handleClickMenu()}} src={menu_icon}></img>*/}\r\n                            <svg className=\"wrp-title-button\" onClick={()=>{this.handleClickMenu()}} fill=\"var(--t-fore-c)\" viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M415.93 223.79c0-52.98 43.004-95.984 95.984-95.984s95.984 43.004 95.984 95.984-43.004 95.984-95.984 95.984-95.984-43.003-95.984-95.984zM415.93 511.742c0-52.98 43.004-95.984 95.984-95.984s95.984 43.004 95.984 95.984-43.004 95.984-95.984 95.984-95.984-43.004-95.984-95.984zM415.93 799.866c0-52.98 43.004-95.984 95.984-95.984s95.984 43.003 95.984 95.984-43.004 95.983-95.984 95.983-95.984-43.175-95.984-95.983z\" p-id=\"4126\"></path></svg>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"wrp-ep-content\">\r\n                        <dl style={this.state.menu.backStyle}>\r\n                            {this.state.status=='1'?data.expain:loading}\r\n                        </dl>\r\n                        <div className=\"more-word-contanier\">\r\n                            {this.moreElements}\r\n                        </div>\r\n                        <div className=\"wrp-ep-menu\" style={this.state.menu.style}>\r\n                            <div>\r\n                                <span>Auto Speech</span>\r\n                                <Switch \r\n                                    status={this.state.autoPlay} \r\n                                    switchChange={(status)=>this.handleSetting('autoPlay',status)}\r\n                                    onStyle={{backgroundColor:'var(--sc)'}}\r\n                                ></Switch>\r\n                            </div>\r\n                            <div>\r\n                                <span>Speech US</span>\r\n                                <Switch \r\n                                    status={this.state.playUS} \r\n                                    switchChange={(status)=>this.handleSetting('playUS',status)}\r\n                                    onStyle={{backgroundColor:'var(--sc)'}}\r\n                                ></Switch>\r\n                            </div>  \r\n                            <svg className=\"menu-button\" onClick={()=>this.handleSetting('zoom',1)} fill=\"var(--t-fore-c)\" viewBox=\"0 0 1024 1024\" version=\"1.1\" p-id=\"2685\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M592 400l-128 0 0-128c0-19.2-12.8-32-32-32s-32 12.8-32 32l0 128-128 0c-19.2 0-32 12.8-32 32s12.8 32 32 32l128 0 0 128c0 19.2 12.8 32 32 32s32-12.8 32-32l0-128 128 0c19.2 0 32-12.8 32-32S611.2 400 592 400z\" p-id=\"2686\"></path><path d=\"M950.4 905.6l-236.8-236.8c54.4-64 86.4-147.2 86.4-236.8C800 227.2 636.8 64 432 64 227.2 64 64 227.2 64 432 64 636.8 227.2 800 432 800c89.6 0 172.8-32 236.8-86.4l236.8 236.8c6.4 6.4 16 9.6 22.4 9.6s16-3.2 22.4-9.6C963.2 937.6 963.2 918.4 950.4 905.6zM432 736C265.6 736 128 598.4 128 432 128 265.6 265.6 128 432 128c166.4 0 304 137.6 304 304C736 598.4 598.4 736 432 736z\" p-id=\"2687\"></path></svg>\r\n                            <svg className=\"menu-button\" onClick={()=>this.handleSetting('zoom',-1)} fill=\"var(--t-fore-c)\" viewBox=\"0 0 1024 1024\" version=\"1.1\" p-id=\"2556\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M592 400l-320 0c-19.2 0-32 12.8-32 32s12.8 32 32 32l320 0c19.2 0 32-12.8 32-32S611.2 400 592 400z\" p-id=\"2557\"></path><path d=\"M950.4 905.6l-236.8-236.8c54.4-64 86.4-147.2 86.4-236.8C800 227.2 636.8 64 432 64 227.2 64 64 227.2 64 432 64 636.8 227.2 800 432 800c89.6 0 172.8-32 236.8-86.4l236.8 236.8c6.4 6.4 16 9.6 22.4 9.6s16-3.2 22.4-9.6C963.2 937.6 963.2 918.4 950.4 905.6zM432 736C265.6 736 128 598.4 128 432 128 265.6 265.6 128 432 128c166.4 0 304 137.6 304 304C736 598.4 598.4 736 432 736z\" p-id=\"2558\"></path></svg>\r\n                        </div>\r\n                    </div>  \r\n                </div>\r\n                            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default ExpainPanel;","import React from 'react';\r\nimport Word from './word.js';\r\n\r\nimport { renderToString } from \"react-dom/server\";\r\n\r\nimport './translatePanel.css';\r\n\r\n// 放到TranslatePanel 哪里合适\r\nvar translateScope={\r\n    front:1,    //设定值\r\n    behind:1,   //设定值\r\n    nf:0,       //当前值\r\n    nb:0        //当前值\r\n}\r\n\r\nclass TranslatePanel extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            showStatus:'hidden',\r\n            movingStyle:{},\r\n            // '0' 表示隐藏 \r\n            status:'0',\r\n        }\r\n        this.data = {};\r\n        this.movingRecord = {\r\n            dragY:0,\r\n            lastY:0,\r\n            moving:false,\r\n            slipY:0,\r\n            slipNum:0,\r\n        };\r\n        this.tpHeight = 550;\r\n        this.count = 0;\r\n    }\r\n\r\n    handleAdjustmentHeight(e){\r\n        // console.log(e)\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if(this.movingRecord.moving == false) {\r\n            this.movingRecord.lastY = e.touches[0].clientY;\r\n            this.movingRecord.moving = true;\r\n            setTimeout(()=>this.movingRecord.moving = false, 200);\r\n        }else{\r\n            let dragY = this.movingRecord.dragY + e.touches[0].clientY - this.movingRecord.lastY;\r\n\r\n            this.movingRecord.lastY = e.touches[0].clientY;\r\n\r\n            if(this.state.showStatus == \"full\") {\r\n                if(dragY < 0) dragY = 0;\r\n                if(dragY > this.tpHeight - 100) dragY = this.tpHeight - 100;\r\n            }else if(this.state.showStatus == \"half\") {\r\n                // 向上偏移值限制\r\n                if(dragY < -this.tpHeight / 2) dragY = -this.tpHeight / 2;\r\n                // 向下偏移值限制\r\n                if(dragY > this.tpHeight / 5 ) dragY = this.tpHeight / 5;\r\n                if(dragY > 150 ) dragY = 150;\r\n\r\n            }\r\n\r\n            this.setTranslateY(dragY);\r\n        }\r\n    }\r\n\r\n    handleTouchSlip(e){\r\n        // console.log('touch slip')\r\n        e.stopPropagation();\r\n        if(this.movingRecord.moving == false){\r\n            this.movingRecord.lastY = e.touches[0].clientY;\r\n            this.movingRecord.slipY = 0;\r\n            this.movingRecord.moving = true;\r\n            setTimeout(()=>{\r\n                this.movingRecord.moving = false;\r\n                this.slipNum = 0;\r\n            }, 150);\r\n        }else{\r\n            this.movingRecord.slipY = this.movingRecord.slipY + e.touches[0].clientY - this.movingRecord.lastY;\r\n            \r\n            let status = 0;\r\n            if(this.state.showStatus == \"half\"){\r\n                status = 1;\r\n            }else if(this.state.showStatus == \"full\"){\r\n                status = 2;\r\n                this.setTranslateY(0);\r\n            }\r\n\r\n            if(this.movingRecord.slipY > 100 && this.slipNum == 0){\r\n                status = status - 1;\r\n                this.movingRecord.slipY = 0;\r\n                this.slipNum = 1;\r\n            }else if(this.movingRecord.slipY < -100 && this.slipNum == 0){\r\n                status = status + 1;\r\n                this.movingRecord.slipY = 0;\r\n                this.slipNum = 1;\r\n            }\r\n\r\n            if(status < 0)status = 0;\r\n            if(status > 2)status = 2;\r\n            let showStatus = ['hidden', 'half', 'full'][status];\r\n            // console.log('status', status, this.movingRecord.slipY);\r\n\r\n            if(this.state.showStatus == showStatus) return;\r\n\r\n            this.setState({\r\n                showStatus:showStatus\r\n            })\r\n\r\n            // let tp = document.getElementById(\"tp\"); \r\n            // tp.style.transform = style.transform;\r\n        }\r\n    }\r\n\r\n    setTranslateY(value){\r\n        this.movingRecord.dragY = value;\r\n        let style = {transform:`translateY(${value}px)`}\r\n        // console.log('set translate y', value);\r\n        let tp = document.getElementById(\"tp\");\r\n        if(!tp) {\r\n            console.log('tp x');\r\n            return;\r\n        };\r\n        tp.style.transform = style.transform;\r\n    }\r\n\r\n    test(e){\r\n        console.log(e)\r\n        e.preventDefault();\r\n\r\n    }\r\n\r\n    handleMouseMove(e){\r\n        console.log('mouse move ->', this.movingRecord.moving,e)\r\n        \r\n        if(this.movingRecord.moving == true){\r\n            \r\n            this.movingRecord.slipY = this.movingRecord.slipY + e.clientY - this.movingRecord.lastY;\r\n            \r\n            let status = 0;\r\n            if(this.state.showStatus == \"half\"){\r\n                status = 1;\r\n            }else if(this.state.showStatus == \"full\"){\r\n                status = 2;\r\n            }\r\n\r\n            if(this.movingRecord.slipY > 100 && this.slipNum == 0){\r\n                status = status - 1;\r\n                this.movingRecord.slipY = 0;\r\n                this.slipNum = 1;\r\n            }else if(this.movingRecord.slipY < -100 && this.slipNum == 0){\r\n                status = status + 1;\r\n                this.movingRecord.slipY = 0;\r\n                this.slipNum = 1;\r\n            }\r\n\r\n            if(status < 0)status = 0;\r\n            if(status > 2)status = 2;\r\n            let showStatus = ['hidden', 'half', 'full'][status];\r\n            // console.log('status', status, this.movingRecord.slipY);\r\n\r\n            if(this.state.showStatus == showStatus) return;\r\n\r\n            this.setState({\r\n                showStatus:showStatus\r\n            })\r\n\r\n            // let tp = document.getElementById(\"tp\"); \r\n            // tp.style.transform = style.transform;\r\n        }\r\n        \r\n    }\r\n\r\n    handleMouseDown(e){\r\n        this.movingRecord.moving = true;\r\n    }\r\n\r\n    handleMouseUp(e){\r\n        this.movingRecord.moving = false;\r\n        this.slipNum = 0;\r\n    }\r\n\r\n    handleMouseLeave(e){\r\n        this.movingRecord.moving = false;\r\n        this.slipNum = 0;\r\n    }\r\n\r\n    translate(){\r\n        // let url = \"http://192.168.1.14:8000/translate\";\r\n        // let url = \"http://47.94.145.177:8000/translate\";\r\n        let url = \"https://47.94.145.177:8001/translate\";\r\n        \r\n        var xhr = new XMLHttpRequest(false,true);\r\n        xhr.open(\"POST\", url, true );\r\n        xhr.withCredentials = false;\r\n        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\r\n        // xhr.onreadystatechange = ()=>{}\r\n        let self = this;\r\n        xhr.onload = function(){\r\n            let json = JSON.parse(xhr.responseText);\r\n            if(json.status == '1'){\r\n                self.data.translate = json.value;\r\n                self.setState({\r\n                    status:'1'\r\n                })\r\n                // console.log('data', self.data)\r\n            }\r\n        }\r\n\r\n        let text = this.props.translateText && this.props.translateText.text;\r\n\r\n        xhr.send(`text=${encodeURIComponent(text)}&lang=${encodeURIComponent('en')}`);\r\n\r\n    }\r\n\r\n    getTextContent(element){\r\n        \r\n    }\r\n\r\n    componentDidMount(){\r\n        let tp = document.getElementById('tp');\r\n        tp.addEventListener('touchmove', (e)=>e.preventDefault());\r\n        this.tpHeight = tp.offsetHeight;\r\n\r\n    }\r\n\r\n    render(){\r\n\r\n        let count = this.props.translateCount;\r\n        if(this.count != count){\r\n            // console.log('extract',targetId, this.targetId);\r\n            this.setState({\r\n                showStatus:'half',\r\n                status:0,\r\n            })\r\n            this.translate();\r\n            this.movingRecord.sumY = 0;\r\n            // this.setTranslateY(0);\r\n            this.count = count;\r\n\r\n        }\r\n        // if(this.state.showStatus == 'hidden') this.targetId = null;\r\n\r\n        let showStyle={\r\n            hidden:{\r\n                bottom:\"-85%\",\r\n                height:'80%',\r\n            },\r\n            half:{\r\n                bottom:\"-45%\",\r\n                height:'80%',\r\n            },\r\n            full:{\r\n                bottom:0,\r\n                height:'80%',\r\n            }\r\n        }\r\n\r\n        let panelStyle = Object.assign({}, showStyle[this.state.showStatus]);\r\n\r\n        return (\r\n            <div id=\"tp\" className=\"wrp-translate-panel\" style={panelStyle}\r\n                onTouchMove={(e)=>this.handleTouchSlip(e)}\r\n                onMouseMove={(e)=>this.handleMouseMove(e)}\r\n                onMouseDown={(e)=>this.handleMouseDown(e)}\r\n                onMouseUp={(e)=>this.handleMouseUp(e)}\r\n                onMouseLeave={(e)=>this.handleMouseLeave(e)}\r\n                onClick={(e)=>this.props.clickWord(e)}\r\n            >\r\n                <div className=\"wrp-tp-handle\" onTouchMove={(e)=>this.handleAdjustmentHeight(e)} onClick={()=>this.setTranslateY(0)} />\r\n\r\n                <div className=\"\">{this.props.translateText.elements}</div>\r\n                <br/>\r\n                <div className=\"\">\r\n                    {(this.state.status == '1')?this.data.translate:''}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TranslatePanel;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport logo from './components/res/logo.png';\r\nimport manifest from './manifest.json';\r\n\r\n\r\nfunction head(child){\r\n    let head = [];\r\n    head = head.concat(child);\r\n    ReactDOM.render(head, document.getElementById('wrp-head'));\r\n}\r\n\r\nexport default head;","import React from 'react';\r\nimport '../App.css';\r\n\r\nfunction A(props){\r\n\r\n    const handleClick = (e)=>{\r\n        console.log('A handleClick', e.currentTarget,e.currentTarget.attributes[\"data-src\"]);\r\n        // 阻止默认事件\r\n        // e.preventDefault();\r\n\r\n        try{\r\n            // this.props.handleClick(\"链接\",\"是否转跳\")\r\n            props.clickLink(e.currentTarget.attributes[\"data-src\"].value, true);\r\n        }catch(e){\r\n            console.error('a.js need props.handleClick function!', e);\r\n        }\r\n    }\r\n    \r\n    // let aProps = props.props\r\n    // // aProps.className = \"wrp-a \" + aProps.className;\r\n    // aProps['data-href'] = aProps.href;\r\n    // delete aProps.href;\r\n    return (\r\n        <a {...props.props}\r\n            onClick={handleClick}\r\n        >{props.children}</a>\r\n    );\r\n}\r\n\r\nexport default A;\r\n\r\n// 有的页面会js动态加载新的<a/>, 该怎么办？\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport jQuery from 'jquery';\r\nimport {\r\n    Link,\r\n    withRouter,\r\n} from 'react-router-dom'\r\n\r\nimport './App.css';\r\n\r\nimport Word from './components/word';\r\nimport ReadPanel from './components/readPanel';\r\nimport ExplainPanel from './components/explainPanel';\r\nimport TranslatePanel from './components/translatePanel';\r\nimport head from './head';\r\nimport A from './components/a';\r\n\r\nvar wrp = \"wordReadingPro\";\r\n\r\n// import ReactDOMServer from 'react-dom/server';\r\n\r\n// import getText from './text.js';\r\n// import { isFulfilled } from 'q';\r\n// import { throwError } from 'rxjs';\r\n\r\nclass WrpApp extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        /**props.url */\r\n        this.state={\r\n            showExplainPanel:false,\r\n            showLinkDialog:false,\r\n            clickedWord:{},\r\n            // translateText:undefined,\r\n            translateCount:0,\r\n        };\r\n        this.htmlElements = [];\r\n        // this.headCssText = '';\r\n        // this.externalLink = '';\r\n        // this.abstract = null;\r\n        this.extractScope = {\r\n            front:1,\r\n            behind:1,\r\n            // fn, bn为断句过程中的变量\r\n            fn:0,\r\n            bn:0,\r\n        };\r\n        this.translateText = {};\r\n        this.sId = 0;\r\n        // 标识阅读界面, 页面序号\r\n        this.docId = -1;\r\n        // 链接，点击链接时显示转跳对话框\r\n        this.link = {\r\n            hash:false,\r\n            url:\"\",\r\n        };\r\n        this.config = {\r\n            splitWord:false,\r\n            splitSentence:true,\r\n            runScript:true,\r\n        };\r\n\r\n        // 移除$的控制权，避免冲突\r\n        jQuery.noConflict();\r\n\r\n    }\r\n\r\n    //提取网页内容摘要\r\n    extractAbstract(){\r\n        let doc = this.props.doc\r\n        if(!doc) return;\r\n        let abstract = {};\r\n        // icon\r\n        let links = doc.head.getElementsByTagName('link');\r\n        for(let i =0; i < links.length; i++){\r\n            let link = links[i];\r\n            if(!link.rel)continue;\r\n            if(link.rel.indexOf('icon') > 0){\r\n                abstract.icon = link.href;\r\n                break;\r\n            }\r\n        }\r\n        // title\r\n        let title = \"\";\r\n        let docTitle =  doc.head.getElementsByTagName('title')\r\n        if(docTitle.length > 0){\r\n            title = docTitle[0].textContent;\r\n        }else{\r\n            let docH1 = doc.body.getElementsByTagName('h1');\r\n            if(docH1.length > 0){\r\n                title = docH1[0].textContent;\r\n            }else{\r\n\r\n            }\r\n        }\r\n        abstract.title = title;\r\n        \r\n        // description\r\n        let pTags = doc.getElementsByTagName('p');\r\n        let description = \"\";\r\n        for(let i = 0; i < pTags.length; i++){\r\n            description = description + pTags[i].textContent.trim().slice(0,200);\r\n            if(description.length >= 200) break;\r\n        }\r\n\r\n        let spanTags = doc.getElementsByTagName(\"span\");\r\n        for(let i=0; i < spanTags.length; i++){\r\n            description = description + spanTags[i].textContent.trim().slice(0,200);\r\n            if(description.length >= 200) break;\r\n        }\r\n\r\n        if(!description) description = doc.body.textContent.trim().slice(0,200);\r\n        abstract.des = description;\r\n        \r\n        // console.log('摘要 描述',pTags, description);\r\n        // input & isURL\r\n        if(this.props.url){\r\n            abstract.input = this.props.url;\r\n            abstract.isURL = true;\r\n        }else{\r\n            abstract.input = this.props.doc.body.textContent;\r\n            abstract.isURL = false;\r\n        }\r\n\r\n        try{\r\n            // console.log('set history 1', abstract);\r\n            this.props.setReadHistory(abstract);\r\n        }catch(e){\r\n            console.warn(\"App.js need 'function' props setReadHistory!\", e);\r\n        }\r\n    }\r\n\r\n    isInline(nodeName){\r\n        const innerText = ['#text','b','i','em','s','small','u','strong','mark','span','code','a'];  // 移除'a'\r\n        if(typeof(nodeName) != \"string\"){\r\n            console.error('parameter type error, isInline() need string parameter!')\r\n            // throw \"parameter type error, isInline() need string parameter!\"\r\n            // return false\r\n        };\r\n        // console.log('toLowerCase', nodeName);\r\n        if(innerText.includes(nodeName.toLowerCase())){\r\n            return true;\r\n        }else{\r\n            return false;\r\n        };\r\n    }\r\n\r\n    frontHaveWordEnd(node){\r\n        /**判断前半部分(node)的末尾是否是单词的末尾， 即判断前半部分(node)的末尾是否有单词分割符（空格等） */\r\n        let children = node;\r\n        let deep = 0;\r\n        while(children){\r\n            let child = children; // 备份\r\n            if(!this.isInline(children.nodeName)) return false;\r\n            if(children.nodeName == \"#text\"){\r\n                let text = children.textContent;\r\n                if(/[a-zA-Z0-9_-]/.test(text[text.length -1])) return true;\r\n                return false;\r\n            }\r\n\r\n            if(!children.lastChild){\r\n                children = children.previousSibling;\r\n                // deep = deep \r\n            }else{\r\n                children = children.lastChild;\r\n                deep = deep + 1;\r\n            }\r\n\r\n            // 继续向上就不必了吧, 算了， 先写上\r\n            if(!children && deep > 0){\r\n                children = child.parentNode.previousSibling;\r\n                deep = deep - 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    behindHaveWordEnd(node){\r\n        /**判断后半部分（node）的开端是否是单词的开端， 即判断后半部分(node)的开端是否有单词分割符（空格等） */\r\n        let children = node;\r\n        let deep = 0;\r\n        while(children){\r\n            let child = children;\r\n            if(!this.isInline(children.nodeName)) return false;\r\n            if(children.nodeName == \"#text\"){\r\n                let text = children.textContent;\r\n                if(/[a-zA-Z0-9_-]/.test(text[0])) return true;\r\n                return false;\r\n            }\r\n\r\n            \r\n            if(!children.firstChild){\r\n                children = children.nextSibling;\r\n                // deep = deep \r\n            }else{\r\n                children = children.firstChild;\r\n                deep = deep + 1;\r\n            }\r\n\r\n            // 继续向上就不必了吧, 算了， 先写上\r\n            if(!children && deep > 0){\r\n                children = child.parentNode.nextSibling;\r\n                deep = deep - 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    haveCrossWord(node){\r\n        // 判断相邻两个节点之间是否含有交叉情况\r\n        let nextNode = node.nextSibling;\r\n        if(!node || !nextNode) return false;\r\n        if(!this.isInline(node.nodeName) || !this.isInline(nextNode.nodeName)) return false;\r\n        if(this.frontHaveWordEnd(node) && this.behindHaveWordEnd(nextNode)) return true;\r\n        return false;\r\n    }\r\n\r\n    handleClickWord(e){\r\n\r\n        this.extractScope.fn = 0;\r\n        this.extractScope.bn = 0;\r\n        let target = window.getSelection().anchorNode;\r\n        let offset = window.getSelection().anchorOffset;\r\n\r\n        if(!target.wholeText) return;\r\n\r\n        let clickedChar = target.wholeText.slice(offset,offset+1);\r\n        if(!/\\w/.test(clickedChar)){\r\n            this.hiddenSomeone('explainPanel');\r\n            return;\r\n        }\r\n        let part = this.extractPart(target, offset,'word');\r\n        // console.log(':part')\r\n        let word = part[0].texts.join('') + part[1].texts.join('');\r\n        console.log('check word ->',word)\r\n\r\n        let position = {x:e.pageX, y:e.pageY, clientY:e.clientY};\r\n        this.setState({\r\n            clickedWord:{word:word,position:position},\r\n            showExplainPanel:true\r\n        })\r\n    }\r\n\r\n    translate(e){\r\n        // console.log('translate',e, e.target, e.currentTarget,'\\ndetail',e.detail,'\\ntouches',e.touches,'\\ntargetTouches',e.targetTouches,'\\nchangedTouches',e.changedTouches,'\\neventPhase',e.eventPhase)\r\n        // console.log(window.getSelection());\r\n        this.extractScope.fn = 0;\r\n        this.extractScope.bn = 0;\r\n        let target = e.target;\r\n        let part = this.extractPart(target,null,'sentence');\r\n        let sentence = part[0].texts.join('') + part[1].texts.join('');\r\n        sentence = sentence.trim();\r\n        console.log('sentence ->:', sentence);\r\n        if(sentence.length < 3) return;\r\n        this.translateText = {\r\n            text:sentence,\r\n            elements:[...part[0].elements,...part[1].elements]\r\n        }\r\n        this.setState({\r\n            translateCount:this.state.translateCount + 1,\r\n        })\r\n\r\n    }\r\n\r\n    getWord(content){\r\n        return (\r\n            <Word\r\n                content = {content}\r\n            />\r\n            );\r\n    }\r\n\r\n    wordSplit(text){\r\n        /**just #text ; 仅文本,不含其他标签 */\r\n        if(!text) return [];\r\n        let re = /\\b/;\r\n        let wordpattern = /\\w+/;\r\n        let List = [];\r\n        let splitList = text.split(re);\r\n        for(let w of splitList){\r\n            if(wordpattern.test(w)){\r\n                List.push(this.getWord(w));\r\n            }else{\r\n                List.push(w);\r\n            }\r\n        }\r\n\r\n        return List;\r\n    }\r\n\r\n    sentenceSplit(text, node=null){\r\n        /**just #text ; 仅文本,不含其他标签 */\r\n        if(!text) return [];\r\n        let pattern = /([\\s\\S]*?[.!?。！？\\n\\v\\t]+)/;\r\n        let splitList = text.split(pattern);\r\n        let list = [];\r\n        let onlyOneChild = node && node.parentNode && node.parentNode.childElementCount;\r\n        if(splitList.length == 1 && parseInt(onlyOneChild) <= 1){\r\n            return splitList;\r\n        }\r\n        let self = this;\r\n\r\n        splitList.map((v)=>{\r\n            if(/^\\s*$/.test(v)){\r\n                list.push(v)\r\n            }else{\r\n                \r\n                list.push((<span key={'s' + self.sId}>{v}</span>));\r\n                self.sId = self.sId + 1;\r\n            }\r\n        })\r\n\r\n        return list;\r\n    }\r\n\r\n    styleFormat(cssText){\r\n        cssText.replace(/-([a-z])/,(m,g)=>g.toUpperCase());\r\n        if(cssText != \"\"){\r\n            cssText = cssText.replace(/:\\s*/g, '\":\"')\r\n            cssText = cssText.replace(/;\\s*/g, '\",\"')\r\n            cssText = '{\"' + cssText + '\"}'\r\n            cssText = cssText.replace(/,\"\"/g, '')\r\n            // 还需要对一些内容进行替换，比如 border-radius 替换为borderRadius\r\n            let style = {};\r\n            try{\r\n                style = JSON.parse(cssText)\r\n            }catch(e){\r\n\r\n            }\r\n\r\n            return style\r\n        }\r\n        return {}\r\n    }\r\n\r\n    // 待删除\r\n    attToProps_old(content){\r\n        if(!content) return {};\r\n        let props = {};\r\n        // let cssText = content.style.cssText;\r\n        if(content.style) props['style'] = this.styleFormat(content.style.cssText);\r\n        // let classList = content.classList;\r\n        // console.log('classLIst', classList)\r\n        if(content.id) props['id'] = content.id;\r\n        if(content.classList.value) props.className = content.classList.value;\r\n        if(content.hidden != null) props['hidden'] = content.hidden;\r\n        if(content.src) props['src'] = content.src;\r\n        if(content.width) props['width'] = content.width;\r\n        if(content.height) props['height'] = content.height;\r\n        if(content.nodeName == \"IMG\") props.style.maxWidth = '100%';\r\n\r\n        if(content.href) props['href'] = content.href;\r\n        if(content.href) props['rel'] = content.rel;\r\n        if(content.target) props['target'] = content.target;\r\n\r\n        if(content.type) props['type'] = content.type;\r\n\r\n\r\n        return props;\r\n    }\r\n\r\n    attToProps(node){\r\n        if(!node) return {};\r\n        if(!node.attributes) return {};\r\n        let props = {};\r\n        for(let i = 0; i < node.attributes.length; i++){\r\n            let att = node.attributes[i];\r\n            let attName =att.name;\r\n            let attValue = att.value;\r\n            // if(attName===\"style\") {\r\n            //     attValue = node.attributeStyleMap;\r\n            //     continue;\r\n            // };\r\n            switch(attName){\r\n                case \"style\":\r\n                    attValue = this.styleConvert(node.style);\r\n                    break;\r\n                case \"src\":\r\n                case \"href\":\r\n                    // 大多默认为相对路径，需补全链接\r\n                    attValue = node[attName];\r\n                    break;\r\n                case \"srcset\":\r\n                    // 如何补全相对路径呢？这是一个问题，还有在css中的background-image:url()...\r\n                    attValue = '';\r\n                    break;\r\n                case \"class\":\r\n                    attName = \"className\";\r\n                    break;\r\n                // default:\r\n                //     continue;\r\n                // case \"async\":\r\n                //     console.log('async', att.value);\r\n                //     attName = \"\"\r\n                //     attValue = \"\";\r\n                //     break;\r\n                case \"for\":\r\n                    attName = \"htmlFor\";\r\n                    break;\r\n                case \"tabindex\":\r\n                    attName = \"tabIndex\";\r\n                    break;\r\n                case \"itemprop\":\r\n                    attName = \"itemProp\";\r\n                    break;\r\n                case \"itemscope\":\r\n                    attName = \"itemScope\";\r\n                    break;\r\n                case \"itemtype\":\r\n                    attName = \"itemType\";\r\n                    break;\r\n                case \"xml:space\":\r\n                    attName = \"xmlSpace\";\r\n                    break;\r\n                case \"fill-rule\":\r\n                    attName = \"fillRule\";\r\n                    break\r\n                case \"clip-rule\":\r\n                    attName = \"clipRule\";\r\n                    break\r\n                case \"autocapitalize\":\r\n                    attName = \"autoCapitalize\"\r\n                    break;\r\n                case \"acceptcharset\":\r\n                    attName = \"acceptCharset\";\r\n                    break;\r\n                case \"autocomplete\":\r\n                    attName = \"autoComplete\";\r\n                    break;\r\n                case \"stroke-linecap\":\r\n                    attName = \"strokeLinecap\"\r\n                    break;\r\n                case \"stroke-miterlimit\":\r\n                    attName = \"strokeMiterlimit\";\r\n                    break;\r\n                case \"stroke-width\":\r\n                    attName = \"strokeWidth\";\r\n                    break;\r\n                case \"stroke-linejoin\":\r\n                    attName = \"strokeLinejoin\";\r\n                    break;\r\n                case \"crossorigin\":\r\n                    attName = \"crossOrigin\";\r\n                    break;\r\n\r\n            }\r\n            // attName = attName.replace(/-([a-z])/g,(m,g)=>g.toUpperCase());\r\n            props[attName] = attValue;\r\n            // console.log('att ->', attName)\r\n        }\r\n        return props;\r\n    }\r\n\r\n    styleConvert(style){\r\n        // style = element.style;\r\n        let styleObj = {};\r\n        for(let i=0; i < style.length; i++){\r\n            let styleKey = style[i].replace(/-([a-z])/g,(m,g)=>g.toUpperCase())\r\n            styleObj[styleKey] = style[style[i]];\r\n        }\r\n        // console.log(\"App.js: styleConvert() style:\", style, \"obj:\", styleObj);\r\n        return styleObj;\r\n    }\r\n\r\n    extractFront(node,alterNode){\r\n        // 提取单词前半部分, 在标签尾部，\r\n        let getCross = false;\r\n                \r\n        if(node.nodeName == \"#text\"){\r\n            // 文本 | 直接分割 返回\r\n\r\n            let text = node.textContent;\r\n            let cross, other;\r\n\r\n            let splitList = text.split(/(\\w*$)/); \r\n            // splitList = [Hello ','World']\r\n            other = splitList[0] ? splitList[0] : '';\r\n            cross = splitList[1] ? splitList[1] : '';\r\n            if(/[\\W]/.test(other[other.length - 1])) getCross = true;\r\n\r\n            if(alterNode){ //alterNode == \r\n                // 将交叉部分移出xmlDoc\r\n                // let newNode = doc.createTextNode(other)\r\n                // node.parentNode.replaceChild(newNode, node)\r\n            }\r\n            \r\n            let otherWord = this.wordSplit(other);\r\n            // console.log('return, cross, otherWord', ReactDOMServer.renderToString(cross),ReactDOMServer.renderToString(otherWord))\r\n            return [cross,otherWord]\r\n                        \r\n        }else{\r\n            // 标签 | 遍历 分割 返回\r\n            let c  = node.lastChild;\r\n            let crossChildren = [];\r\n            let otherChildren = [];\r\n\r\n            while(c){\r\n                if(getCross){\r\n                    // 已提取交叉情况，并移出xmlDoc\r\n                    console.log('app-196-traversal');\r\n                    otherChildren.push(this.htmlTraversal(c))\r\n                }else{\r\n                    // 继续迭代\r\n                    let [cross, other] = this.extractFront(c,alterNode)\r\n                    crossChildren.push(cross);\r\n                    otherChildren.push(other)\r\n                }\r\n                c = c.previousSibling;  // previousSibling\r\n            }\r\n            let type = node.nodeName.toLowerCase(); //.replace('body','div')\r\n            let props = this.attToProps(node);\r\n            let crossElement = this.createElement(type,props,crossChildren);\r\n\r\n            let otherElement = this.createElement(type,props,otherChildren);\r\n            // console.log('return, crossElement, otherElement', ReactDOMServer.renderToString(crossElement),ReactDOMServer.renderToString(otherElement))\r\n            return [crossElement, otherElement]\r\n        }\r\n    }\r\n\r\n    // translatePanel.js 需要，考虑共享\r\n    createElement(type,props,children){\r\n        type = type.toLowerCase();\r\n        let element;  \r\n\r\n        switch(type){\r\n            case \"div\":\r\n            case \"span\":\r\n            case \"p\":\r\n                element = React.createElement(type,props,children);\r\n                return element;\r\n            case \"a\":\r\n                props['data-src'] = props.href;\r\n                delete props.href;\r\n                element = (<A\r\n                    props = {props} \r\n                    clickLink={(link,status)=>this.clickLink(link, status)}\r\n                    clickWord={(e)=>this.handleClickWord(e)}\r\n                >{children}</A>);\r\n                return element;\r\n            // 以下为 empty elements (no children) 的标签\r\n            case \"input\":\r\n                // 存在value属性导致无法输入\r\n                delete props.value;\r\n            case \"img\":\r\n            case \"hr\":\r\n            case \"br\":\r\n            case \"link\":\r\n            case \"wbr\":\r\n            case \"area\":\r\n            case \"base\":\r\n            case \"embed\":\r\n            case \"keygen\":\r\n            case \"meta\":\r\n            case \"param\":\r\n            case \"source\":\r\n            case \"track\":\r\n                element = React.createElement(type,props);\r\n                return element;\r\n            // 以下为忽略的标签\r\n            case \"#comment\":\r\n            case \"#document\":\r\n            case \"script\":\r\n                // return '';\r\n                if(!this.config.runScript) return '';\r\n                if(props.src) props[\"data-href\"] = props.src;\r\n                delete props.src;\r\n                element = React.createElement(type, props, children);\r\n                return element;\r\n            // 特殊处理\r\n            case \"svg\":\r\n                element = React.createElement(type, props, children);\r\n                // element.dangerouslySetInnerHTML()\r\n                return element;\r\n            case \"body\":\r\n                element = React.createElement('div',props, children);\r\n                return element;\r\n            case \"col\":\r\n                return (<col {...props}></col>);\r\n            case \"textarea\":\r\n                if(children.length > 1) console.warn('React.reactElememt() Error! <textarea> tag only requests one children.')\r\n                // element = React.createElement('div',props, children[0]);\r\n                element = React.createElement('textarea',props, children[0]);\r\n                return element;\r\n            default:\r\n                try{\r\n                    element = React.createElement(type,props,children);\r\n                    return element;\r\n                }catch(e){\r\n                    console.log('React.createElement() Error on create \"', type, '\" tag!')\r\n                }\r\n                \r\n        }\r\n    }\r\n\r\n    extractBehind(node){\r\n        // 提取单词后半部分, 在标签首部，\r\n        let getCross = false;\r\n                \r\n        if(node.nodeName == \"#text\"){\r\n            // 文本 | 直接分割 返回\r\n\r\n            let text = node.textContent;\r\n            let cross, other;\r\n\r\n            let splitList = text.split(/(^\\w*)(.+$)/); \r\n            // splitList = ['','Hello',' World!','']\r\n            cross = splitList[1] ? splitList[1] : '';\r\n            other = splitList[2] ? splitList[2] : '';\r\n            if(/[\\W]/.test(other[0])) getCross = true;\r\n            \r\n            \r\n\r\n            let otherWord = this.wordSplit(other);\r\n            console.log('return, cross, otherWord', cross,other)\r\n            return [cross,otherWord]\r\n                        \r\n        }else{\r\n            // 标签 | 遍历 分割 返回\r\n            let c  = node.firstChild;\r\n            let crossChildren = [];\r\n            let otherChildren = [];\r\n\r\n            while(c){\r\n                if(getCross){\r\n                    // 已提取交叉情况，并移出xmlDoc\r\n                    console.log('app-262-traversal');\r\n                    otherChildren.push(this.htmlTraversal(c))\r\n                }else{\r\n                    // 继续迭代\r\n                    let [cross, other] = this.extractBehind(c)\r\n                    crossChildren.push(cross);\r\n                    otherChildren.push(other)\r\n                }\r\n                c = c.nextSibling;  // previousSibling\r\n            }\r\n            let type = node.nodeName.toLowerCase(); //.replace('body','div')\r\n            let props = this.attToProps(node);\r\n            let crossElement = this.createElement(type,props,crossChildren);\r\n\r\n            let otherElement = this.createElement(type,props,otherChildren);\r\n            // console.log('return, crossElement, otherElement', ReactDOMServer.renderToString(crossElement),\" | \",ReactDOMServer.renderToString(otherElement))\r\n            return [crossElement, otherElement]\r\n        }\r\n    }\r\n\r\n    extractBothEnds(node){\r\n        // console.log('extractBothEnds');\r\n        let alterNode = true\r\n        let frontCross = this.extractFront(node,alterNode)[0];\r\n        let [behindCross,behindOther] = this.extractBehind(node);\r\n        // console.log('behindCross',behindCross,'behindOther',behindOther,'frontCross', frontCross);\r\n        return [behindCross,behindOther,frontCross]\r\n    }\r\n    \r\n    // 未使用 \r\n    findCrossIndex(node){\r\n        /** node为父标签，判断子标签的交叉情况\r\n         *  index 表示该标签的*前*半部分 上个标签的后部分 有交叉情况\r\n         *  返回值为列表\r\n         */\r\n        let t1 = Date.now()\r\n        let indexList = [];\r\n        let childNodes = node.childNodes;\r\n        if( childNodes.length <= 1 || !node) return indexList;\r\n        for(let i = 1; i < childNodes.length; i++){\r\n            this.isInline(childNodes[i].nodeName)\r\n            this.isInline(childNodes[i - 1].nodeName)\r\n            if(this.isInline(childNodes[i].nodeName) && this.isInline(childNodes[i - 1].nodeName)){\r\n                let nodeChar = childNodes[i].textContent[0];\r\n                let lastNodeChar = childNodes[i - 1].textContent[childNodes[i - 1].textContent.length - 1];\r\n                let re = /[a-zA-Z0-9_-]/;\r\n                if(re.test(nodeChar) && re.test(lastNodeChar)){\r\n                    indexList.push(i);\r\n                }\r\n            }\r\n        }\r\n        let t2 = Date.now()\r\n        console.log('FindCrossIndex runing time', t2 - t1)\r\n        return indexList;\r\n    }\r\n\r\n    htmlTraversal(node){\r\n        if(!node) return [];\r\n        // console.log('htmlTraversal',node,node.nodeName)\r\n        // let ignoreTag = [\"script\",'meta','link','#comment','#document','iframe'];\r\n        // let mostCommon = [\"DIV\",\"P\",\"SPAN\"]\r\n        let type, props, element;\r\n        switch(node.nodeName){\r\n            case \"DIV\":\r\n            case \"P\":\r\n            case \"SPAN\":\r\n            case \"A\":\r\n            default:\r\n                let childrenList = [];\r\n                let frontCross, frontOther;\r\n                let haveCross = false;\r\n                if(this.config.splitWord){\r\n                    for(let i = 0; i < node.childNodes.length; i++){\r\n                        let children = node.childNodes[i];\r\n                        let haveCross2 = this.haveCrossWord(children, children.nextSibling);\r\n    \r\n                        // console.log('Cross Cross2', children, children.nextSibling, haveCross, haveCross2);\r\n                        if(!haveCross && !haveCross2){\r\n                            // console.log('app-362-traversal',children, children.length);\r\n                            childrenList = childrenList.concat(this.htmlTraversal(children));\r\n                            children = children.nextSibling;\r\n                        }else if(haveCross && haveCross2){\r\n                            // i all  前后都存在交叉情况\r\n                            let [behindCross, middle, newFrontCross] = this.extractBothEnds(children);\r\n                            console.log(\"middle\", middle);\r\n                            if(middle.props.children.length == 0){\r\n                                frontCross = [frontCross].concat(newFrontCross);\r\n                            }else if(middle.props.children[0].length < 1){\r\n                                // 三交叉 behindCross is ''\r\n                                // console.log('三交叉');\r\n                                frontCross = [frontCross].concat(newFrontCross);\r\n                            }else if(middle.props.children[0].length >= 1){\r\n                                let word = this.getWord([frontCross,behindCross]);\r\n                                childrenList = childrenList.concat(word).concat(middle);\r\n                                frontCross = newFrontCross;\r\n                                // frontCross = []\r\n                            };\r\n                        }else if(haveCross2){\r\n                            // i - 1 front 暂存\r\n                            [frontCross,frontOther] = this.extractFront(children);\r\n                            childrenList = childrenList.concat(frontOther);\r\n                        }else if(haveCross){\r\n                            // i behind\r\n                            let [behindCross,behindOther] = this.extractBehind(children);\r\n                            let word = this.getWord([frontCross,behindCross]);;\r\n                            childrenList = childrenList.concat(word).concat(behindOther);\r\n                        };\r\n                        haveCross = haveCross2;\r\n                        children = null;\r\n                    }\r\n                }else{\r\n                    for(let i = 0; i < node.childNodes.length; i++){\r\n                        let children = node.childNodes[i];\r\n                        childrenList = childrenList.concat(this.htmlTraversal(children));\r\n                    }\r\n                }\r\n                \r\n                type = node.nodeName.toLowerCase();\r\n    \r\n                props = this.attToProps(node);\r\n                element = this.createElement(type,props,childrenList);\r\n                return element;\r\n            case \"#text\":\r\n                if(this.config.splitWord){\r\n                    return this.wordSplit(node.textContent);\r\n                }else if(this.config.splitSentence){\r\n                    return this.sentenceSplit(node.textContent, node);\r\n                }else{\r\n                    return node.textContent;\r\n                }\r\n            case \"#comment\":\r\n            case \"#document\":\r\n            case \"IFRAME\":\r\n                // 忽略\r\n                return [];\r\n            case \"STYLE\":\r\n                // console.log('style tag->',node, node.innerText, node.scoped);\r\n                type = node.nodeName.toLowerCase();\r\n    \r\n                props = this.attToProps(node);\r\n                element = this.createElement(type,props,node.innerText);\r\n                return element;\r\n            case \"SCRIPT\":\r\n                type = node.nodeName.toLowerCase();\r\n    \r\n                props = this.attToProps(node);\r\n                element = this.createElement(type,props,node.innerText);\r\n                return element;\r\n        }\r\n    }\r\n\r\n    // 未使用\r\n    getHeadCssText(head){\r\n        if(!head) return '';\r\n        let cssText = '';\r\n        let styles = head.getElementsByTagName(\"style\");\r\n        for(let i=0; i < styles.length; i++){\r\n            cssText = cssText + styles[i].innerText;\r\n        }\r\n        return cssText;\r\n    }\r\n\r\n    // 未使用\r\n    insertHead(head){\r\n        /**提取head中的有用部分（link, style, ...）\r\n         * DOM操作插入document.head中\r\n         * 随着加载的文档越来越多， head中插入的也越来越多，干扰后续的阅读体验\r\n         * 所以需要插入，也需要移除\r\n         */\r\n        for(let i=0; i < head.childNodes.length; i++){\r\n            let node = head.childNodes[i]\r\n            let type = node.nodeName;\r\n            // console.log('nodeName', node, node.nodeName)\r\n            // console.log('node src ->', node.href)\r\n\r\n            // 相对链接转换为绝对\r\n            if(node.href) node.href = node.href;\r\n            if(node.src) node.src = node.src;\r\n\r\n            switch(type){\r\n                case \"LINK\":\r\n                    // 黑名单\r\n                    if([/manifest/,/icon/].findIndex((value)=>value.test(node.rel)) != -1) break;\r\n\r\n                    //白名单\r\n                    // if(![/stylesheet/,/preload/].findIndex((value)=>value.test(node.rel))) break;\r\n                case \"STYLE\":\r\n                    document.head.insertBefore(node, document.head.lastChild);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    extractHead(head){\r\n        /** 提取head中的有用部分，复制，返回列表 */\r\n        let list = [];\r\n        if(!head)return list;\r\n        let base = false;\r\n        for(let i=0; i < head.childNodes.length; i++){\r\n            let node = head.childNodes[i]\r\n            let type = node.nodeName;\r\n            // console.log('nodeName', node, node.nodeName)\r\n            // console.log('node src ->', node.href)\r\n\r\n            if(type === 'BASE'){\r\n                base = true\r\n            };\r\n\r\n            // 相对链接转换为绝对\r\n            if(node.href) node.href = node.href;\r\n            if(node.src) node.src = node.src;\r\n\r\n            switch(type){\r\n                case \"LINK\":\r\n                    // 黑名单\r\n                    if([/manifest/,/icon/].findIndex((value)=>value.test(node.rel)) != -1) break;\r\n\r\n                    //白名单\r\n                    // if(![/stylesheet/,/preload/].findIndex((value)=>value.test(node.rel))) break;\r\n\r\n                    list.push(this.createElement(type, this.attToProps(node), node.innerText));\r\n                    break;\r\n                case \"STYLE\":\r\n\r\n                    // list.push(this.createElement(type, this.attToProps(node), node.innerText));\r\n                    list.push(<style>{node.innerText}</style>);\r\n                    break;\r\n\r\n                case \"SCRIPT\":\r\n                    // list.push(<script >{node.innerText}</script>);\r\n                    list.push( this.createElement('script',this.attToProps(node), node.innerText) );\r\n                    break;\r\n\r\n                case \"TITLE\":\r\n                // 忽略\r\n                case \"#text\":\r\n                // case \"SCRIPT\":\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        if(!base)list.push(this.createBaseTag());\r\n        return list;\r\n    }\r\n\r\n    createBaseTag(){\r\n        let url = this.props.url;\r\n        if(url){\r\n            if(/^https?:\\/\\/(.+\\.\\w+.*)|(localhost.*)/.test(url)){\r\n                // let origin = url.match(/^(https?:\\/\\/[\\w\\.]+)\\/?.*$/)[1];\r\n                return (<base href={url} />);\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n\r\n    hiddenSomeone(name){\r\n        let names = name.split(' ');\r\n        let self = this;\r\n        names.map((name)=>{\r\n            switch(name){\r\n                case \"explainPanel\":\r\n                    self.setState({\r\n                        showExplainPanel:false,\r\n                    })\r\n                    break;\r\n                case \"linkDialog\":\r\n                    self.setState({\r\n                        showLinkDialog:false,\r\n                    })\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n    clickLink(link, status){\r\n        console.log(\"click Link\", link)\r\n        if(!link) return;\r\n\r\n        this.link.url = link;\r\n        this.link.hash = false;\r\n\r\n        let url = new URL(link);\r\n        let docUrl = new URL(this.props.url)\r\n        if((url.origin + url.pathname)==(docUrl.origin + docUrl.pathname)){\r\n            if(url.hash != \"\"){\r\n                // # hash 页面内标识符\r\n                this.link.hash = true;\r\n                this.link.url = url.hash;\r\n            }\r\n        }\r\n\r\n        // this.externalLink = link;\r\n\r\n        if(this.state.showLinkDialog == status) return;\r\n        if(typeof(status) != 'boolean') return;\r\n        this.setState({\r\n            showLinkDialog:status\r\n        });\r\n    }\r\n\r\n    // 寻找分割的断点位置\r\n    findSubPart(text,direction,pattern){\r\n        /**front 单词模板pattern /^[\\s\\S]*\\W(\\w*?)$/\r\n         * behind 单词模板pattern /^(\\w*?)\\W[\\s\\S]*$/\r\n         */\r\n        let subPart;\r\n        if(direction == 'front'){\r\n            // let pattern = /^[\\s\\S]*\\W(\\w*?)$/;\r\n            subPart = text.match(pattern);\r\n            // console.log('match', subPart);\r\n            if(subPart != null){\r\n                this.extractScope.fn += 1;\r\n                subPart = subPart[1];\r\n            }else{\r\n                subPart = text;\r\n            }\r\n        }else{\r\n            // behind\r\n            // let pattern = /^(\\w*?)\\W[\\s\\S]*$/;\r\n            subPart = text.match(pattern);\r\n            // console.log('match', subPart, pattern);\r\n\r\n            if(subPart != null){\r\n                this.extractScope.bn += 1;\r\n                subPart = subPart[1];\r\n            }else{\r\n                subPart = text;\r\n            }\r\n        }\r\n        // console.log('subPart', subPart)\r\n        // const end = /[.。!！?？]/\r\n        return subPart;\r\n    }\r\n\r\n    frontFind(target, offset, testParent=true,pattern){\r\n        // 向前遍历节点 查找翻译起点\r\n        // console.log('f')\r\n        let result = {\r\n            texts:[],\r\n            elements:[],\r\n            break:false\r\n        }\r\n        if(!target) return result;\r\n        while(target){\r\n            // console.log(\"front, while\", target,result.texts);\r\n            if(target.nodeName == \"#text\"){\r\n                let text\r\n                if(offset){\r\n                    text = target.textContent.slice(0,offset);\r\n                }else{\r\n                    text = target.textContent;\r\n                }\r\n                // console.log('front text', text, target)\r\n                let subPart = this.findSubPart(text,'front',pattern);\r\n                // console.log('subPart', subPart)\r\n                if(this.extractScope.front == this.extractScope.fn){\r\n                    result.texts.unshift(subPart);\r\n                    result.elements.unshift(subPart);\r\n                    // console.log('break')\r\n                    result.break = true;\r\n                    break;\r\n                }else{\r\n                    subPart = text;\r\n                    result.texts.unshift(subPart);\r\n                    result.elements.unshift(subPart);\r\n                }\r\n            }else if(target.nodeName == \"SPAN\"){\r\n                if(target.classList[0] == \"@w\"){\r\n                    // Word\r\n                    result.texts.unshift(target.textContent);\r\n                    result.elements.unshift(this.copyWord(target));\r\n                }else{\r\n                    // 需要遍历子节点\r\n                    let children = this.frontFind(target.lastChild,null,false,pattern);\r\n                    result.texts.unshift(...children.texts);\r\n                    result.elements.unshift(this.copy(target,children.elements));\r\n                    result.break = children.break;\r\n                    if(children.break) break;\r\n                }\r\n            }else if( !this.isInline(target.nodeName)){\r\n                break;\r\n            }else{\r\n                // 其他标签， 遍历子节点\r\n                let children = this.frontFind(target.lastChild,null,false,pattern);\r\n                // console.log(\"front children\", children)\r\n                result.texts.unshift(...children.texts);\r\n                result.elements.unshift(this.copy(target,children.elements));\r\n                result.break = children.break;\r\n                if(children.break) break;\r\n            }\r\n\r\n            // 偶尔因target.parentName undefined 出错;\r\n            if(!target.previousSibling && this.isInline(target.parentNode.nodeName) && testParent){\r\n                target = target.parentNode.previousSibling;\r\n            }else{\r\n                target = target.previousSibling;\r\n            }\r\n            offset = null;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    behindFind(target,offset, testParent=true,pattern,driectTarget=false){\r\n        // 向后遍历节点  查找翻译终点 \r\n        // console.log('behindFind -start,',target)\r\n        let result = {\r\n            texts:[],\r\n            elements:[],\r\n            break:false,\r\n        }\r\n        if(!target) return result;\r\n        if(!offset) offset = 0;\r\n        while(target){\r\n            console.log(\"next, while\", target);\r\n            if(target.nodeName == \"#text\"){\r\n                let text = target.textContent.slice(offset);\r\n                console.log('behind text', text,target,offset,target.textContent)\r\n\r\n                let subPart = this.findSubPart(text,'behind',pattern);\r\n                if(this.extractScope.behind == this.extractScope.bn){\r\n                    result.texts.push(subPart);\r\n                    result.elements.push(subPart);\r\n                    result.break = true;\r\n                    console.log('break')\r\n                    break;\r\n                }else{\r\n                    subPart = text;\r\n                    result.texts.push(subPart);\r\n                    result.elements.push(subPart);\r\n                }\r\n            }else if(target.nodeName == \"SPAN\"){\r\n                if(target.classList[0] == \"@w\"){\r\n                    // Word\r\n                    result.texts.push(target.textContent);\r\n                    result.elements.push(this.copyWord(target));\r\n                }else{\r\n                    // 需要遍历子节点\r\n                    let children = this.behindFind(target.firstChild,0,false,pattern);\r\n                    result.texts.push(...children.texts);\r\n                    result.elements.push(this.copy(target,children.elements));\r\n                    result.break = children.break;\r\n                    if(children.break) break;\r\n                }\r\n            }else if( !this.isInline(target.nodeName) && !driectTarget){\r\n                break;\r\n            }else{\r\n                // 其他标签， 遍历子节点\r\n                let children = this.behindFind(target.firstChild,0,false,pattern);\r\n                result.texts.push(...children.texts);\r\n                result.elements.push(this.copy(target,children.elements));\r\n                result.break = children.break;\r\n                if(children.break) break;\r\n            }\r\n\r\n            if(!target.nextSibling && this.isInline(target.parentNode.nodeName) && testParent){\r\n                target = target.parentNode.nextSibling;\r\n            }else{\r\n                target = target.nextSibling;\r\n            }\r\n            offset = 0;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    // 从html中提取部分文字区域， 例如：单词，句子\r\n    extractPart(target, offset, type='word'){\r\n        if(!target) return['',''];\r\n        // console.log('translate test',target);\r\n        let frontPattern;\r\n        let behindPattern;\r\n        if(type == 'word'){\r\n            frontPattern = /^[\\s\\S]*\\W(\\w*?)$/;\r\n            behindPattern = /^(\\w*?)\\W[\\s\\S]*$/;\r\n        }else if(type=='sentence'){\r\n            frontPattern = /^[\\s\\S]*[.!?。！？\\v\\t]([\\s\\S]*?)$/;\r\n            behindPattern = /^([\\s\\S]*?[.!?。！？\\v\\t])[\\s\\S]*$/;\r\n        }\r\n        let frontTarget = target;\r\n        if(offset == null){\r\n            frontTarget = target.previousSibling;\r\n            if(!this.isInline(target.nodeName)){\r\n                frontTarget = null;\r\n            }\r\n        }\r\n        // console.log('a',frontTarget,offset)\r\n        let front = this.frontFind(frontTarget,offset,true,frontPattern);\r\n        // console.log('go -1 front',front,'go -2');\r\n        let behind = this.behindFind(target,offset,true,behindPattern,true);\r\n        // console.log('go -2 behind',behind,'go -end');\r\n      \r\n        return [front, behind];\r\n    }\r\n\r\n    copy(content,children){\r\n        // Element、Children 为React Element\r\n        let type = content.nodeName.toLowerCase();\r\n        let props = this.attToProps(content);\r\n        let element = React.createElement(type,props,...children);\r\n        return element;\r\n    }\r\n\r\n    deepCopy(node,returnChilren=false){\r\n        \r\n        if(node.nodeName == '#text') return node.textContent;\r\n\r\n        let children = node.firstChild;\r\n        let childrenList = [];\r\n        while(children){\r\n            childrenList = childrenList.concat(this.deepCopy(children));\r\n            children = children.nextSibling;\r\n        }\r\n\r\n\r\n        if(returnChilren){\r\n            return childrenList;\r\n        }else{\r\n\r\n            let type = node.nodeName.toLowerCase();\r\n            const ignoreTag = ['#comment'];\r\n\r\n            if(ignoreTag.includes(type)){\r\n                return '';\r\n            }\r\n\r\n            let props = this.attToProps(node);\r\n            const noChildren = ['img','hr','br','input','link','wbr'];\r\n\r\n            if(noChildren.includes(type)){\r\n                let element = React.createElement(type,props);\r\n                return element;\r\n            }\r\n            \r\n            let element = React.createElement(type,props,childrenList);\r\n            return element;\r\n        }\r\n        \r\n    }\r\n\r\n    copyWord(word){\r\n        // copy Word, 由Word渲染后的span便签copy Word\r\n        // word可能含有子标签，需要遍历复制\r\n        let childrenList = this.deepCopy(word,true);\r\n        return(\r\n            <Word\r\n                content={childrenList}\r\n                handleClick={(e,w)=>{this.props.clickWord(e,w)}}\r\n                translate={()=>{}}\r\n            />\r\n        )\r\n    }\r\n\r\n    readNewPage(){\r\n        console.log(\"App.js readNewPage()\", this.link.url);\r\n\r\n        // this.props.history.push(`/r?url=${encodeURIComponent(this.link.url)}`);\r\n        this.props.setInput(this.link.url, true);\r\n\r\n        // 关闭对话框\r\n        if(this.state.showExplainPanel){\r\n            this.setState({\r\n                showExplainPanel:false\r\n            });\r\n        };\r\n\r\n        if(this.state.showLinkDialog){\r\n            this.setState({\r\n                showLinkDialog:false\r\n            });\r\n        };\r\n    }\r\n\r\n    docParser(node){\r\n        // console.log('app-traversal');\r\n        let t1 = Date.now()\r\n        let htmlElements = this.htmlTraversal(node);\r\n        let t2 = Date.now()\r\n        console.log(\"traversal Runing time \", t2 - t1)\r\n\r\n        this.htmlElements = htmlElements;\r\n        this.abstract = null;\r\n\r\n        try{\r\n            console.log('setStatus ->', 'completed');\r\n            this.props.setStatus('completed');\r\n        }catch(e){\r\n            console.error(e);\r\n        }\r\n\r\n        return htmlElements;\r\n    }\r\n    \r\n    render() {\r\n        let htmlElements = this.htmlElements;\r\n        // console.log('App.js: render()  status = ', this.props.status)\r\n        if(this.props.status == 'parsing'){\r\n            // 对页面进行解析\r\n            htmlElements = this.docParser(this.props.doc && this.props.doc.body);\r\n            // 提取head， 渲染head\r\n            let headChildList = this.extractHead(this.props.doc && this.props.doc.head);\r\n            head(headChildList);\r\n            this.extractAbstract();\r\n            // 滚动至顶部\r\n            window.scrollTo(0, 0);\r\n        }\r\n\r\n        return(\r\n            <div id=\"wrp-app\" >\r\n                <ReadPanel\r\n                    padding={!this.props.url}\r\n                    content={htmlElements}\r\n                    hiddenSomeone = {(name)=>this.hiddenSomeone(name)}\r\n                    handleClick={(e)=>{this.handleClickWord(e)}}\r\n                    translate={(e)=>this.translate(e)}\r\n                />\r\n\r\n                <ExplainPanel \r\n                    clickedWord={this.state.clickedWord} \r\n                    show={this.state.showExplainPanel}\r\n                />\r\n                <div className=\"wrp-view\">\r\n                    <TranslatePanel \r\n                        // translateTarget={this.state.translateTarget}\r\n                        translateText = {this.translateText}\r\n                        translateCount ={this.state.translateCount}\r\n                        clickWord={(e)=>this.handleClickWord(e)}\r\n                    />\r\n                    <div className={'wrp-link-dialog-box '.concat(this.state.showLinkDialog ? 'link-dialog-show' : '')} >\r\n                        <div to={`/wrp-read?url=${encodeURIComponent(this.externalLink)}`}>\r\n                            {(this.link.hash)?\r\n                            <a href={this.link.url}>\r\n                                <div className=\"wrp-nav-item wrp-ld-button\">\r\n                                    <svg className=\"wrp-nav-item-icon \" viewBox=\"0 0 1024 1024\" version=\"1.1\" fill=\"var(--c-dark)\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4385\"><defs><style type=\"text/css\"></style></defs><path d=\"M250.016 416.992l319.008 43.008 40 310.016 236-591.008zM120.992 464q-11.008-0.992-18.496-8.512t-8.992-19.008 4-20.512 15.488-12.992l778.016-311.008q8.992-4 18.016-2.016t16 8.992 8.992 16-2.016 18.016l-310.016 776q-4 10.016-13.504 15.488t-20.512 4-18.496-8.992-8.512-18.496l-48.992-384z\" p-id=\"4386\"></path></svg>\r\n                                    <div className=\"wrp-nav-item-title\" >转跳至此处</div>\r\n                                </div>\r\n                            </a>\r\n                            :\r\n                            <div className=\"wrp-nav-item wrp-ld-button\" onClick={()=>this.readNewPage()}>\r\n                                <svg className=\"wrp-nav-item-icon \" viewBox=\"0 0 1024 1024\" version=\"1.1\"  fill=\"var(--c-dark)\"><path  d=\"M863 942H500.3L309.7 822.6c-33.8-21.2-54.9-60.7-54.9-103V162.5c0-30.4 14.5-57.6 38.7-72.9 24.4-15.4 53.6-15.4 78-0.1L507 174.3h356c52.9 0 96 46.9 96 104.6v558.4c0 57.8-43.1 104.7-96 104.7z m-345.6-69.8H863c17.6 0 32-15.6 32-34.9V278.9c0-19.2-14.4-34.9-32-34.9H489.9l-150.3-94.1c-6.4-4-12-1.3-14.1 0-2.5 1.6-6.7 5.3-6.7 12.6v557.1c0 17.5 8.7 33.8 22.8 42.5l175.8 110.1z\" fill=\"#595959\" p-id=\"4277\"></path><path d=\"M508.8 942H161c-52.9 0-96-46.9-96-104.6V278.9c0-57.7 43.1-104.6 96-104.6h125.8v69.8H161c-17.6 0-32 15.6-32 34.9v558.4c0 19.2 14.4 34.9 32 34.9h347.8V942zM497.5 174.3h1v69.8h-1z\" p-id=\"4278\"></path><path d=\"M480 209.2h64v697.2h-64z\" p-id=\"4279\"></path></svg>\r\n                                <div className=\"wrp-nav-item-title\">阅读新页面</div>\r\n                            </div>\r\n                            }\r\n                        </div>\r\n                        <a href={this.externalLink} target=\"_blank\">\r\n                            <div className=\"wrp-nav-item wrp-ld-button\">\r\n                                <svg className=\"wrp-nav-item-icon \" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\" ><path fill=\"var(--c-dark)\" d=\"M168.8,123.3c0-3.2,2.8-5.8,6.3-5.8s6.3,2.6,6.3,5.8V164c0,6.4-5.6,11.6-12.5,11.6H31.2\tc-6.9,0-12.5-5.2-12.5-11.6V36c0-6.4,5.6-11.6,12.5-11.6H75c3.5,0,6.3,2.6,6.3,5.8s-2.8,5.8-6.3,5.8H37.5c-3.4,0-6.2,2.6-6.3,5.8\tc0,0,0,0,0,0.1v116.2c0,3.2,2.8,5.8,6.2,5.8c0,0,0,0,0.1,0h125c3.4,0,6.2-2.6,6.3-5.8c0,0,0,0,0-0.1V123.3z M74,132.8\tc-2.4,2.3-6.4,2.3-8.8,0c0,0,0,0,0,0c-2.4-2.2-2.5-5.9-0.1-8.2c0,0,0,0,0,0l94-87.4l-34.4,0.1c-3.4,0-6.1-2.5-6.2-5.7\tc0,0,0-0.1,0-0.1c0-3.2,2.8-5.8,6.2-5.8l49.8-0.2c3.4,0,6.1,2.5,6.2,5.7c0,0,0,0.1,0,0.1l-0.2,46.4c-0.1,3.2-2.8,5.8-6.3,5.8\tc-3.4,0-6.2-2.5-6.2-5.6c0,0,0-0.1,0-0.1l0.1-32.6L74,132.8z\"/></svg>\r\n                                <div className=\"wrp-nav-item-title\">新窗口打开</div>\r\n                            </div>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // 生命周期函数\r\n    componentDidMount(){\r\n        console.log('componentDidMount')\r\n        let that = this;\r\n        // 窗口滚动事件\r\n        let windowScroll = function(e){\r\n            if(!that.state.showExplainPanel) return;\r\n            that.setState({\r\n                showExplainPanel:false\r\n            });\r\n\r\n            if(!that.state.showLinkDialog) return;\r\n            that.setState({\r\n                showLinkDialog:false\r\n            })\r\n        }\r\n        window.addEventListener('scroll', windowScroll);\r\n\r\n    }\r\n\r\n    async componentDidUpdate(){\r\n\r\n        console.log('App.js componentDidUpdate')\r\n        console.log('this.docId', this.docId, \"this.props.docId\",this.props.docId);\r\n\r\n        if(this.docId != this.props.docId && this.props.status === \"completed\"){\r\n\r\n            this.docId = this.props.docId;\r\n            \r\n            // 加载Script\r\n            if(this.config.runScript){\r\n                let wrpReadPanel = jQuery(\"#wrp-read-panel\")[0];\r\n                let scriptList = wrpReadPanel.getElementsByTagName('script');\r\n\r\n                let fakeHead = jQuery(\"#wrp-head\")[0];\r\n                let headScriptList= fakeHead.getElementsByTagName('script');\r\n                scriptList = [...scriptList, ...headScriptList];\r\n                \r\n                let wrpApp = jQuery(\"#wrp-app\")[0];\r\n                for(let s of scriptList){\r\n                    let script = document.createElement('script');\r\n                    if(s.hasAttribute('type')) script.type = s.type;\r\n                    if(s.hasAttribute('data-href')) script.src = s.getAttribute('data-href');\r\n                    if(s.hasAttribute('async')) script.async = s.async;\r\n                    if(s.hasAttribute(\"data-src\")) script.setAttribute(\"data-src\", s.getAttribute(\"data-src\"));\r\n                    if(s.innerText) script.innerText = s.innerText;\r\n                    // if(s.hasAttribute('integrity')) script.integrity = s.integrity;\r\n                    wrpApp.appendChild(script);\r\n                    // await new Promise((resolve,reject)=>{setTimeout(()=>{resolve()}, 500)});\r\n                }\r\n\r\n                // 手动触发 DOMContentLoaded\r\n                var DOMContentLoaded_event = document.createEvent(\"Event\");\r\n                DOMContentLoaded_event.initEvent(\"DOMContentLoaded\", true, true);\r\n                window.document.dispatchEvent(DOMContentLoaded_event)\r\n\r\n                // 监控DOM更新\r\n\r\n\r\n            }\r\n            \r\n\r\n\r\n\r\n        }\r\n\r\n        console.log(\"PATH\", this.props.input);\r\n\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        console.log(\"App.js() componentWillUnmout() \");\r\n    }\r\n}\r\n\r\nexport default WrpApp;\r\n\r\nlet AppWithRouter = withRouter(WrpApp);\r\nexport {AppWithRouter}; ","import React from 'react';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useLocation,\r\n    useRouteMatch,\r\n    useParams,\r\n    useHistory,\r\n    withRouter,\r\n} from 'react-router-dom';\r\n\r\nimport './home.css';\r\n\r\nimport logo from './components/res/logo.png';\r\n\r\n// 未使用\r\nfunction itemCard(data){\r\n    if(!data) return '';\r\n    return (\r\n        <div className=\"wrp-card-wrapper wrp-cp\" onClick={()=>{}}>\r\n            <div className=\"wrp-image-wrapper wrp-card-image\">\r\n                <img className=\"wrp-image\" src={data.icon}></img>\r\n            </div>\r\n            <div className=\"wrp-card-text-wrapper\">\r\n                <div className=\"wrp-ellipsis wrp-ct\">{data.title}</div>\r\n                <div className=\"wrp-cs\">{data.des}</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction ItemCard(props){\r\n    /**props.data = {icon:'src',title:'title',des:'description'} */\r\n    let data = props.data;\r\n    if(!data) data = {};\r\n    return (\r\n        <div \r\n            className=\"wrp-card-wrapper wrp-cp\"\r\n            onClick={props.onClick}\r\n        >\r\n            <div className=\"wrp-image-wrapper wrp-card-image\">\r\n                <img className=\"wrp-image\" src={data.icon}></img>\r\n            </div>\r\n            <div className=\"wrp-card-text-wrapper\">\r\n                <div className=\"wrp-ellipsis wrp-ct\">{data.title}</div>\r\n                <div className=\"wrp-cs\">{data.des}</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nclass Home extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            // ReactRouter_DeclarativeRoutingForReact.js.html\r\n            // https://github.com/reactjs/react-router-tutorial/tree/master/lessons/08-index-routes \r\n            // 点击Next: Index Links 中的非文字部分，不弹出转跳框\r\n            input: 'https://',  //  paste.html   Golden_swallow-Wiki.html   wikipedia-1.html\r\n            typing:false,\r\n\r\n        };\r\n        this.urlPattern = /^https?:\\/\\/(.+\\.\\w+.*)|(localhost.*)/;\r\n        this.jumpChange = 0;\r\n        this.history = null;\r\n    }\r\n\r\n    handleChange(e){\r\n        if(this.jumpChange >= 1){\r\n            // console.log('change jump', e, e.currentTarget.value);\r\n            this.jumpChange -= 1;\r\n            return '';\r\n        };\r\n        // console.log('change', e, e.currentTarget.value);\r\n        let input = e.currentTarget.value;\r\n        if(this.state.input != input){\r\n            // console.log('setState')\r\n            this.setState({\r\n                input:input\r\n            })\r\n        }\r\n    }\r\n\r\n    handlePaste(e){\r\n        console.log('paste', e.clipboardData.getData('text/plain'),e.clipboardData.getData('text/html'));\r\n        let pasteText = e.clipboardData.getData('text/plain');\r\n        if(this.urlPattern.test(pasteText)){\r\n            // 粘贴的为url, 不进行操作\r\n        }else{\r\n            // 如果粘贴的不是url, 则尝试获取富文本\r\n            let pasteHtml = e.clipboardData.getData('text/html');\r\n            let input = this.state.input;\r\n            if(pasteHtml != '' && input == ''){\r\n                console.log('获取html', input + pasteHtml);\r\n                if(this.state.input != pasteHtml){\r\n                    this.jumpChange += 1;\r\n                    this.setState({\r\n                        input:input + pasteHtml\r\n                    })\r\n                }\r\n                // e.currentTarget.value = pasteHtml;\r\n                // this.input = pasteHtml;\r\n            }\r\n        }\r\n    }\r\n\r\n    inputGo(input){\r\n        console.log('input go', input);\r\n        if(!input) input = this.state.input;\r\n        let inputIsURL = input.length < 2000 ? this.urlPattern.test(input) : false;\r\n\r\n        if(input == '') return;\r\n\r\n        try{\r\n            console.log('props.setInput');\r\n            this.props.setInput(input, inputIsURL)\r\n        }catch(e){\r\n            console.error('home.js need props setInput is function', e);\r\n        }\r\n\r\n        // URL转跳\r\n        if(inputIsURL){\r\n            this.props.history.push({\r\n                pathname:'/wrp-read',\r\n                search : `?url=${encodeURIComponent(input)}`\r\n            })\r\n        }else{\r\n            this.props.history.push({\r\n                pathname:'/wrp-read',\r\n                // search : `?url=${encodeURIComponent('input')}`\r\n            }) \r\n        }\r\n        \r\n    }\r\n\r\n    handleKeyUp(e){\r\n        // console.log('handleKeyUp',e)\r\n        if(e.key == \"Enter\"){\r\n            this.inputGo();\r\n        }\r\n    }\r\n\r\n\r\n    setTyping(value){\r\n        if(this.state.typing == value) return;\r\n        this.setState({\r\n            typing:value\r\n        })\r\n    }\r\n\r\n    setInput(value,focus){\r\n        console.log('setInput', value,focus)\r\n        if(focus){\r\n            document.getElementById('whinput').focus();\r\n        }\r\n        if(typeof(value) !== 'string') return;\r\n        if(this.state.input == value) return;\r\n        this.setState({\r\n            input:value,\r\n        })\r\n    }\r\n\r\n    createHistory(){\r\n        let readHistory = this.props.readHistory;\r\n        console.log('createHistory', readHistory);\r\n        if(!readHistory) return [];\r\n        let history = [];\r\n        for(let i = readHistory.length - 1; i >= 0; i--){\r\n            console.log('i loog', readHistory[i]);\r\n            history.push(<ItemCard \r\n                data={readHistory[i]} \r\n                onClick={()=>{this.inputGo(readHistory[i].input);}}\r\n            ></ItemCard>)\r\n        }\r\n        console.log('createHistory - a', history);\r\n        this.history = this.props.readHistory;\r\n        return history;\r\n    }\r\n\r\n    render(){\r\n        let typing = this.state.typing;\r\n        let history = this.createHistory();\r\n\r\n        return(<div className=\"wrp-page\">\r\n                    <div className=\"wrp-app-logo-container\">\r\n                        <img className=\"wrp-app-logo\" src={logo} />\r\n                        {/*<h1 class=\"wrp-app-logo-title\">Word Reading Pro</h1>*/}\r\n                    </div>\r\n                    <div className={\"wrp-input-container \".concat(typing ? \"typing\":\"\")}>\r\n                        <div className=\"wrp-input-bar\">\r\n                            {typing ? (<div className=\"wrp-input-bar-button\" onClick={()=>this.setTyping(false)}>\r\n                                <svg viewBox=\"0 0 1118 1024\" version=\"1.1\" width=\"218.359375\" height=\"200\" fill=\"var(--c-dark)\"><defs><style type=\"text/css\"></style></defs><path d=\"M229.42 558.545h841.125c25.707 0 46.546-20.839 46.546-46.545 0-25.706-20.84-46.545-46.546-46.545H229.42L544.913 149.96c18.177-18.177 18.177-47.648 0-65.825-18.178-18.177-47.648-18.177-65.826 0L84.137 479.087c-9.09 9.089-13.634 21.001-13.634 32.913 0 11.912 4.545 23.824 13.633 32.913l394.951 394.95c18.178 18.178 47.648 18.178 65.826 0 18.177-18.176 18.177-47.647 0-65.824L229.419 558.545z\" p-id=\"5564\"></path></svg>\r\n                            </div>):''}\r\n                            <input\r\n                                className={\"wrp-input \".concat(typing ? \"wrp-input-typing\":\"\")}\r\n                                id=\"whinput\"\r\n                                autoComplete=\"on\"\r\n                                contentEditable=\"true\" \r\n                                onChange={(e)=>this.handleChange(e)}\r\n                                onKeyUp={(e)=>this.handleKeyUp(e)}\r\n                                onPaste={(e)=>{this.handlePaste(e);}}\r\n                                onFocus={()=>this.setTyping(true)}\r\n                                type=\"text\"\r\n                                placeholder=\"输入文章或链接\"\r\n                                value={this.state.input}\r\n                            ></input>\r\n                            {typing?(<div className=\"wrp-input-bar-button wb-clearinput\" onClick={()=>{this.setInput('', true)}}> \r\n                                <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\" fill=\"var(--c-dark)\"><defs><style type=\"text/css\"></style></defs><path d=\"M512 0a512 512 0 0 0-512 512 512 512 0 0 0 512 512 512 512 0 0 0 512-512 512 512 0 0 0-512-512z m241.005714 703.268571a32.182857 32.182857 0 0 1 0.512 45.348572 32.182857 32.182857 0 0 1-45.348571 0.512L512 556.763429 315.830857 748.982857a31.963429 31.963429 0 1 1-44.836571-45.787428L466.285714 512l-195.291428-191.268571a32.182857 32.182857 0 0 1-0.512-45.348572 32.182857 32.182857 0 0 1 45.348571-0.512L512 467.236571 708.169143 275.017143a31.963429 31.963429 0 1 1 44.836571 45.787428L557.714286 512l195.291428 191.268571z\" p-id=\"10064\"></path></svg>\r\n                            </div>):''}\r\n                            <div className=\"wrp-input-bar-go\" onClick={()=>{this.inputGo()}}> \r\n                                <svg viewBox=\"0 0 218.36 200\"><path fill=\"var(--c-light)\" d=\"M187.14,109.09l-61.62,61.62a9.09,9.09,0,0,0,12.86,12.86l77.14-77.14a9.1,9.1,0,0,0,0-12.86L138.38,16.43a9.09,9.09,0,1,0-12.86,12.86l61.62,61.62H22.86a9.09,9.09,0,1,0,0,18.18Z\"/></svg>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div>\r\n                        {history}\r\n                    </div>\r\n                    <div>\r\n                        {/**推荐文章 */}\r\n                    </div>\r\n                </div>\r\n            );\r\n    }\r\n}\r\n\r\nexport default withRouter(Home);\r\nexport {ItemCard}","import React from \"react\";\r\n\r\n\r\nfunction Status(props){\r\n    // props.status,\r\n    console.log('Status', props.status)\r\n\r\n    const handleClick = ()=>{\r\n        // 回退，将状态重置为completed\r\n        if(props.status == 'completed') return;\r\n        if(props.status == 'loading') return;\r\n        if(props.status == 'parsing') return;\r\n\r\n        try{\r\n            props.setStatus('completed')\r\n        }catch(e){\r\n            console.error('status.js: need props.setStatus() ', e);\r\n        }\r\n\r\n    }\r\n\r\n    const wrapper = (content)=>{\r\n        return (\r\n            <div \r\n                className=\"wrp-show-status\"\r\n                onClick = {handleClick}\r\n            >\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const errorIcon = (\r\n        <div className=\"wrp-icon\">\r\n            <svg className=\"wrp-icon-svg\" viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\" fill=\"rgb(var(--t-c-e))\"><defs><style type=\"text/css\"></style></defs><path d=\"M512 0a512 512 0 0 0-512 512 512 512 0 0 0 512 512 512 512 0 0 0 512-512 512 512 0 0 0-512-512z m241.005714 703.268571a32.182857 32.182857 0 0 1 0.512 45.348572 32.182857 32.182857 0 0 1-45.348571 0.512L512 556.763429 315.830857 748.982857a31.963429 31.963429 0 1 1-44.836571-45.787428L466.285714 512l-195.291428-191.268571a32.182857 32.182857 0 0 1-0.512-45.348572 32.182857 32.182857 0 0 1 45.348571-0.512L512 467.236571 708.169143 275.017143a31.963429 31.963429 0 1 1 44.836571 45.787428L557.714286 512l195.291428 191.268571z\" p-id=\"10064\"></path></svg>\r\n        </div>\r\n    );\r\n\r\n    const button = (\r\n        <div>\r\n            <button>重试</button>\r\n            <button>返回</button>\r\n        </div>\r\n    );\r\n\r\n    var statusContent = '';\r\n    switch(props.status){\r\n        case \"loading\":\r\n        case \"parsing\":\r\n        default:\r\n            if(props.status == \"loading\" || props.status == \"parsing\"){\r\n                statusContent = wrapper(\r\n                    <>\r\n                        <div className=\"wrp-icon\">\r\n                            <div className=\"wrp-loading-icon\">\r\n                                <div/> <div/>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"wrp-status-tip\">{props.status==\"loading\"?\"加载中...\":\"解析中...\"}</div>\r\n                    </>\r\n                )\r\n            }\r\n            break;\r\n        case \"failed\":\r\n        case \"timeout\":\r\n            statusContent = wrapper(\r\n                <>\r\n                    {errorIcon}\r\n                    <div className=\"wrp-text\">{props.status==\"failed\"?\"加载失败\":\"加载超时\"}</div>\r\n                    <div className=\"wrp-text wrp-status-des\">\r\n                        加载此网址：\r\n                        <span className=\"wrp-warning\">{props.url}</span>\r\n                        <br/>发生问题，请检查网址!\r\n                    </div>\r\n                </>\r\n            )\r\n            break;\r\n        case \"typeError\":\r\n            statusContent = wrapper(\r\n                <>\r\n                    {errorIcon}\r\n                    <div className=\"wrp-text\">返回类型错误</div>\r\n                    <div className=\"wrp-text wrp-status-des\">\r\n                        此网址：\r\n                        <span className=\"wrp-warning\">{props.url}</span>\r\n                        <br/>返回不受支持的内容，请检查网址!\r\n                    </div>\r\n                </>\r\n            )\r\n            break;\r\n        case \"completed\":\r\n            statusContent = ''\r\n            break;\r\n    }\r\n\r\n    return statusContent\r\n            \r\n}\r\n\r\nexport default Status;","import React, { useState } from 'react';\r\n\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useLocation,\r\n    useRouteMatch,\r\n    useParams,\r\n    useHistory,\r\n    withRouter,\r\n} from 'react-router-dom';\r\n\r\nimport './navBar.css';\r\n\r\nfunction fixCurrentIndex(currentIndex, setCurrentIndex){\r\n    let navList = [/\\/home(\\/.*)?$/, /\\/find(\\/.*)?$/, /\\/word(\\/.*)?$/, /\\/about(\\/.*)?$/];\r\n    let pathName =  (new URL(window.location.href)).pathname;\r\n    let current = navList.findIndex((re)=>re.test(pathName));\r\n    if(setCurrentIndex && currentIndex == current) return current;\r\n    setCurrentIndex(current);\r\n    return current;\r\n}\r\n\r\nfunction NavBar(){\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n    fixCurrentIndex(currentIndex, setCurrentIndex);\r\n    var c = \"var(--t-fore-c)\";\r\n    var c2 = \"var(--sc)\";\r\n\r\n    var colors = [c,c,c,c];\r\n    colors = colors.map((v,i)=>{return i==currentIndex?c2:c}); \r\n    \r\n    return(\r\n        <div className=\"wrp-nav\">\r\n            <div className=\"wrp-nav-item-container\">\r\n                <Link to=\"/wrp-home\" onClick={()=>setCurrentIndex(0)}>\r\n                    <div className=\"wrp-nav-item\" style={{color:colors[0]}}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill={colors[0]} viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\"><path d=\"M854.08768 503.1168l0 342.08768c0 44.450816-36.040704 80.490496-80.49152 80.490496L612.614144 925.694976 612.614144 664.09984c0-44.450816-36.03968-80.490496-80.490496-80.490496l-40.245248 0c-44.450816 0-80.49152 36.03968-80.49152 80.490496L411.38688 925.696 250.40384 925.696c-44.450816 0-80.490496-36.03968-80.490496-80.490496l0-342.08768L49.175552 503.117824 512 60.416l462.824448 442.701824L854.08768 503.117824z\" p-id=\"13773\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\">首页</div>\r\n                    </div>\r\n                </Link>\r\n                <Link to=\"/wrp-find\" onClick={()=>setCurrentIndex(1)}>\r\n                    <div className=\"wrp-nav-item\" style={{color:colors[1]}}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill={colors[1]} viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\"><path d=\"M534.378667 574.549333c31.338667 0 58.410667-17.130667 73.152-42.346667 0.149333 0.149333 0.256 0.256 0.405333 0.405333 32.341333-55.658667 57.045333-127.168 74.176-190.869333-57.472 15.466667-121.024 36.949333-173.717333 64.725333-1.365333 0.725333-2.730667 1.450667-4.096 2.176-9.557333 5.141333-12.8 7.445333-13.952 8.405333-24.490667 14.933333-41.024 41.642667-41.024 72.448C449.322667 536.469333 487.402667 574.549333 534.378667 574.549333z\" p-id=\"14571\"></path><path d=\"M512.021333 64C264.554667 64 64 264.554667 64 511.978667 64 759.445333 264.554667 960 512.021333 960 759.381333 960 960 759.445333 960 511.978667 960 264.512 759.381333 64 512.021333 64zM603.989333 603.989333c-90.986667 90.944-304.149333 120.213333-304.149333 120.213333s29.269333-213.205333 120.213333-304.149333 304.149333-120.213333 304.149333-120.213333S694.976 513.045333 603.989333 603.989333z\" p-id=\"14572\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\">发现</div>\r\n                    </div>\r\n                </Link>\r\n                <Link to=\"/wrp-word\" onClick={()=>setCurrentIndex(2)}>\r\n                    <div className=\"wrp-nav-item\" style={{color:colors[2]}}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill={colors[2]} version=\"1.1\" viewBox=\"0 0 200 200\"><path  d=\"M78.6,96.4h42.8c10.8,0,19.6-8.8,19.6-19.6V34.1c0-10.8-8.8-19.6-19.6-19.6H78.6C67.8,14.5,59,23.3,59,34.1v42.8\tC59,87.7,67.8,96.4,78.6,96.4z M84,44.8c0-8.9,7.2-16,16-16s16,7.2,16,16v32.1c0,3-2.4,5.3-5.3,5.3s-5.3-2.4-5.3-5.3V64.4\tc0-2-1.6-3.6-3.6-3.6h-3.6c-2,0-3.6,1.6-3.6,3.6v0v12.5c0,3-2.4,5.3-5.3,5.3S84,79.8,84,76.8V44.8z M98.2,50.1h3.6\tc2,0,3.6-1.6,3.6-3.6v-1.8c0-3-2.4-5.3-5.3-5.3s-5.3,2.4-5.3,5.3v1.8C94.7,48.5,96.3,50.1,98.2,50.1L98.2,50.1z M76.8,103.6H34.1\tc-10.8,0-19.6,8.8-19.6,19.6v42.8c0,10.8,8.8,19.6,19.6,19.6h42.8c10.8,0,19.6-8.8,19.6-19.6v-42.8\tC96.4,112.3,87.7,103.6,76.8,103.6L76.8,103.6z M68.9,146.5c4.8,7.4,2.7,17.3-4.7,22.2c-2.6,1.7-5.7,2.6-8.8,2.6H44.8\tc-3,0-5.3-2.4-5.3-5.3v-42.8c0-3,2.4-5.3,5.3-5.3h10.7c8.8,0,16,7.1,16,16c0,3.1-0.9,6.2-2.6,8.8C68.1,143.8,68.1,145.3,68.9,146.5\tL68.9,146.5z M55.5,149.9h-1.8c-2,0-3.6,1.6-3.6,3.6v3.6c0,2,1.6,3.6,3.6,3.6h1.8c3,0,5.3-2.4,5.3-5.3\tC60.8,152.3,58.4,149.9,55.5,149.9L55.5,149.9z M55.5,128.5h-1.8c-2,0-3.6,1.6-3.6,3.6v3.6c0,2,1.6,3.6,3.6,3.6h1.8\tc3,0,5.3-2.4,5.3-5.3C60.8,130.9,58.4,128.5,55.5,128.5L55.5,128.5z M165.9,103.6h-42.8c-10.8,0-19.6,8.8-19.6,19.6v42.8\tc0,10.8,8.8,19.6,19.6,19.6h42.8c10.8,0,19.6-8.8,19.6-19.6v-42.8C185.5,112.3,176.7,103.6,165.9,103.6L165.9,103.6z M151.7,160.6\tc3,0,5.3,2.4,5.3,5.3s-2.4,5.3-5.3,5.3c-14.8,0-26.7-12-26.7-26.7c0-14.8,12-26.7,26.7-26.7c3,0,5.3,2.4,5.3,5.3\tc0,3-2.4,5.3-5.3,5.3c-8.9,0-16,7.2-16,16S142.8,160.6,151.7,160.6z\"/></svg>\r\n                        <div className=\"wrp-nav-item-title\">单词</div>\r\n                    </div>\r\n                </Link>\r\n                <Link to=\"/about\" onClick={()=>setCurrentIndex(3)}>\r\n                    <div className=\"wrp-nav-item\" style={{color:colors[3]}}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill={colors[3]} version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><path  d=\"M100,10c-49.7,0-90,40.3-90,90c0,49.7,40.3,90,90,90c49.7,0,90-40.3,90-90C190,50.3,149.7,10,100,10z M97.2,156.3\tc-4.3,0-7.8-4.2-7.8-9.3l0-56.7c0-5.1,3.5-9.3,7.8-9.3c4.3,0,7.8,4.2,7.8,9.3l0,56.7C105,152.1,101.5,156.3,97.2,156.3z M97.2,64\tc-4.6,0-8.4-4.5-8.4-10l0-0.3c0-5.5,3.8-10,8.4-10c4.6,0,8.4,4.5,8.4,10l0,0.3C105.6,59.6,101.9,64,97.2,64z\"/></svg>\r\n                        <div className=\"wrp-nav-item-title\">关于</div>\r\n                    </div>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport {NavBar};","import React from 'react';\r\n\r\nimport './findPage.css';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport {ItemCard} from '../home.js';\r\n\r\n\r\nfunction itemCard(){\r\n\r\n    return (\r\n        <div className=\"wrp-card-wrapper wrp-cp\" onClick={()=>{}}>\r\n            <div className=\"wrp-image-wrapper wrp-card-image\">\r\n                {/*<img className=\"wrp-image\" src=\"https://lh6.googleusercontent.com/proxy/GICqS-kiP8lyGI9A7Qq-JJvzZl5HTfMjebIFUmD3k8rE4hMW2f7fBPpusTyl2KYNEF47lNVtuF5YFvfiXWTHqRghBA\"></img>*/}\r\n                <svg className=\"wrp-image \" height=\"32\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"32\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path></svg>\r\n            </div>\r\n            <div className=\"wrp-card-text-wrapper\">\r\n                <div className=\"wrp-ellipsis wrp-ct\">GitHub-Built for developers</div>\r\n                <div className=\"wrp-cs\">GitHub is a development platform inspired by the way you work. From open source to business, you can host and review code, manage projects, and build software alongside 40 million developers.</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction itemIcon(){\r\n\r\n    return (\r\n        <div className=\"wrp-nav-item wrp-item-icon\" onClick={()=>{}}>\r\n            <svg className=\"wrp-nav-item-icon \" height=\"32\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"32\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path></svg>\r\n            <div className=\"wrp-nav-item-title wrp-ellipsis\" >GitHub-Built for developers</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction FindPage(){\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className=\"wrp-card-container\">\r\n                <ItemCard data={{src:'',title:'a',des:'b'}} ></ItemCard>\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n            </div>\r\n            <div className=\"wrp-card-container\">\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\n// export {FindPage};\r\n// let withRouterFindPage = withRouter(FindPage);\r\n// export {FindPage};\r\nexport default withRouter(FindPage);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useLocation,\r\n    useRouteMatch,\r\n    useParams,\r\n    useHistory,\r\n    withRouter,\r\n\r\n} from 'react-router-dom';\r\nimport './webApp.css';\r\n\r\nimport WrpApp from './App';\r\n// import {AppWithRouter as App} from './App';\r\nimport Home from './home';\r\nimport Status from './status';\r\nimport './common.css';\r\n\r\nimport {NavBar} from './components/navBar';\r\nimport FindPage from './components/findPage';\r\n\r\n\r\nclass WebApp extends React.Component{\r\n    constructor(){\r\n        super();\r\n        this.state={\r\n            status:'inputting',\r\n        };\r\n        this.xmlDoc = undefined;\r\n        this.input = \"\";\r\n        this.inputIsURL = false;\r\n        this.urlPattern = /^https?:\\/\\/(.+\\.\\w+.*)|(localhost.*)/;\r\n        this.readHistory = [];\r\n        this.docId = 0;\r\n        /** history = {icon,title,des,input,isURL} */\r\n\r\n        let histStr = localStorage.getItem('read_history');\r\n        let history = JSON.parse(histStr);\r\n        if(Array.isArray(history)){\r\n            this.readHistory = history;\r\n        }\r\n    }\r\n\r\n    setStatus(status){\r\n\r\n        if(status != this.state.status){\r\n            console.log('set status', status, this.state.status)\r\n            this.setState({\r\n                status:status\r\n            })\r\n        }\r\n    }\r\n\r\n    loadXmlDoc(){\r\n        console.log('webApp.js: loadXmlDoc() ');\r\n        let input = this.input;\r\n        if (input == '') return;\r\n\r\n        console.log('webApp loadXmlDoc', input);\r\n\r\n        const parser = new DOMParser();\r\n        if(this.inputIsURL){\r\n            let encode = encodeURIComponent(input);\r\n            // let url2 = `https://1773134661611650.cn-hongkong.fc.aliyuncs.com/2016-08-15/proxy/Tr/tr/?url=${encode}`;\r\n            let url2 = `https://1773134661611650.ap-northeast-1.fc.aliyuncs.com/2016-08-15/proxy/Tr/tr/?url=${encode}`;\r\n            // let url = `http://47.94.145.177:8000/get?url=${encode}`;\r\n            let url = `https://47.94.145.177:8001/get?url=${encode}`;\r\n\r\n            \r\n            let inputObj = new URL(input);\r\n            let timeout = 10000;\r\n            switch(inputObj.host){\r\n                case \"www.wikipedia.org\":\r\n                case \"wikibooks.org\":\r\n                case \"m.wikipedia.org\":\r\n                case \"en.wikipedia.org\":\r\n                case \"en.m.wikipedia.org\":\r\n                case \"twitter.com\":\r\n                case \"t.co\":\r\n                case \"news.google.com\":\r\n                case \"developer.chrome.com\":\r\n                case \"www.bbc.com\":\r\n                case \"bbc.com\":\r\n                case \"blog.diigo.com\":\r\n                case \"diigo.com\":\r\n                case \"www.kali.org\":\r\n                    url = url2;\r\n                    timeout = 50000;\r\n                    break;\r\n                case \"localhost:3000\":\r\n                case \"localhost:8888\":\r\n                    url = input;\r\n                    break;\r\n\r\n            }\r\n            \r\n            // 局域网网址, 开发用\r\n            if(/https?:\\/\\/192\\.168\\.\\d+\\.\\d+.*/.test(input)) url = input;\r\n\r\n            let xhr = new XMLHttpRequest();\r\n\r\n            xhr.open(\"GET\", url, true);\r\n            xhr.timeout = timeout;\r\n\r\n            let self = this;\r\n\r\n            xhr.ontimeout = function(){\r\n                // console.log('timeout!')\r\n                xhr.abort();\r\n                self.setState({\r\n                    status:'timeout'\r\n                })\r\n            }\r\n\r\n            // 只能由user agent设置\r\n            // xhr.setRequestHeader(\"Origin\",inputObj.origin);\r\n            // xhr.setRequestHeader(\"Referer\", inputObj.href);\r\n\r\n            xhr.send(null);\r\n\r\n            const onload = function(e){\r\n                if (xhr.status === 200) {\r\n                    // console.log('responseText', xhr.getResponseHeader(\"Content-Type\"));\r\n                    let contentType = xhr.getResponseHeader('Content-Type');\r\n                    \r\n                    // 返回类型是否为html 或 text 类型\r\n                    if(contentType && !/[(text\\/html)(charset\\=utf\\-8)]/.test(contentType)){\r\n                        self.setState({\r\n                            status:\"typeError\"\r\n                        });\r\n                        return;\r\n                    }\r\n\r\n                    self.xmlDoc = parser.parseFromString(xhr.responseText, \"text/html\");\r\n\r\n                    // 解决相对路径问题\r\n                    if(self.xmlDoc.getElementsByTagName('base').length === 0){\r\n                        let base = self.xmlDoc.createElement('base');\r\n                        base.href = input; \r\n                        self.xmlDoc.head.insertBefore(base, self.xmlDoc.head.firstChild);\r\n                    }\r\n\r\n                    self.docId = self.docId + 1;\r\n                    self.setStatus('parsing');\r\n                }else{\r\n                    console.error('webApp.js: loadXmlDoc() 加载此网址：',input,\"时发生错误, 请求状态码为\",xhr.status);\r\n                    self.setStatus('failed');\r\n                }\r\n            };\r\n\r\n            // 异步加载\r\n            xhr.onload = onload;\r\n\r\n            // 终止\r\n            xhr.onabort = (e)=>{\r\n                // console.log('abort')\r\n                self.setStatus('failed');\r\n\r\n            }\r\n\r\n            // xhr.onreadystatechange = function(e){\r\n            //     console.log('status change',e);\r\n            // }\r\n\r\n            xhr.onerror = function(e){\r\n                // 提示\r\n                console.warn('webApp.js: loadXmlDoc() : request.send Error: please check Network!',e);\r\n\r\n                self.setState({\r\n                    status:'failed'\r\n                })\r\n                \r\n            };\r\n\r\n        }else{\r\n            // 非URL, 文本 或 富文本\r\n            this.xmlDoc = parser.parseFromString(input, \"text/html\");\r\n            this.docId = this.docId + 1;\r\n            this.setState({\r\n                status:'parsing'\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    setInput(input, type){\r\n        console.log(\"webApp.js: setInput() \", input, type);\r\n        if(input == this.input){\r\n            console.log('input = this.input 跳过加载')\r\n            this.setStatus('parsing');\r\n            //当前阅读的页面，跳过加载，直接渲染\r\n            return ;\r\n        };\r\n\r\n        this.input = input;\r\n        this.inputIsURL = type;\r\n\r\n        this.setStatus('loading');\r\n    }\r\n\r\n    checkURI(){\r\n        console.log('webApp.js: checkURI()');\r\n\r\n        let urlParams = (new URL(window.location.href)).searchParams;\r\n        let url = urlParams.get('url');\r\n        console.log('URI',url)\r\n        if(this.urlPattern.test(url)){\r\n            this.inputIsURL = true;\r\n            if(this.input == url) return;\r\n            this.setStatus('loading');\r\n            this.input = url;\r\n\r\n            // console.log('checkURI', this.state.status)\r\n        }\r\n    }\r\n\r\n\r\n    setReadHistory(value){\r\n        console.log('setReadHistory 2', value);\r\n        \r\n        // 查重\r\n        for(let i=this.readHistory.length - 1; i >=0; i--){\r\n            if(this.readHistory[i].input === value.input){\r\n                this.readHistory.splice(i,1);\r\n            }\r\n        }\r\n\r\n        this.readHistory.push(value);\r\n\r\n        while(this.readHistory.length > 10){\r\n            this.readHistory.shift();\r\n        }\r\n\r\n        console.log('setReadHistory 3', this.readHistory);\r\n\r\n        // 存储\r\n        let histStr = JSON.stringify(this.readHistory);\r\n        localStorage.setItem('read_history', histStr);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n\r\n    }\r\n\r\n    componentWillMount(){\r\n        console.log('conmponentWillMount');\r\n    }\r\n\r\n    componentDidMount(){\r\n        console.log('webApp.js: componentWillMount');\r\n        this.componentDidUpdate();\r\n        \r\n    }\r\n\r\n    componentDidUpdate(){\r\n        console.log('webApp.js: componentDidUpdate', window.location);\r\n        \r\n        // 对页面内js控制的转跳进行重定向\r\n        let location = window.location;\r\n        let dir = location.pathname.split(\"/\")[1]; // 没有的话返回\"\"\r\n        switch(dir){\r\n            case \"wrp-read\":\r\n            case \"wrp-home\":\r\n            case \"wrp-find\":\r\n            case \"wrp-word\":\r\n            case \"wrp-about\":\r\n            case \"wrp-test\":\r\n                break;\r\n            default:\r\n                console.log(\"pathname 为 其他路径\", dir);\r\n                // js转跳 或是 用户输入的路径\r\n                let newSearch = `?url=${encodeURIComponent(this.input + location.pathname + location.search)}`;\r\n                let origin;\r\n                if(this.readHistory[this.readHistory.length - 1]){\r\n                    origin = new URL(this.readHistory[this.readHistory.length - 1].input).origin;\r\n                    let href = `${location.origin}/wrp-read?url=${encodeURIComponent(origin + location.pathname + location.search)}`;\r\n                    console.log('转跳目标 ->', origin + location.pathname + location.search)\r\n                    window.location.href = href;\r\n\r\n                }else{\r\n                    origin = window.location.origin + \"/wrp-home\";\r\n                    console.log('转跳目标', origin);\r\n                    window.location.href = origin;\r\n                }\r\n                \r\n                // alert('转跳！');\r\n                // window.location.pathname = '/wrp-read';\r\n                // window.location.search = `?url=${encodeURIComponent(\"https://qq.com\")}`\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    render(){\r\n        console.log('webApp.js: render()');\r\n\r\n        if(this.state.status == 'inputting') this.checkURI();\r\n        if(this.state.status == 'loading') this.loadXmlDoc();\r\n   \r\n        let Page = (\r\n                    <>\r\n                        <Router>\r\n                                <Switch>\r\n                                    <Route path=\"/\" >\r\n                                        <Switch>\r\n                                            <Route exact path=\"/wrp-home\">\r\n                                                <Home\r\n                                                    setInput={(input, type)=>this.setInput(input, type)}\r\n                                                    readHistory={this.readHistory}\r\n                                                ></Home>\r\n                                            </Route>\r\n                                            <Route path=\"/wrp-find\" >\r\n                                                <FindPage></FindPage>\r\n                                            </Route>\r\n                                            <Route\r\n                                                path=\"/wrp-test/:id\"\r\n                                            >\r\n                                                <div>\r\n                                                    <input type=\"text\" className=\"form-control input-sm header-search-input  js-site-search-focus \" data-hotkey=\"s,/\" name=\"q\" placeholder=\"Search GitHub\" data-unscoped-placeholder=\"Search GitHub\" data-scoped-placeholder=\"Search\" autocapitalize=\"off\" aria-label=\"Search GitHub\"></input>\r\n\r\n                                                    <input style={{\"border\":\"1px solid #000\"}} onInput={()=>{console.log('test entering')}}></input>\r\n\r\n                                                    <input style={{\"border\":\"1px solid #000\"}} ></input>\r\n                                                </div>\r\n                                            </Route>\r\n                                            <Route path=\"/:name\">\r\n                                                <WrpApp\r\n                                                    doc={this.xmlDoc}\r\n                                                    docId={this.docId}\r\n                                                    url={this.inputIsURL ? this.input : ''}\r\n                                                    setInput={(input, type)=>this.setInput(input, type)}\r\n                                                    setStatus={(status)=>this.setStatus(status)}\r\n                                                    setReadHistory={(value)=>this.setReadHistory(value)}\r\n                                                    status={this.state.status}\r\n                                                ></WrpApp>\r\n                                                {\r\n                                                    // this.showStatus()\r\n                                                }\r\n                                                <Status\r\n                                                    status={this.state.status}\r\n                                                    url={this.input}\r\n                                                    setStatus={(status)=>this.setStatus(status)}\r\n                                                />\r\n                                            </Route>\r\n                                        </Switch>\r\n                                        <NavBar path={this.props.path}/>\r\n                                    </Route>\r\n                                </Switch>\r\n                        </Router>                       \r\n                    </>\r\n                );\r\n\r\n        return Page;\r\n    }\r\n}\r\n\r\nexport default WebApp;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport ReactHtmlParser from 'react-html-parser';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport WebApp from './webApp';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n// //  'test/google-wiki.html'       'example.html'     'test/weinan-wiki.html' switch_mdn-Google.html\r\n// let text = getText('example.html');\r\n// var parser = new DOMParser();\r\n// var xmlDoc = parser.parseFromString(text,\"text/html\");\r\n// // let node = xmlDoc;\r\n\r\n// var xmlDoc_d = parser.parseFromString('<body/>',\"text/html\");\r\n\r\n\r\n\r\n// // node = Object.assign(xmlDoc_d, node); \r\n// // node = document.body;\r\n\r\n// // console.log('index-1 node', node);\r\n\r\n// // console.log('document.body', node)\r\n\r\n// // let container = document.createElement('div');\r\n// // let renderTarget = document.body.insertBefore(container, document.body.firstChild);\r\n\r\n// // renderTarget = document.body;\r\n\r\nlet renderTarget = document.getElementById('wrp-root');\r\n\r\n// ReactDOM.render(<App doc={node}/>, document.getElementById('root'));\r\n\r\nReactDOM.render(<WebApp/>, renderTarget);\r\n// ReactDOM.render(<App doc={xmlDoc}/>, renderTarget);\r\n\r\n// ReactDOM.render(<App doc={node}/>, document.body);\r\n\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAACXBIWXMAAAGYAAABmAEFfeMbAAAUYElEQVR4nO1da2wc13X+7uwuSYnkrsRI4kPUwy5iSZRE27EdSXacqnUsOUWL2InVFO2PxrHb5kfRNG6LAi3QpEB/pE1hI82/1EqLADWS2FScAgH08I+kthTZkgFbD+qVWLL4EFdPcvkQyd2dW9x57Nx57c5zd9a8n72anbOXM3dmzpzvnHPPnSGZnxYoBAQCQhInTiAM0hD2RyAEhAUSCIU0EedPIAQEhQmEQhoQNkggOIQPJBAKgsIEQkFYIIFQEFGYQCgIChMIBUFhAqEgFEggFASFCYSCsEACoSCiMIFQEEMZAqEgfCCBUBA+kEAoCAUSCAVBYQKhICyQQCiIMF4gFASFCYSCoDCBUBAKJBAKgsIEQkEMZQiEgojCBEJBUJhAKAgnWiAUhAIJhIKgMIFQEBZIIBREFCYQCoLCBEJBUJhAKAgFEgiFNGh9vKBtOSDbQpHLEGxbQUFAkMsA21dq+yeksli/nGB9BwGpyAhGZimuzmlNYcj/Ly8DlCpM/Jb2/fQkxdRiMhVjsEtSjntDBztG9f5d0QIMrgx2LyvHr+H0bRmTi6pP8hYnjxOk/YdzkXpBuRaCwZUE23NlfG6NjEdXq3JeGbwuvbalTIEcPm9fZ4pEcfoOxdEbwNVZYGQu/pOq3xiPd0uKomzsTGGwiyCbqX/I8ramSK9cLCF/l+LqLMVHM9FdctIRsQKxk/YP92ewQlrEhrZiIMVBRArk9GEKdewGcOwmUT5np8Jf1K05isdWA59ZQ7BtJcGGDknpmyQZy0bjSqGEA+99iLGZMr4/uTGy3sQShb01IWNhsYy/2Rz9tsMimwH29lLs6ZEVhSowhbpJcGgihUMTEgrF2gqVzVDs7WHWleLzvRS5Vl1RiM7EicOr7+fx8+FbeLArBTp9G6SjK5IuppN5uPVDZwaKMj3ZXcZ3BimGpwh+cDmNw9fTJmXKpin2dJewp6esKCBvYZoCVK5YdXpnHGR5DpBSoXu+5BXIii1ZGf82uIB/pfMYGkvj5Og0HlrbqSgP8+9UhWnG4JULVuQS6FQeZGVf6K1GT2HUsmxifLGviJW/OYndfY9pitPseXtSWdLCTaAtC9LWEWqLIg9UA5lmoShP0Cyo9qGT10JvUShQDRTpx2SshxDzklmj4gJo4XqozaZJxOdH2R4VldZJBNH/o5wyTd8CWbYCSLcE6rGwQEsIpohR/04p5Kl84JMgFGjJgKMuzg9SMD8DOj8d6EREPxamb0+UiSQQur0g2vUxrj2dvA6yut13bkhYoKUEbnjIlBdin3IRdOaW75MhFGjJgI/CLBSmh/Wzd4DivK8TIrGoKcoPYCwFauO194GzE/GfKKJHYdSy1GVUXdLJvC99EBaoQTh0Hhj4NvDiz4CXflGnPvAUZqIyTlZaAJ2b9LzJphwLe+HHBAXN0r64G9i5odE98o9sGzC9oP7Z4QvA6CTQvyLOPVp8HjiE9Hp5zAzLDWUBUtu+SNASf5F+EF8UNjyhnvDjH6kfRgGxIqbj2LXRrPj1sULEYclFZFSLomWqUJkXnWg6Ctv/rjntcPA8Ktao2fCHD6gdZoq0tx61U9WiMIuMLs4Bi3drbrLpKOzQebMCMRo4dAF4drBhXQqMfQ8AAz3A1p467MzN56nILO0IgTx9A1JXf1Uqa6qxsNc+IBW/gcf+4wTPDiYj9PuPt9P43tH478uf/KlKg57B6EZL8hIblcFOb+x0lsvAXAFkubtz1lQUxnwfHWtzxvfhvOobCdQAIYby1LRImkPNIjK55LpdyWgcxyc6sCjl8AVjmy/upujnlIhZJ4EqMCUQJe1aa0u2XkXGaqjd9KNpKhIPXzQUpLMV2He/qlQv/1KVMQX6pz3R7jMI/uozJfz1Z+XQszJYVKYf255NwP4/CtszztJQi8Xhx8V4mR7WFxeUAVfSaq9ebBoK2/+O0VU9YtGjGGjO9OsJtkJM2V98A/jVFW/t+fTEU1FFaF4SifrS4mDTuSmlMN+KplCg4TzB2JSx/vwO1byxxBu7O3UcupBMBfrWQWDXd5mV9JbvYcozqh0vs7aRhvguYbtjxSL/O5UdM9RS8r0fZn2MLTLnmQ97+bvzyEWC0QgmCkYNXgFY8rOaFWI5rW8eNNZf2KlmrcNC9W6IMSamfyfckvC/8zJNsjAHUlowXefoM9GIwf/hLItufXSwXAq7S3UkkcasWWdGZW5gFkpPVbDjYgoUDZxCeIcsNLXILO3lmTvNlYl+/ZRkyv3s3WTXzn0PmNsnES8/bXSK0ZMTlbFR+f3vGOtRWZ8KrONgpnWLzI3qGJXNFyqbTLwC8dZnzybqOOC4735DqZivdPyj5Fkh1u9v/LaxziIsvoyDUdcLPzLWB7rVgeJIUcVJ9uQHaTLKhjjksrKW6MFU5s8cucgrkHM75hNt6TbWhxJqhZhF4XNXPJV94w3DcWZ46WlEDKKNEPDUxCkKL7NSmdW7ZYOtSlSWcAvEWx819+OulbxvNHRaSuQAK6MjXjFYBp1R2SvHzVn2b+6NaXzMkZqq0FUVi0RZCWxxPtkK9PopM31Vg9U3OnIxmYfGHOrndxjrjMr++ZCxzqxsdI6zGTYHGv7zQebZHNNsMDVaf4FQ3VSGA8v9nMsbW7l4g+DLP3TbqnrwbFLBjVlV8l8nUvji9nKkxxYVvvWUGsoPW6ZjMb/n5cipSwdfzsopgVMWGlV+42REGcpIKKx+zGmf07jPXVcVcPOaZBZo//0TwFdeNVxFlpD77jMRR10muFESzLJqv3EyPaOdWAqLIhwfOh3++TdxgEVffzlkjjNkCnz9pzEXx1WGMnyE7RYZMQ2HJPTxLsx/4XM/33tGxuoO2B7mxD/iTl+yQdUhzXdiCvSPTxSDdyQGsGEKVkivoy0NzGvVEozSWDQWfuDUBZUBUmqmKWKfaOgkI7pMF9GEViTy1ufJ+yj+YKuqIIaVJaZ1pj/68xDX5iiGTqmWhynhgdMpPLPNvZ6lnrAqD4ssX/sKK4hTx8mg1Tyx8D7yMN6tnNVo4Cozz6k3f0kchTET/uYlo1u1oi8r+nMUT95njBofuZQMGmNK4aQ8LFxnysLKU3QwZXr+R3HQmfn5QLrMOZQnNrpSdcZMf4mbWMj7LewkPzvo/3nHzGrpYMo41sABVqYE+/7bsDDQoi1deXRYlYhZIvZ3USmRcW34iYQuEw31kJ9yKURu8iE/ITFxFoiPvvxaHx1M6fgB1gNnGsPULBXx1PclZQReh5Py6LAqEfOJmBJFMnM1QLKQmOjK2UolSoFY2M3Cbx1f/XTwp61/adDIAR1oQDT2g3cl/N5/SqY6JqYch75WPVR3UyI2kzU0nArKHCMtXVQ74ZiosTCevpgzPNAdnAu/tN1QvrECwbsj9VGiwgLBH/9PBv/ypnl/L33Bu2PM2rH2Olgw8MKP1cK0wKB8FOZexqGoRkUGbnwMhuJwskRZIF6Bnnsk3LsemPJt4ZKIB87UR4Gm51Xq0sEK4A7+hbnkxAtY+1e+bK51+sn7IXwiq/Wx5IOqWp0q9BfDrAxLJzzi5CjBQLeMHetl7NxghO5h8He7S8r22Ic50nMenkIfFsxyfv1xlT6ZM3/wz+XAA6OskvHw11S/iYHlh8JlqpkScQ+ZMiUGifMsDdNsDbusIRMLnd558XA/xat/UjLJw46offZeGY/fU7a8MyPUJj3huUfKigV89B5iS376BasjYn4T84F8TSR0ANFoyPSQTb3EQ1+HeUaG6Ql2DjLxpPqYwKxo+CFlA+EL6+0RF4GDcnhMLuqyhigQswRN846JjxEINzPVPkPVGml5kJEGTyzUFcltKRDDteGnN+vRlUe6cir3EBS2pODBwtSiMEt7oUBLBETzgZxnpqK2zKV99FEYwo2FCcQHfYzLXFhvib7cIjKXcg9hgZYSIrI6vEwo0JKBZnt8lbXCbpEsMvHCuSUHbmzLqYjeY3UiR2FRh8si/E4miFE/aHrmYUCnWlDY0gSx1kT7zDxbZfFQmKCvBIKjLstYmFe6sikRo7C4CEwQWbKgEBjRc0F814IlEHVnXFDYEoONwuA/IuOrJUQUtmSgVh2qc7usycLq4102xeFkdbVAx6/MKp2YuitjeGLe1OFfXZ7j+k20/7mDIZUfsb6rBetXtlT+dntvG7JtklLrs2vjsnoeUiCczRcxNa9WXJ6eYN+NAqqRyTKuTmr13C53/7buNHJt5mLSxzZkKt8fXZ+BI7zmeRwskmONFolxbvzQpTSOX0uhMD2D05euAuVF9w77DCWPaspGqmzjUUWRCHZtbEN/Lo3+XAo71nP1oTGDKcnYNMWZfBFn8yVFYc4wZVmg5v76OG79eI9e5Wfbar+/bW+/bkUK63MS1uVSGJmSud9dKKzWpEKH6xQ9hUHt3+idIj66PAp6V3+yZ+1xl44M8MkuydyO+24ugAIu3QZmFp0jiGOXVQt37IrZ0g10ZzDQ3YKBNWnsWNeCzavD10qPFWQcHyni+EgJw9dLOHudfypI7RsmmwE2r5Y0kbsy6b+NFoCxafNvTudzZFLGyCT7oazIdvXr42AuN2wNunLaV+RRGMP0zXGUJ9jrgsrKbjpaCO7tIujtIOhuB3o6JfS0q207WwlmFo3OfTBBbScMLif2qw9qJx0EnS3A9KLa7tJtqijWxCwwPgP8+rb6G2t5Ll/CuetlDGnbyLZK2LEug899sgWfXptGb2ftMzK9QPHmh0WcGCvjnZESRgv6rD1d0Y1/H14rIdsCbP4EQbaNYNMq9SJmW9kMDuO4Towb27cPN5hlz91P1GJ7QpBrAQparfeYplhsu8O31HWlb9y5IxUvobbVd6xYrAeFbc3N4m93UvR0pNDRAswWCT7IU0VRPrhOcGyU4td39Nb6AfLJLe63KjJyijq2e7BXlT3UI6G3A/izT0kVBWPKdJF9bqnLwgLFkd8UlQ/74y2rU3h6IIMn7k0pCq9jepHiZxeKeONcEedv8mZbbdPXKWHTKmDzKgmP9BGs7SAYmwUu3qQoLBKcuKYmyL59zAuFGefEuHH0Y6Su1mxgFUFnG8G6ToKda4GtD0ro74Sy/1HNYjGlMs+yMG/DkHhzK8iafy9FSmLrssDO3iLOnj2DU3nnzvmXWdZd7lIv2/1UL8F9qwg2dRE83CdhfIbivXHgvQngvXHzxXnit9L4/Z5r+OXtPrxxvmyyiJtWSXi4D3ikT0JfJzA+DVy4TXBijCrKWVh03r+jzLfv4UOmfd+6WkJ/FphaAI6P2c+nJ6vj1M+oFUiHXLgGeTrvuSPVFQfOJzbwdg0Zo9CHelVl2r2RKBbjZB74xWWK8RmjXbaV4Hc2EvzuParCnL/FFI5Rj7ldFCUT1fygMPmbqKwOL4tNgRhK+WHlfeTBToTtS2Cr4+ek93UAu+8h+MJ9qn91dJTg3hVQlOZ/LwEnx4ELpterB+xTJFYnLsXx8bdrvhOfAtGFGZRvfeitc6bfzTK/ZjVInsMpVd/bCTy7RcLQeYrxQnz70vfnpV3V4/e5DS9OsrtMW+2OUYEYyneugM5XYk57J6ooTuQH7fNujm9fzjJvliCufflTHB2xz41P5dYBUsrZhFs7Rao/goQ4yJzaOcpMv7mcvLj2ZWtPbPsiHtoFOy6zzH1fXo7VjviHMqQUpI41hkMNOHfIiyWIkUICW51GUUgDrQ6PeDLRFkjLVyk0Rovaa6RNaRTCySx3i3WQz6UmparMx+wDxzniTjL+ZFfSOv5mOnjaFxwUAjEel6OsOur2eBcp22sX1jC1lfWA5rqqLAiFVL5b9uUkq3JcnvcV8liNB9YF2Z431G00nqTbIC3vgjx3279Z922uI6aQINQZlELquS+fdOWEulCYDmn5aiW0Zy/qsB2EkgR2MNNWaoBHWRCzHnT/UVJjvfYVgK6ckDbdhXFDSiPV0YNyQc+lu9AWHC5mDLLA03wDyKrmeSKwsFHkdIKg7iWtpLUTpKUTdHGmhslFKBNeTRb1cIjnfVnbxUZXTu2iVRwddaUwHan2NSgX74JS2X7nBKErXuZGQ/yJrvZIk5AUYlOciCbwOcl8n7uQdOWExhTVpzIgy1YCzKFGRHQRyV0aRlaNGqPeV/2c5Fpo2KwMafknUF6c9Vnq6iKLzTdIHjWGuxGiR0MoTAeLyuSCqRQvYLLQQXG8Pm3Li8zDRDti6xPMF5EaLWtuNwq6su03HsRS0uoVJLMMaMuBLhivkY7SSkRWlFXF6kVeKZBgunJCwycWsuRimUVk5vENbVHtxFY/iZGURwRVnIhkSaMrJzSUwlRIkNrXQJ7J209E2OjH099WpyY7XTpc2AD9rCUz7SMhdOWERExtJpnlIOlloKX5UHdz3EVZjaErP9urPxLzrgypfZXzRVFkpKqMVHsXqBeZqb3T/i0X1m0bIWT1GPiMA2lE/NrvwCAZSK0rIc9PRUdXVoUIkNSrGv3EQVfwEy1GegUCoaFRmBWERWTFOUAueaYh/6P3daRGJ1lk0WIykLg3FkrLuhwpxCqzmXwSsCS0ioy4vag2jIzvm005k01XTkhAFGYGSbUqTrVSvegSEdnu2IjGlmxWJwa68ka/yaQrJyTyAVNS2wrI5UVlsFVFGFPvj8IipavI9pFcJPMJZURSSz64DHUy/RB/so+T4uhIHIXpIJl2kOI8IGvPwgmaGHSS1aIrp3ax0ZWbrDmQqCjMCqk1C/nurdhKMSKZSryE6MoJiX7IJkllILV0gLKyj7j9EEFXgZBYCtNB0u2gxQXlYVWB6MoiI27tGhrBNS8SlweygeViWrPudNLInI7rPohLf50sVnMjhndlRA+SagHSbaBK9WKS6crP3348kHgK06FQWbkE5Vm+YaOfOOmq5t9+vNA8T6qXUlqGWnuetHCSE4FEh/FWsOnRLEMN2fogbvsFi6uYfinTlROahsJ0SOl2yIvaA6timd5rpTqYlWcJ05UNAP4fGp8P3QyvYxMAAAAASUVORK5CYII=\""],"sourceRoot":""}