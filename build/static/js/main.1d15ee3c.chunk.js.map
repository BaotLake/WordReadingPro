{"version":3,"sources":["reducers/app.js","reducers/explanation.js","reducers/a.js","reducers/translate.js","reducers/index.js","components/word.js","actions/a.js","components/a.js","utils/core.js","actions/app.js","actions/explanation.js","components/switch.js","actions/translate.js","components/readPanel.js","components/Explanation.js","containers/ManageExplanation.js","containers/TranslatePanel.js","Head.js","App.js","Home.js","Status.js","components/navBar.js","components/findPage.js","webApp.js","serviceWorker.js","index.js","components/res/logo.png","components/res/explainBoxArrow.svg","components/res/audio.svg","components/res/star.svg","components/res/more.svg","components/res/open.svg","components/res/arrowShadow.png"],"names":["app","state","action","type","status","xmlDoc","url","console","log","history","location","key","elements","heads","explanation","count","word","coordinate","show","data","audio","zoom","Number","isNaN","more","Array","isArray","concat","moreObj","map","w","Object","keys","setting","isUnfold","unfoldMore","a","translate","value","original","translation","combineReducers","props","style","touchMoving","movingRecord","sumX","sumY","lastX","lastY","e","this","touches","pageX","pageY","self","setTimeout","Math","abs","warn","clientX","clientY","setState","toString","id","className","content","React","Component","setShow","setSrc","connect","dispatch","isShow","aActions","onClick","preventDefault","_","children","config","extractScope","front","behind","fn","bn","sId","isInline","target","nodeName","window","getComputedStyle","getPropertyValue","search","extractPart","offset","frontPattern","behindPattern","frontTarget","previousSibling","frontFind","behindFind","findSubPart","text","direction","pattern","subPart","match","testParent","result","texts","break","textContent","slice","unshift","classList","copyWord","lastChild","copy","parentNode","childrenList","deepCopy","node","returnChilren","firstChild","nextSibling","toLowerCase","ignoreTag","includes","attToProps","noChildren","element","createElement","handleClick","clickWord","driectTarget","push","extractBothEnds","frontCross","extractFront","extractBehind","wordSplit","wordpattern","List","splitList","split","test","getWord","getCross","cross","other","otherWord","c","crossChildren","otherChildren","htmlTraversal","alterNode","length","extractHead","head","list","i","childNodes","href","src","findIndex","rel","innerText","extractAbstract","abstract","links","getElementsByTagName","link","indexOf","icon","title","docTitle","docH1","body","pTags","description","trim","spanTags","des","styleConvert","styleObj","replace","m","g","toUpperCase","attributes","att","attName","name","attValue","haveCrossWord","nextNode","deep","child","frontHaveWordEnd","behindHaveWordEnd","onlyOneChild","s","sentenceSplit","frontOther","haveCross","haveCross2","behindCross","middle","newFrontCross","behindOther","setStatus","setXmlDoc","setUrl","setLocation","undefined","path","setHistory","item","historyList","JSON","parse","localStorage","getItem","filter","v","remove","shift","removeItem","historyStr","stringify","setItem","loadXmlDoc","input","encode","encodeURIComponent","url2","inputObj","URL","timeout","host","Promise","resolve","reject","axios","method","res","docParser","setElements","setHeads","doc","baseUrl","t1","Date","now","dom","DOMParser","parseFromString","base","origin","insertBefore","htmlElements","t2","assign","setData","loadWordData","get","answer","join","addMore","setExplState","Error","setMore","setSetting","setMoreFold","tapWord","event","getSelection","anchorNode","wholeText","anchorOffset","clickedChar","part","position","x","y","setWord","Switch","hasInit","switchStyle","boxSizing","width","height","backgroundColor","borderRadius","display","alignItems","padding","color","transition","verticalAlign","marginLeft","dotStyle","border","onStyle","justifyContent","offStyle","switchChange","initStatus","init","ReadPanel","menuPosition","top","left","opacity","pointerEvents","touchStartDate","rpMenu","h","touchTarget","stopPropagation","parentElement","hiddenSomeone","setShowTranslate","slipTranslate","touchTime","touchMove","changedTouches","targetTouches","view","vw","screen","availWidth","vh","availHeight","add","handleCloseRpMenu","hiddenList","document","getElementsByClassName","rm","getElementById","offsetWidth","offsetHeight","onTouchStart","handleTouchStart","onTouchEnd","handleTouchEnd","onTouchMove","handleTouchMove","fill","viewBox","d","p-id","handleRpHidden","handleRpRemove","handleRpShow","events","explActions","translateActions","sentence","setOriginal","formData","URLSearchParams","append","Data","Translated","Explanation","size","maxNumber","setZoom","Loading","nothing","t","ew","eh","aw","ah","topDistance","wordDistance","edgeDistance","arrowOverlapping","remRatioPx","arrowPosition","innerWidth","ratio","innerHeight","calcPosition","autoPlay","auto","audioUS","audioUK","playingWhich","playWhich","fontSize","play","version","menuBgStyle","moreList","unfold","renderMore","touchRecord","moving","slipY","slipNum","TranslatePanel","movingStyle","dragY","tpHeight","bind","setDrag","showStatus","xhr","XMLHttpRequest","open","withCredentials","setRequestHeader","onload","json","responseText","translateText","send","tp","addEventListener","dragStyle","transform","panelStyle","hidden","bottom","half","full","handleTouchSlip","handleDrag","resetDrag","ownProps","App","showLinkDialog","translateCount","docId","hash","splitWord","splitSentence","runScript","jQuery","noConflict","checkURI","cssText","indexList","nodeChar","lastNodeChar","re","styles","setExplShow","setAShow","docUrl","pathname","handleClickWord","ManageExplanation","xmlns","to","externalLink","urlParams","searchParams","inputIsURL","listen","actions","setASrc","withRouter","ItemCard","data-url","data-key","Home","typing","urlPattern","jumpChange","currentTarget","clipboardData","getData","pasteText","pasteHtml","readFromUrl","String","reduce","b","charCodeAt","readFromText","setKey","dataset","goRead","focus","readHistory","onClickCard","createHistory","logo","setTyping","autoComplete","contentEditable","onChange","handleChange","onKeyUp","handleKeyUp","onPaste","handlePaste","onFocus","placeholder","setInput","currentUrl","isUrl","error","wrapper","errorIcon","statusContent","NavBar","useState","currentIndex","setCurrentIndex","pathName","current","fixCurrentIndex","colors","itemCard","aria-hidden","fill-rule","itemIcon","WebApp","store","isUri","componentDidUpdate","dir","exact","go","testAction","data-hotkey","data-unscoped-placeholder","data-scoped-placeholder","autocapitalize","aria-label","onInput","Boolean","hostname","traget","createStore","rootReducer","applyMiddleware","thunk","render","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.1d15ee3c.chunk.js","sourcesContent":["const app = (state = {}, action) => {\r\n    switch (action.type) {\r\n        case \"app/SETSTATUS\":\r\n            return {...state, status: action.status}\r\n        case \"app/SETXMLDOC\":\r\n            // console.log(`reducers app/SETXMLDOC: xmlDoc: ${action.xmlDoc}`)\r\n            return {...state, xmlDoc: action.xmlDoc}\r\n        case \"app/SETURI\":\r\n            return {...state, url: action.url}\r\n        case \"app/SETHISTORY\":\r\n            console.log(`reducers app/SETHISTORY: ${action.history}`)\r\n            return {...state, history: action.history}\r\n        case \"app/SETLOCATION\":\r\n            return {...state, location: action.location}\r\n        case \"app/SETKEY\":\r\n            return {...state, key: action.key}\r\n        case \"app/SETELEMENTS\":\r\n            console.log('reducers set elements', action)\r\n            return {...state, elements: action.elements}\r\n        case \"app/SETHEADS\":\r\n            return {...state, heads: action.heads}\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default app","const explanation = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case \"SHOW_EXPANATION\":\r\n      console.log(`reducers count: ${state.count}`);\r\n      let count = state.count + 1 || 1;\r\n      return { ...state, word: \"WORD\", count: count };\r\n    case \"expl/SETWORD\":\r\n      if (action.coordinate == null) return { ...state, word: action.word };\r\n      return { ...state, word: action.word, coordinate: action.coordinate };\r\n    case \"expl/SETSHOW\":\r\n      console.log(\"reducer set show\");\r\n      return { ...state, show: action.show };\r\n    case \"expl/SETDATA\":\r\n      return { ...state, data: action.data };\r\n    case \"expl/SETEXPLSTATE\":\r\n      console.log(\"set expl Status\", action.status);\r\n      return { ...state, status: action.status };\r\n    case \"expl/SETPLAYAUDIO\":\r\n      return { ...state, audio: action.audio };\r\n    case \"expl/SETZOOM\":\r\n      let zoom = (state.zoom == null ? 0 : state.zoom) + action.zoom;\r\n      if (typeof zoom !== \"number\" || Number.isNaN(zoom)) zoom = 0;\r\n      return { ...state, zoom: zoom };\r\n    case \"expl/ADDMORE\":\r\n      let more = Array.isArray(state.more)\r\n        ? state.more.concat(action.more)\r\n        : [action.more];\r\n      let moreObj = {}\r\n      more.map(w => moreObj[w]='')\r\n      return { ...state, more: Object.keys(moreObj) };\r\n    case \"exp/SETMORE\":\r\n      return { ...state, more: action.more };\r\n    case \"expl/SETSETTING\":\r\n      let setting = { ...state.setting, ...action.setting };\r\n      return { ...state, setting: setting };\r\n    case \"expl/SETMOREFOLD\":\r\n      if (action.isUnfold == null) {\r\n        return { ...state, unfoldMore: !state.unfoldMore };\r\n      }\r\n      return { ...state, unfoldMore: action.unfoldMore };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default explanation;\r\n","const a = (state={}, action) => {\n    switch(action.type) {\n        case \"a/SETSHOW\":\n            console.log('a setshow', action.status)\n            if( action.status === null  ) return { ...state, show:!state.status }\n            return { ...state, show: action.status }\n        case \"a/SETSRC\":\n            return { ...state, url:action.url }\n        default:\n            return { ...state }\n    }\n}\n\nexport default a;","const translate = (state = {}, action) => {\n    switch(action.type){\n        case \"translate/SETSHOW\":\n            return { ...state, show: action.value }\n        case \"translate/SETORIGINAL\":\n            return { ...state, original: action.original }\n        case \"translate/SETTRANSLATION\":\n            return { ...state, translation: action.translation}\n        case \"translate/SETSTATUS\":\n            return { ...state, status: action.status }\n        // case \"\":\n        //     return { ...state, }\n        default:\n            return state\n    }\n}\n\nexport default translate","import { combineReducers } from 'redux'\r\n\r\nimport app from './app'\r\nimport explanation  from './explanation'\r\nimport a from './a'\r\nimport translate from './translate'\r\nimport other  from './other'\r\n\r\nconsole.log(`reducers.js`)\r\n\r\nexport default combineReducers({\r\n    app,\r\n    explanation,\r\n    a,\r\n    translate\r\n    // other\r\n})","import React from 'react';\r\nimport { getKeys } from 'eslint-visitor-keys';\r\n\r\nvar key = 0;\r\nfunction getMyKeys(){\r\n    key += 1\r\n    return key.toString()\r\n}\r\n\r\nclass word extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            style:{}\r\n        }\r\n        this.touchMoving = false;\r\n        this.movingRecord = {\r\n            sumX:0,\r\n            sumY:0,\r\n            lastX:0,\r\n            lastY:0\r\n        }\r\n    }\r\n\r\n\r\n    handleTouchMove(e){\r\n        // console.log('touchMove',e,e.touches,e.targetTouches)\r\n        // console.log(e.touches[0].pageX, e.touches[0].pageY, this.touchMoving)\r\n        if(!this.touchMoving){\r\n            // 触摸开始\r\n            this.touchMoving = true;\r\n            let self = this;\r\n            setTimeout(()=>{\r\n                self.touchMoving = false;\r\n                // console.log('time up', this.touchMoving)\r\n            }, 100, this);\r\n            // 记录初始化\r\n            this.movingRecord = {\r\n                sumX:0,\r\n                sumY:0,\r\n                lastX:e.touches[0].pageX,\r\n                lastY:e.touches[0].pageY\r\n            }\r\n        }else{\r\n            // 滑动中 记录\r\n            this.movingRecord.sumX = this.movingRecord.sumX + e.touches[0].pageX - this.movingRecord.lastX;\r\n            this.movingRecord.sumY = this.movingRecord.sumY + e.touches[0].pageY - this.movingRecord.lastY;\r\n            this.movingRecord.lastX = e.touches[0].pageX;\r\n            this.movingRecord.lastY = e.touches[0].pageY;\r\n        }\r\n\r\n        // 滑动 判断\r\n        if(Math.abs(this.movingRecord.sumX) > 50 && Math.abs(this.movingRecord.sumY) < 15){\r\n            // 成立\r\n            // console.log(\"translate\")\r\n            try{\r\n                this.props.translate(e)\r\n            }catch(e){\r\n                console.warn(\"word: props.translate is not function!\", e);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    handleMouseMove(e){\r\n        // console.log('handleMouseMove', this.touchMoving);\r\n        if(this.touchMoving){\r\n            // console.log('handleMouseMove', e)\r\n        }\r\n    }\r\n\r\n    handleMouseDown(e){\r\n        this.touchMoving = true;\r\n    }\r\n\r\n    handleMouseUp(e){\r\n        this.touchMoving = false;\r\n    }\r\n\r\n    handleDoubleClick(e){\r\n        console.log('double click')\r\n        try{\r\n            this.props.translate(e)\r\n        }catch(e){\r\n            console.warn(\"word: props.translate is not function!\", e);\r\n        }\r\n    }\r\n\r\n    handleTest(w, e){\r\n        console.log(\"click e->\", e, e.clientX, e.clientY)\r\n        this.setState({\r\n            style:{\r\n                \"backgroundColor\":\"#fff\",\r\n                \"borderRadius\":\"5px\"\r\n            }\r\n        })\r\n    }\r\n\r\n    render(){\r\n        let key = getMyKeys()\r\n        return (\r\n            <span\r\n                key={key}\r\n                id={key}\r\n                className=\"@w\"\r\n                // onTouchMove={(e)=>this.handleTouchMove(e)}\r\n                // onMouseDown={(e)=>this.handleMouseDown(e)}\r\n                // onMouseMove={(e)=>this.handleMouseMove(e)}\r\n                // onMouseUp={(e)=>this.handleMouseUp(e)}\r\n                // style={this.state.style}\r\n            >{this.props.content}</span>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default word;","\nexport const setShow = status => ({\n    type: 'a/SETSHOW',\n    status\n})\n\nexport const setSrc = url => ({\n    type: 'a/SETSRC',\n    url\n})","import React from 'react';\r\nimport '../App.css';\r\n\r\nimport { connect } from 'react-redux'\r\nimport * as aActions from '../actions/a'\r\nimport * as _ from 'lodash'\r\n\r\n\r\nfunction A(props){\r\n\r\n    const handleClick = (e)=>{\r\n        // console.log('A handleClick', e.currentTarget,e.currentTarget.attributes[\"data-src\"]);\r\n        // // 阻止默认事件\r\n        e.preventDefault();\r\n        let url = _.get(e, 'currentTarget.attributes.data-src.value');\r\n        if ( !url ) return;\r\n        props.setSrc(url)\r\n        props.setShow(true)\r\n    }\r\n    \r\n    // let aProps = props.props\r\n    // // aProps.className = \"wrp-a \" + aProps.className;\r\n    // aProps['data-href'] = aProps.href;\r\n    // delete aProps.href;\r\n    return (\r\n        <a {...props.props}\r\n            onClick={handleClick}\r\n        >{props.children}</a>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    setShow: isShow => {\r\n        dispatch(aActions.setShow(isShow))\r\n    },\r\n    setSrc: url => {\r\n        dispatch(aActions.setSrc(url))\r\n    }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(A);\r\n\r\n// 有的页面会js动态加载新的<a/>, 该怎么办？\r\n","import React from 'react';\nimport Word from '../components/word'\nimport A from '../components/a';\nimport { get } from 'lodash';\n\n\nconst config = {\n    splitWord:false,\n    splitSentence:true,\n    runScript:true,\n}\n\nconst extractScope = {\n    front:1,\n    behind:1,\n    /**\n     * fn, bn为断句过程中的变量, \n     * 当fn == front, bn == behind时, 断句即结束\n     * 每次断句结束后, 需要重置fn, bn\n    */\n    fn:0,\n    bn:0,\n};\n\n// sentence id\nlet sId = 0;\n\nfunction isInline(target){\n    // console.log('isInline: ', target, typeof target, target.nodeName)\n    if(!target) return false\n    if(target.nodeName === '#text') return true;\n\n    let display = window.getComputedStyle(target).getPropertyValue('display')\n    if (display.search('inline') !== -1) return true\n\n    return false\n}\n\n// 从html中提取部分文字区域， 例如：单词，句子\nexport function extractPart(target, offset, type='word'){\n    if(!target) return['',''];\n    // console.log('translate test',target);\n    let frontPattern;\n    let behindPattern;\n    if(type === 'word'){\n        frontPattern = /^[\\s\\S]*\\W(\\w*?)$/;\n        behindPattern = /^(\\w*?)\\W[\\s\\S]*$/;\n    }\n\n    if(type === 'sentence'){\n        frontPattern = /^[\\s\\S]*(?:(?:[.!?](?!\\w))|[。！？\\v\\t])([\\s\\S]*?)$/;\n        behindPattern = /^([\\s\\S]*?([.!?](?!\\w))|[。！？\\v\\t])[\\s\\S]*$/;\n    }\n\n    let frontTarget = target;\n    if(offset == null){\n        frontTarget = target.previousSibling;\n        if(!isInline(target)){\n            frontTarget = null;\n        }\n    }\n    console.log('frontPattern', frontPattern,behindPattern )\n    // console.log('a',frontTarget,offset)\n    let front = frontFind(frontTarget, offset, true, frontPattern);\n    // console.log('go -1 front',front,'go -2');\n    let behind = behindFind(target, offset, true, behindPattern, true);\n    // console.log('go -2 behind',behind,'go -end');\n\n    extractScope.fn = 0\n    extractScope.bn = 0\n    \n    return [front, behind];\n}\n\n// 寻找分割的断点位置\nexport function findSubPart(text, direction, pattern){\n    /**front 单词模板pattern /^[\\s\\S]*\\W(\\w*?)$/\n     * behind 单词模板pattern /^(\\w*?)\\W[\\s\\S]*$/\n     */\n    let subPart;\n    if(direction === 'front'){\n        // let pattern = /^[\\s\\S]*\\W(\\w*?)$/;\n        subPart = text.match(pattern);\n        // console.log('match', subPart);\n        if(subPart != null){\n            extractScope.fn += 1;\n            subPart = subPart[1];\n        }else{\n            subPart = text;\n        }\n    }\n\n    if(direction === 'behind') {\n        // behind\n        // let pattern = /^(\\w*?)\\W[\\s\\S]*$/;\n        subPart = text.match(pattern);\n        // console.log('match', subPart, pattern);\n\n        if(subPart != null){\n            extractScope.bn += 1;\n            subPart = subPart[1];\n        }else{\n            subPart = text;\n        }\n    }\n    // console.log('subPart', subPart)\n    // const end = /[.。!！?？]/\n    return subPart;\n}\n\nexport function frontFind(target, offset, testParent=true, pattern){\n    // 向前遍历节点 查找翻译起点\n    // console.log('f')\n    let result = {\n        texts:[],\n        elements:[],\n        break:false\n    }\n    if(!target) return result;\n    while(target){\n        // console.log(\"front, while\", target,result.texts);\n        if(target.nodeName == \"#text\"){\n            let text\n            if(offset){\n                text = target.textContent.slice(0,offset);\n            }else{\n                text = target.textContent;\n            }\n            // console.log('front text', text, target)\n            let subPart = findSubPart(text,'front',pattern);\n            // console.log('subPart', subPart)\n            if(extractScope.front <= extractScope.fn){\n                result.texts.unshift(subPart);\n                result.elements.unshift(subPart);\n                // console.log('break')\n                result.break = true;\n                break;\n            }else{\n                subPart = text;\n                result.texts.unshift(subPart);\n                result.elements.unshift(subPart);\n            }\n        }else if(target.nodeName == \"SPAN\"){\n            if(target.classList[0] == \"@w\"){\n                // Word\n                result.texts.unshift(target.textContent);\n                result.elements.unshift(copyWord(target));\n            }else{\n                // 需要遍历子节点\n                let children = frontFind(target.lastChild,null,false,pattern);\n                result.texts.unshift(...children.texts);\n                result.elements.unshift(copy(target,children.elements));\n                result.break = children.break;\n                if(children.break) break;\n            }\n        }else if( !isInline(target)){\n            break;\n        }else{\n            // 其他标签， 遍历子节点\n            let children = frontFind(target.lastChild,null,false,pattern);\n            // console.log(\"front children\", children)\n            result.texts.unshift(...children.texts);\n            result.elements.unshift(copy(target,children.elements));\n            result.break = children.break;\n            if(children.break) break;\n        }\n\n        // 偶尔因target.parentName undefined 出错;\n        if(target.previousSibling){\n            if(!isInline(target.previousSibling)){\n                extractScope.fn += 1\n            }\n            target = target.previousSibling;\n        }else if(testParent){\n            if(!isInline(target.parentNode) || !isInline(target.parentNode.previousSibling)){\n                extractScope.fn += 1\n            }\n            target = target.parentNode.previousSibling;\n        }else{\n            break\n        }\n        offset = null;\n    }\n    return result;\n}\n\nexport function deepCopy(node,returnChilren=false){\n        \n    if(node.nodeName == '#text') return node.textContent;\n\n    let children = node.firstChild;\n    let childrenList = [];\n    while(children){\n        childrenList = childrenList.concat(deepCopy(children));\n        children = children.nextSibling;\n    }\n\n\n    if(returnChilren){\n        return childrenList;\n    }else{\n\n        let type = node.nodeName.toLowerCase();\n        const ignoreTag = ['#comment'];\n\n        if(ignoreTag.includes(type)){\n            return '';\n        }\n\n        let props = attToProps(node);\n        const noChildren = ['img','hr','br','input','link','wbr'];\n\n        if(noChildren.includes(type)){\n            let element = React.createElement(type, props);\n            return element;\n        }\n        \n        let element = React.createElement(type, props, childrenList);\n        return element;\n    }\n    \n}\n\nexport function copyWord(word){\n    // copy Word, 由Word渲染后的span便签copy Word\n    // word可能含有子标签，需要遍历复制\n    let childrenList = deepCopy(word,true);\n    return(\n        <Word\n            content={childrenList}\n            handleClick={(e,w)=>{this.props.clickWord(e,w)}}\n            translate={()=>{}}\n        />\n    )\n}\n\nexport function copy(content,children){\n    // Element、Children 为React Element\n    let type = content.nodeName.toLowerCase();\n    let props = attToProps(content);\n    let element = React.createElement(type,props,...children);\n    return element;\n}\n\nexport function behindFind(target,offset, testParent=true, pattern, driectTarget=false){\n    // 向后遍历节点  查找翻译终点 \n    // console.log('behindFind -start,',target)\n    let result = {\n        texts:[],\n        elements:[],\n        break:false,\n    }\n    if(!target) return result;\n    if(!offset) offset = 0;\n    while(target){\n        console.log(\"next, while\", target);\n        if(target.nodeName == \"#text\"){\n            let text = target.textContent.slice(offset);\n            console.log('behind text', text,target,offset,target.textContent)\n\n            let subPart = findSubPart(text,'behind',pattern);\n            if(extractScope.behind <= extractScope.bn){\n                result.texts.push(subPart);\n                result.elements.push(subPart);\n                result.break = true;\n                console.log('break')\n                break;\n            }else{\n                subPart = text;\n                result.texts.push(subPart);\n                result.elements.push(subPart);\n            }\n        }else if(target.nodeName == \"SPAN\"){\n            if(target.classList[0] == \"@w\"){\n                // Word\n                result.texts.push(target.textContent);\n                result.elements.push(copyWord(target));\n            }else{\n                // 需要遍历子节点\n                let children = behindFind(target.firstChild,0,false,pattern);\n                result.texts.push(...children.texts);\n                result.elements.push(copy(target,children.elements));\n                result.break = children.break;\n                if(children.break) break;\n            }\n        }else if( !isInline(target) && !driectTarget){\n            break;\n        }else{\n            // 其他标签， 遍历子节点\n            let children = behindFind(target.firstChild,0,false,pattern);\n            result.texts.push(...children.texts);\n            result.elements.push(copy(target,children.elements));\n            result.break = children.break;\n            if(children.break) break;\n        }\n\n\n        if(target.nextSibling){\n            if(!isInline(target.nextSibling)){\n                extractScope.bn += 1\n            }\n            target = target.nextSibling;\n        }else if(testParent){\n            if(!isInline(target.parentNode) || !isInline(target.parentNode.nextSibling)){\n                extractScope.bn += 1\n            }\n            target = target.parentNode.nextSibling;\n        }else{\n            break\n        }\n\n        if(extractScope.behind <= extractScope.bn) break\n        offset = 0;\n    }\n    return result;\n}\n\nexport function extractBothEnds(node){\n    // console.log('extractBothEnds');\n    let alterNode = true\n    let frontCross = extractFront(node,alterNode)[0];\n    let [behindCross,behindOther] = extractBehind(node);\n    // console.log('behindCross',behindCross,'behindOther',behindOther,'frontCross', frontCross);\n    return [behindCross,behindOther,frontCross]\n}\n\nexport function wordSplit(text){\n    /**just #text ; 仅文本,不含其他标签 */\n    if(!text) return [];\n    let re = /\\b/;\n    let wordpattern = /\\w+/;\n    let List = [];\n    let splitList = text.split(re);\n    for(let w of splitList){\n        if(wordpattern.test(w)){\n            List.push(getWord(w));\n        }else{\n            List.push(w);\n        }\n    }\n\n    return List;\n}\n\nexport function extractBehind(node){\n    // 提取单词后半部分, 在标签首部，\n    let getCross = false;\n            \n    if(node.nodeName == \"#text\"){\n        // 文本 | 直接分割 返回\n\n        let text = node.textContent;\n        let cross, other;\n\n        let splitList = text.split(/(^\\w*)(.+$)/); \n        // splitList = ['','Hello',' World!','']\n        cross = splitList[1] ? splitList[1] : '';\n        other = splitList[2] ? splitList[2] : '';\n        if(/[\\W]/.test(other[0])) getCross = true;\n        \n        \n\n        let otherWord = wordSplit(other);\n        console.log('return, cross, otherWord', cross,other)\n        return [cross,otherWord]\n                    \n    }else{\n        // 标签 | 遍历 分割 返回\n        let c  = node.firstChild;\n        let crossChildren = [];\n        let otherChildren = [];\n\n        while(c){\n            if(getCross){\n                // 已提取交叉情况，并移出xmlDoc\n                console.log('app-262-traversal');\n                otherChildren.push(htmlTraversal(c))\n            }else{\n                // 继续迭代\n                let [cross, other] = extractBehind(c)\n                crossChildren.push(cross);\n                otherChildren.push(other)\n            }\n            c = c.nextSibling;  // previousSibling\n        }\n        let type = node.nodeName.toLowerCase(); //.replace('body','div')\n        let props = attToProps(node);\n        let crossElement = createElement(type,props,crossChildren);\n\n        let otherElement = createElement(type,props,otherChildren);\n        // console.log('return, crossElement, otherElement', ReactDOMServer.renderToString(crossElement),\" | \",ReactDOMServer.renderToString(otherElement))\n        return [crossElement, otherElement]\n    }\n}\n\nexport function extractFront(node,alterNode){\n    // 提取单词前半部分, 在标签尾部，\n    let getCross = false;\n            \n    if(node.nodeName == \"#text\"){\n        // 文本 | 直接分割 返回\n\n        let text = node.textContent;\n        let cross, other;\n\n        let splitList = text.split(/(\\w*$)/); \n        // splitList = [Hello ','World']\n        other = splitList[0] ? splitList[0] : '';\n        cross = splitList[1] ? splitList[1] : '';\n        if(/[\\W]/.test(other[other.length - 1])) getCross = true;\n\n        if(alterNode){ //alterNode == \n            // 将交叉部分移出xmlDoc\n            // let newNode = doc.createTextNode(other)\n            // node.parentNode.replaceChild(newNode, node)\n        }\n        \n        let otherWord = wordSplit(other);\n        // console.log('return, cross, otherWord', ReactDOMServer.renderToString(cross),ReactDOMServer.renderToString(otherWord))\n        return [cross,otherWord]\n                    \n    }else{\n        // 标签 | 遍历 分割 返回\n        let c  = node.lastChild;\n        let crossChildren = [];\n        let otherChildren = [];\n\n        while(c){\n            if(getCross){\n                // 已提取交叉情况，并移出xmlDoc\n                console.log('app-196-traversal');\n                otherChildren.push(htmlTraversal(c))\n            }else{\n                // 继续迭代\n                let [cross, other] = extractFront(c,alterNode)\n                crossChildren.push(cross);\n                otherChildren.push(other)\n            }\n            c = c.previousSibling;  // previousSibling\n        }\n        let type = node.nodeName.toLowerCase(); //.replace('body','div')\n        let props = attToProps(node);\n        let crossElement = createElement(type,props,crossChildren);\n\n        let otherElement = createElement(type,props,otherChildren);\n        // console.log('return, crossElement, otherElement', ReactDOMServer.renderToString(crossElement),ReactDOMServer.renderToString(otherElement))\n        return [crossElement, otherElement]\n    }\n}\n\nexport function extractHead(head){\n    /** 提取head中的有用部分，复制，返回列表 */\n    let list = [];\n    if(!head)return list;\n    let base = false;\n    for(let i=0; i < head.childNodes.length; i++){\n        let node = head.childNodes[i]\n        let type = node.nodeName;\n        // console.log('nodeName', node, node.nodeName)\n        // console.log('node src ->', node.href)\n\n        if(type === 'BASE'){\n            base = true\n        };\n\n        // 相对链接转换为绝对\n        if(node.href) node.href = node.href;\n        if(node.src) node.src = node.src;\n\n        switch(type){\n            case \"LINK\":\n                // 黑名单\n                if([/manifest/,/icon/].findIndex((value)=>value.test(node.rel)) != -1) break;\n\n                //白名单\n                // if(![/stylesheet/,/preload/].findIndex((value)=>value.test(node.rel))) break;\n\n                list.push(createElement(type, attToProps(node), node.innerText));\n                break;\n            case \"STYLE\":\n\n                // list.push(this.createElement(type, this.attToProps(node), node.innerText));\n                list.push(<style>{node.innerText}</style>);\n                break;\n\n            case \"SCRIPT\":\n                // list.push(<script >{node.innerText}</script>);\n                list.push( createElement('script',attToProps(node), node.innerText) );\n                break;\n\n            case \"TITLE\":\n            // 忽略\n            case \"#text\":\n            // case \"SCRIPT\":\n            default:\n                break;\n        }\n    }\n    \n    // if(!base)list.push(this.createBaseTag());\n    return list;\n}\n\n//提取网页内容摘要\nexport function extractAbstract(node    ){\n    if(!node) return;\n    let abstract = {};\n    // icon\n    let links = node.head.getElementsByTagName('link');\n    for(let i =0; i < links.length; i++){\n        let link = links[i];\n        if(!link.rel)continue;\n        if(link.rel.indexOf('icon') > 0){\n            abstract.icon = link.href;\n            break;\n        }\n    }\n    // title\n    let title = \"\";\n    let docTitle =  node.head.getElementsByTagName('title')\n    if(docTitle.length > 0){\n        title = docTitle[0].textContent;\n    }else{\n        let docH1 = node.body.getElementsByTagName('h1');\n        if(docH1.length > 0){\n            title = docH1[0].textContent;\n        }else{\n\n        }\n    }\n    abstract.title = title;\n    \n    // description\n    let pTags = node.getElementsByTagName('p');\n    let description = \"\";\n    for(let i = 0; i < pTags.length; i++){\n        description = description + pTags[i].textContent.trim().slice(0,200);\n        if(description.length >= 200) break;\n    }\n\n    let spanTags = node.getElementsByTagName(\"span\");\n    for(let i=0; i < spanTags.length; i++){\n        description = description + spanTags[i].textContent.trim().slice(0,200);\n        if(description.length >= 200) break;\n    }\n\n    if(!description) description = node.body.textContent.trim().slice(0,200);\n    abstract.des = description;\n    \n    // console.log('摘要 描述',pTags, description);\n\n    // abstract.url = this.props.app.url;\n    // abstract.key = this.props.app.key;\n\n\n   return abstract;\n}\n\nexport function createElement(type,props,children){\n    type = type.toLowerCase();\n    let element;  \n\n    switch(type){\n        case \"div\":\n        case \"span\":\n        case \"p\":\n            element = React.createElement(type,props,children);\n            return element;\n        case \"a\":\n            props['data-src'] = props.href;\n            delete props.href;\n            element = (<A\n                props = {props} \n                // clickLink={(link,status)=>this.clickLink(link, status)}\n                // clickWord={(e)=>this.handleClickWord(e)}\n            >{children}</A>);\n            return element;\n        // 以下为 empty elements (no children) 的标签\n        case \"input\":\n            // 存在value属性导致无法输入\n            delete props.value;\n        case \"img\":\n        case \"hr\":\n        case \"br\":\n        case \"link\":\n        case \"wbr\":\n        case \"area\":\n        case \"base\":\n        case \"embed\":\n        case \"keygen\":\n        case \"meta\":\n        case \"param\":\n        case \"source\":\n        case \"track\":\n            element = React.createElement(type,props);\n            return element;\n        // 以下为忽略的标签\n        case \"#comment\":\n        case \"#document\":\n        case \"script\":\n            // return '';\n            if(!config.runScript) return '';\n            if(props.src) props[\"data-href\"] = props.src;\n            delete props.src;\n            element = React.createElement(type, props, children);\n            return element;\n        // 特殊处理\n        case \"svg\":\n            element = React.createElement(type, props, children);\n            // element.dangerouslySetInnerHTML()\n            return element;\n        case \"body\":\n            element = React.createElement('body',props, children);\n            return element;\n        case \"col\":\n            return (<col {...props}></col>);\n        case \"textarea\":\n            if(children.length > 1) console.warn('React.reactElememt() Error! <textarea> tag only requests one children.')\n            // element = React.createElement('div',props, children[0]);\n            element = React.createElement('textarea',props, children[0]);\n            return element;\n        default:\n            try{\n                element = React.createElement(type,props,children);\n                return element;\n            }catch(e){\n                console.log('React.createElement() Error on create \"', type, '\" tag!')\n            }\n            \n    }\n}\n\nexport function styleConvert(style){\n    // style = element.style;\n    let styleObj = {};\n    for(let i=0; i < style.length; i++){\n        let styleKey = style[i].replace(/-([a-z])/g,(m,g)=>g.toUpperCase())\n        styleObj[styleKey] = style[style[i]];\n    }\n    // console.log(\"App.js: styleConvert() style:\", style, \"obj:\", styleObj);\n    return styleObj;\n}\n\nexport function attToProps(node){\n    if(!node) return {};\n    if(!node.attributes) return {};\n    let props = {};\n    for(let i = 0; i < node.attributes.length; i++){\n        let att = node.attributes[i];\n        let attName =att.name;\n        let attValue = att.value;\n\n        switch(attName){\n            case \"style\":\n                attValue = styleConvert(node.style);\n                break;\n            case \"src\":\n            case \"href\":\n                // 大多默认为相对路径，需补全链接\n                attValue = node[attName];\n                break;\n            case \"srcset\":\n                // 如何补全相对路径呢？这是一个问题，还有在css中的background-image:url()...\n                attValue = '';\n                break;\n            case \"class\":\n                attName = \"className\";\n                break;\n            // default:\n            //     continue;\n            // case \"async\":\n            //     console.log('async', att.value);\n            //     attName = \"\"\n            //     attValue = \"\";\n            //     break;\n            case \"for\":\n                attName = \"htmlFor\";\n                break;\n            case \"tabindex\":\n                attName = \"tabIndex\";\n                break;\n            case \"itemprop\":\n                attName = \"itemProp\";\n                break;\n            case \"itemscope\":\n                attName = \"itemScope\";\n                break;\n            case \"itemtype\":\n                attName = \"itemType\";\n                break;\n            case \"xml:space\":\n                attName = \"xmlSpace\";\n                break;\n            case \"fill-rule\":\n                attName = \"fillRule\";\n                break\n            case \"clip-rule\":\n                attName = \"clipRule\";\n                break\n            case \"autocapitalize\":\n                attName = \"autoCapitalize\"\n                break;\n            case \"acceptcharset\":\n                attName = \"acceptCharset\";\n                break;\n            case \"autocomplete\":\n                attName = \"autoComplete\";\n                break;\n            case \"stroke-linecap\":\n                attName = \"strokeLinecap\"\n                break;\n            case \"stroke-miterlimit\":\n                attName = \"strokeMiterlimit\";\n                break;\n            case \"stroke-width\":\n                attName = \"strokeWidth\";\n                break;\n            case \"stroke-linejoin\":\n                attName = \"strokeLinejoin\";\n                break;\n            case \"crossorigin\":\n                attName = \"crossOrigin\";\n                break;\n\n        }\n        // attName = attName.replace(/-([a-z])/g,(m,g)=>g.toUpperCase());\n        props[attName] = attValue;\n    }\n    return props;\n}\n\nexport function frontHaveWordEnd(node){\n    /**判断前半部分(node)的末尾是否是单词的末尾， 即判断前半部分(node)的末尾是否有单词分割符（空格等） */\n    let children = node;\n    let deep = 0;\n    while(children){\n        let child = children; // 备份\n        if(!this.isInline(children)) return false;\n        if(children.nodeName == \"#text\"){\n            let text = children.textContent;\n            if(/[a-zA-Z0-9_-]/.test(text[text.length -1])) return true;\n            return false;\n        }\n\n        if(!children.lastChild){\n            children = children.previousSibling;\n            // deep = deep \n        }else{\n            children = children.lastChild;\n            deep = deep + 1;\n        }\n\n        // 继续向上就不必了吧, 算了， 先写上\n        if(!children && deep > 0){\n            children = child.parentNode.previousSibling;\n            deep = deep - 1;\n        }\n    }\n}\n\nexport function behindHaveWordEnd(node){\n    /**判断后半部分（node）的开端是否是单词的开端， 即判断后半部分(node)的开端是否有单词分割符（空格等） */\n    let children = node;\n    let deep = 0;\n    while(children){\n        let child = children;\n        if(!isInline(children)) return false;\n        if(children.nodeName == \"#text\"){\n            let text = children.textContent;\n            if(/[a-zA-Z0-9_-]/.test(text[0])) return true;\n            return false;\n        }\n\n        \n        if(!children.firstChild){\n            children = children.nextSibling;\n            // deep = deep \n        }else{\n            children = children.firstChild;\n            deep = deep + 1;\n        }\n\n        // 继续向上就不必了吧, 算了， 先写上\n        if(!children && deep > 0){\n            children = child.parentNode.nextSibling;\n            deep = deep - 1;\n        }\n    }\n}\n\nexport function haveCrossWord(node){\n    // 判断相邻两个节点之间是否含有交叉情况\n    let nextNode = node.nextSibling;\n    if(!node || !nextNode) return false;\n    if(!isInline(node) || !isInline(nextNode)) return false;\n    if(frontHaveWordEnd(node) && behindHaveWordEnd(nextNode)) return true;\n    return false;\n}\n\nexport function getWord(content){\n    return (\n        <Word\n            content = {content}\n        />\n        );\n}\n\nexport function sentenceSplit(text, parentNode=null){\n    /**just #text ; 仅文本,不含其他标签 */\n    if(!text) return [];\n    let pattern = /([\\s\\S]*?(?:(?:[.!?](?!\\w))|[。！？\\n\\v\\t])+)/;\n    let splitList = text.split(pattern);\n    let list = [];\n    let onlyOneChild = parentNode.childNodes.length === 1;\n    if(splitList.length === 1 && onlyOneChild){\n        return splitList;\n    }\n\n    splitList.map((s)=>{\n        if(/^\\s*$/.test(s)){\n            // 空字符\n            list.push(s)\n        }else{\n            list.push((<span key={'s' + sId}>{s}</span>));\n            sId = sId + 1;\n        }\n    })\n\n    return list;\n}\n\nexport function htmlTraversal(node){\n    if(!node) return [];\n    // console.log('htmlTraversal',node,node.nodeName)\n    // let ignoreTag = [\"script\",'meta','link','#comment','#document','iframe'];\n    // let mostCommon = [\"DIV\",\"P\",\"SPAN\"]\n    let type, props, element;\n    switch(node.nodeName){\n        case \"#text\":\n            if(config.splitWord){\n                return wordSplit(node.textContent);\n            }else if(config.splitSentence){\n                return sentenceSplit(node.textContent, node.parentNode);\n            }else{\n                return node.textContent;\n            }\n        case \"#comment\":\n        case \"#document\":\n        case \"IFRAME\":\n            // 忽略\n            return [];\n        case \"STYLE\":\n            // console.log('style tag->',node, node.innerText, node.scoped);\n            type = node.nodeName.toLowerCase();\n\n            props = attToProps(node);\n            element = createElement(type,props,node.innerText);\n            return element;\n        case \"SCRIPT\":\n            type = node.nodeName.toLowerCase();\n\n            props = attToProps(node);\n            element = createElement(type,props,node.innerText);\n            return element;\n        case \"DIV\":\n        case \"P\":\n        case \"SPAN\":\n        case \"A\":\n        default:\n            let childrenList = [];\n            let frontCross, frontOther;\n            let haveCross = false;\n            if(config.splitWord){\n                for(let i = 0; i < node.childNodes.length; i++){\n                    let children = node.childNodes[i];\n                    let haveCross2 = haveCrossWord(children, children.nextSibling);\n\n                    // console.log('Cross Cross2', children, children.nextSibling, haveCross, haveCross2);\n                    if(!haveCross && !haveCross2){\n                        // console.log('app-362-traversal',children, children.length);\n                        childrenList = childrenList.concat(htmlTraversal(children));\n                        children = children.nextSibling;\n                    }else if(haveCross && haveCross2){\n                        // i all  前后都存在交叉情况\n                        let [behindCross, middle, newFrontCross] = extractBothEnds(children);\n                        console.log(\"middle\", middle);\n                        if(middle.props.children.length == 0){\n                            frontCross = [frontCross].concat(newFrontCross);\n                        }else if(middle.props.children[0].length < 1){\n                            // 三交叉 behindCross is ''\n                            // console.log('三交叉');\n                            frontCross = [frontCross].concat(newFrontCross);\n                        }else if(middle.props.children[0].length >= 1){\n                            let word = getWord([frontCross,behindCross]);\n                            childrenList = childrenList.concat(word).concat(middle);\n                            frontCross = newFrontCross;\n                            // frontCross = []\n                        };\n                    }else if(haveCross2){\n                        // i - 1 front 暂存\n                        [frontCross,frontOther] = extractFront(children);\n                        childrenList = childrenList.concat(frontOther);\n                    }else if(haveCross){\n                        // i behind\n                        let [behindCross,behindOther] = extractBehind(children);\n                        let word = getWord([frontCross,behindCross]);;\n                        childrenList = childrenList.concat(word).concat(behindOther);\n                    };\n                    haveCross = haveCross2;\n                    children = null;\n                }\n            }else{\n                for(let i = 0; i < node.childNodes.length; i++){\n                    let children = node.childNodes[i];\n                    childrenList = childrenList.concat(htmlTraversal(children));\n                }\n            }\n            \n            type = node.nodeName.toLowerCase();\n\n            props = attToProps(node);\n            element = createElement(type,props,childrenList);\n            return element;\n    }\n}","import axios from 'axios'\r\nimport { htmlTraversal, extractHead, extractAbstract } from '../utils/core'\r\n\r\n\r\nexport const setStatus = (status) => ({\r\n    type: \"app/SETSTATUS\",\r\n    status\r\n})\r\n\r\nexport const setXmlDoc = (xmlDoc) => ({\r\n    type: \"app/SETXMLDOC\",\r\n    xmlDoc\r\n})\r\n\r\nexport const setUrl = (url) => ({\r\n    type:\"app/SETURI\",\r\n    url\r\n})\r\n\r\nexport const setKey = (key) => ({\r\n    type: \"app/SETKEY\",\r\n    key\r\n})\r\n\r\nexport const setLocation = (location) => {\r\n    if (location === undefined) {\r\n        return ({\r\n            type: \"app/SETLOCATION\",\r\n            location: {}\r\n        })\r\n    }\r\n    if (typeof(location) === 'string') {\r\n        return ({\r\n            type: \"app/SETLOCATION\",\r\n            location: {\r\n                path: location\r\n            }\r\n        })\r\n    }\r\n\r\n    if(typeof(location) === 'object') {\r\n        return ({\r\n            type: \"app/SETLOCATION\",\r\n            location\r\n        })\r\n    }\r\n}\r\n\r\n/** historyList 为当前完成List, item 为新条目，可为空 */\r\nexport const setHistory = (item) => {\r\n    \r\n    let historyList = JSON.parse(localStorage.getItem('read_history'));\r\n    if( ! Array.isArray(historyList)) historyList = [];\r\n\r\n    console.log('historyList', historyList)\r\n\r\n    if(item){\r\n        let i = historyList.length\r\n        historyList = historyList.filter(v => v.url !== item.url || v.key !== item.key)\r\n\r\n        console.log('actions app : history.push: ', item)\r\n        historyList.push(item);\r\n    }\r\n\r\n    while(historyList.length > 200){\r\n        // Array.shift() 移除数组中的第一个值并返回\r\n        let remove = historyList.shift();\r\n        if(remove.key) localStorage.removeItem(remove.key);\r\n    }\r\n\r\n    console.log('actions setHistory 3', historyList);\r\n\r\n    // 存储\r\n    let historyStr = JSON.stringify(historyList);\r\n    localStorage.setItem('read_history', historyStr);\r\n\r\n    return ({\r\n        type: \"app/SETHISTORY\",\r\n        history: historyList\r\n    })\r\n}\r\n\r\n\r\nexport const loadXmlDoc = (input) => {\r\n    console.log('action creaters loadXMLDoc')\r\n    if (!input) return;\r\n    return dispatch => {\r\n\r\n        let encode = encodeURIComponent(input);\r\n        let url2 = `https://1773134661611650.ap-northeast-1.fc.aliyuncs.com/2016-08-15/proxy/Tr/tr/?url=${encode}`;\r\n        let url = `https://1773134661611650.ap-northeast-1.fc.aliyuncs.com/2016-08-15/proxy/Tr/tr/?url=${encode}`;\r\n\r\n        // let url = `http://47.94.145.177:8000/get?url=${encode}`;\r\n        console.log(\"input:\", input)\r\n        let inputObj = new URL(input);\r\n        let timeout = 60000;\r\n        switch(inputObj.host){\r\n            case \"www.wikipedia.org\":\r\n            case \"wikibooks.org\":\r\n            case \"m.wikipedia.org\":\r\n            case \"en.wikipedia.org\":\r\n            case \"en.m.wikipedia.org\":\r\n            case \"twitter.com\":\r\n            case \"t.co\":\r\n            case \"news.google.com\":\r\n            case \"developer.chrome.com\":\r\n            case \"www.bbc.com\":\r\n            case \"bbc.com\":\r\n            case \"blog.diigo.com\":\r\n            case \"diigo.com\":\r\n            case \"www.kali.org\":\r\n                url = url2;\r\n                timeout = 80000;\r\n                break;\r\n            case \"localhost:3000\":\r\n            case \"localhost:8888\":\r\n                url = input;\r\n                break;\r\n        }\r\n\r\n        return new Promise(async (resolve,reject) => {\r\n            // try{\r\n                let res = await axios({url:url, method:\"get\", timeout: timeout})\r\n                if (res.status === 200){\r\n                    // dispatch(setXmlDoc(res.data))\r\n                    console.log('doc parser')\r\n                    dispatch(docParser(res.data, input))\r\n                    // dispatch(setStatus('parsing'))\r\n                }else{\r\n                    console.log(`loadxmldoc status!=200, res:${res}`)\r\n                    dispatch(setStatus('failed'))\r\n                }\r\n            // }catch(e){\r\n            //     console.log(`loadxmldoc catch err : ${e}`)\r\n            //     dispatch(setStatus('failed'))\r\n            // }\r\n            \r\n            \r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport const goRead = (input, currentUrl) => {\r\n    // input 可以是输入框输入, 历史banner中的url, 阅读页面中的url\r\n    return dispatch => {\r\n\r\n        let urlPattern = /^https?:\\/\\/(.+\\.\\w+.*)|(localhost.*)/\r\n        let isUrl = input.length < 10000 ? urlPattern.test(input) : false\r\n    \r\n        if (isUrl && input === currentUrl) {\r\n            // 将要打开的页面与当前阅读的页面是同一个\r\n            dispatch(setStatus('parsing'))\r\n            dispatch(setLocation('/wrp-read'))\r\n            return;\r\n        }\r\n        if( ! isUrl ) {\r\n            // input 不是url， 是文本\r\n            dispatch(setXmlDoc( input ))\r\n            dispatch(setUrl(''))\r\n            dispatch(setStatus('parsing'))\r\n            dispatch(setLocation('/wrp-read'))\r\n\r\n            return;\r\n        }\r\n    \r\n        // 将要打开的是新页面\r\n        dispatch(setStatus('loading'))\r\n        dispatch(loadXmlDoc(input))\r\n        dispatch(setLocation('/wrp-read'))\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const setElements = (elements) => ({\r\n    type:\"app/SETELEMENTS\",\r\n    elements\r\n})\r\n\r\nexport const setHeads = (heads) => ({\r\n    type: \"app/SETHEADS\",\r\n    heads\r\n})\r\n\r\nexport const docParser = (doc, baseUrl, key='') => {\r\n    let t1 = Date.now()\r\n    let dom = (new DOMParser()).parseFromString(doc, 'text/html')\r\n\r\n    if(baseUrl) {\r\n        let base = dom.createElement('base');\r\n        console.log('base app.url', baseUrl)\r\n        base.href = new URL(baseUrl).origin; \r\n        dom.head.insertBefore(base, dom.head.firstChild);\r\n    }\r\n\r\n    let htmlElements = htmlTraversal(dom.body);\r\n    let t2 = Date.now()\r\n    console.log(\"traversal Runing time \", t2 - t1)\r\n\r\n    // this.htmlElements = htmlElements;\r\n    // this.abstract = null;\r\n\r\n    // 提取head， 渲染head\r\n    let heads = extractHead(dom.head);\r\n    // head(headChildList);\r\n    let abstract = extractAbstract(dom);\r\n    abstract = Object.assign(abstract, key ? { key : key }: { url : baseUrl})\r\n \r\n    return dispatch => {\r\n        dispatch(setElements(htmlElements))\r\n        dispatch(setHeads(heads))\r\n        dispatch(setStatus('completed'))\r\n        dispatch(setHistory(abstract))\r\n    }\r\n}","import axios from 'axios';\nimport { get } from 'lodash';\n\nimport { extractPart, extractHead } from '../utils/core'\n\nexport const setWord = (word, coordinate) => ({\n    type: \"expl/SETWORD\",\n    word: word,\n    coordinate: coordinate\n})\n\nexport const setShow = show => ({\n    type: \"expl/SETSHOW\",\n    show\n})\n\nexport const setData = data => ({\n    type: \"expl/SETDATA\",\n    data\n})\n\n/** \n * 请求接口获取单词释义\n *  并 setData, addMore, setExplState\n */\nexport const loadWordData = word => {\n    return dispatch => {\n        // let url = `https://1773134661611650.cn-beijing.fc.aliyuncs.com/2016-08-15/proxy/WordingReadingPro/iciba/?key=zysj&q=${word.toLowerCase()}`\n        let url = `https://1773134661611650.cn-shanghai.fc.aliyuncs.com/2016-08-15/proxy/wrp/wrp_server/iciba?w=${word.toLowerCase()}`;\n        let timeout = 10000;\n        let iciba2Data = (apiData) => {\n            let data = {};\n            let more = [];\n            if(!apiData.word_name) return data;\n            data.word = apiData.word_name;\n            if(Object.keys(apiData).includes('word_name')){\n                data.audio = apiData.symbols[0].ph_tts_mp3;\n                data.audioUK = apiData.symbols[0].ph_en_mp3;\n                data.audioUS = apiData.symbols[0].ph_am_mp3;\n                data.answer = apiData.symbols[0].parts.map(o=>[o.part, o.means.join(' ')]);\n                // 提取单词解释里的单词\n                more = apiData.symbols[0].parts.map(i=>i.means.join(' ')).join(' ').match(/[a-zA-Z]{3,20}/);\n            }\n            return { data, more };\n        }\n        return new Promise(async (resolve) => {\n            try{\n                let res = await axios({url:url, method:\"get\",timeout: timeout});\n                if (res.status === 200){\n                    console.log('res', res, '\\n', res.data)\n                    let data = get(res,'data.data') || {}\n                    let more = (data.answer || []).join(';').match(/[a-zA-Z]{3,30}/g) || []\n                    console.log('loadWordData', data,more)\n                    dispatch(setData(data))\n                    dispatch(addMore(more))\n                    dispatch(setExplState('completed'))\n                    console.log('--end--')\n                }else {\n                    console.log()\n                    throw new Error('request status != 200')\n                }\n            }catch(e){\n                console.log('loadWordData Error', e);\n                dispatch(setExplState('failed'))\n            }\n            resolve()\n        })\n    }\n}\n\nexport const setExplState = status => ({\n    type: \"expl/SETEXPLSTATE\",\n    status\n})\n\nexport const setPlayAudio = audio => ({\n    type: \"expl/SETPLAYAUDIO\",\n    audio\n})\n\nexport const setZoom = zoom => ({\n    type: \"expl/SETZOOM\",\n    zoom\n})\n\nexport const addMore = more => {\n    \n    more = [].concat(more)\n    more = more.filter(w => typeof w === 'string')\n    more = more.map(w=> w.toLowerCase())\n    return {\n        type: \"expl/ADDMORE\",\n        more\n    }\n\n}\n\n/** & addMore */\nexport const setMore = more => {\n    more = more.filter(w=>typeof w === 'string')\n    more = more.map(w => w.toLowerCase())\n    return {\n        type: \"exp/SETMORE\",\n        more\n    }\n    \n}\n\nexport const setSetting = setting => ({\n    type: \"expl/SETSETTING\",\n    setting\n})\n\nexport const setMoreFold = isUnfold => ({\n    type: \"expl/SETMOREFOLD\",\n    isUnfold\n})\n\nexport const tapWord = (event) => {\n    let target = window.getSelection().anchorNode;\n    if(!target.wholeText) return setShow(false);\n\n    let offset = window.getSelection().anchorOffset;\n    let clickedChar = target.wholeText.slice(offset,offset+1);\n    if(/\\W/.test(clickedChar)) return setShow(false);\n\n    let part = extractPart(target, offset, 'word');\n    let word = part[0].texts.join('') + part[1].texts.join('');\n    if(!word) return setShow(false);\n    \n    console.log('tapWord action', word, target.wholeText)\n\n    let position = {x:event.pageX, y:event.pageY, clientY:event.clientY};\n\n    return dispatch => {\n        dispatch(setWord(word, position))\n        dispatch(loadWordData(word))\n        dispatch(setShow(true))\n        /** 驼峰写法拆分 */\n        let more = word.match(/([A-Z]?[a-z]+)|([A-Z]{3,})/g)\n        dispatch(setMore(more.length > 1 || more[0] !== word ? more : []))\n        \n    }\n\n}\n\n\n","import React from 'react';\r\n\r\nclass Switch extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            status:false,\r\n        };\r\n        this.hasInit = false;\r\n        this.switchStyle = {\r\n            boxSizing :\"border-box\",\r\n            width :'2.5em',\r\n            height :'1.2em',\r\n            backgroundColor:\"#ccc\",\r\n            // border:\"1px solid #888\",\r\n            borderRadius:'0.6em',\r\n            display:\"inline-flex\",\r\n            alignItems:\"center\",\r\n            padding:\"0 0.1em\",\r\n            color:'#fff',\r\n            transition:'all 0.3s',\r\n            verticalAlign:'middle',\r\n            marginLeft:'0.5em',\r\n\r\n        };\r\n        this.dotStyle = {\r\n            boxSizing :\"border-box\",\r\n            width:\"0px\",\r\n            height:\"0px\",\r\n            border:\"0.5em solid\",\r\n            borderRadius:'50%'\r\n        };\r\n        this.onStyle = {\r\n            backgroundColor:'#0f0',\r\n            color:\"#fff\",\r\n            justifyContent:'flex-end'\r\n        };\r\n        this.offStyle = {\r\n            backgroundColor:'#ccc',\r\n            color:\"#fff\",\r\n            justifyContent:'flex-start'\r\n        };\r\n    }\r\n\r\n    handleClick(){\r\n        let status = !this.state.status;\r\n        this.setState({\r\n            status:status\r\n        });\r\n        try{\r\n            this.props.switchChange(status);\r\n        }catch(e){\r\n            console.warn('Switch component no incoming \"props.switchChange\" function.', e);\r\n        }\r\n    }\r\n\r\n    init(props){\r\n        if(props.initStatus != this.state.status && this.hasInit == false){\r\n            this.hasInit = true;\r\n            this.setState({\r\n                status:props.initStatus\r\n            });\r\n        }\r\n        if(props.onStyle){\r\n            let onStyle = Object.assign({}, this.onStyle);\r\n            Object.assign(onStyle, this.props.onStyle);\r\n            this.onStyle = onStyle;\r\n        };\r\n        if(props.offStyle){\r\n            let offStyle = Object.assign({}, this.offStyle);\r\n            Object.assign(offStyle, this.props.offStyle);\r\n            this.offStyle = offStyle;\r\n        };\r\n        if(props.switchStyle){\r\n            let switchStyle = Object.assign({}, this.switchStyle);\r\n            Object.assign(switchStyle, this.props.switchStyle);\r\n            this.switchStyle = switchStyle;\r\n        };\r\n\r\n        if(props.status != undefined && props.status != this.state.status){\r\n            this.setState({\r\n                status:props.status\r\n            })\r\n        }\r\n    }\r\n\r\n    render(){\r\n\r\n        this.init(this.props);\r\n\r\n        let style = Object.assign({},this.switchStyle);\r\n        // console.log('style ', style, Object.isExtensible(style), Object.isFrozen(style))\r\n        switch(this.state.status){\r\n            case true:\r\n                style = Object.assign(style, this.onStyle);\r\n                break\r\n            case false:\r\n                style = Object.assign(style, this.offStyle);\r\n                break\r\n        }\r\n\r\n        return (\r\n            <div style={style} onClick={()=>this.handleClick()}>\r\n                <div style={this.dotStyle}></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default Switch;  ","import axios from 'axios';\nimport { get } from 'lodash'\n\nimport { extractPart } from '../utils/core'\n\nexport const setShow = value => ({\n    type: \"translate/SETSHOW\",\n    value\n})\n\nexport const setOriginal = original => ({\n    type: \"translate/SETORIGINAL\",\n    original\n})\n\nexport const setStatus = status => ({\n    type: \"translate/SETSTATUS\",\n    status\n})\n\nexport const setTranslation = translation => ({\n    type: \"translate/SETTRANSLATION\",\n    translation\n})\n\nexport const slipTranslate = event => {\n    let url = \"https://1773134661611650.cn-shanghai.fc.aliyuncs.com/2016-08-15/proxy/wrp/wrp_server/alimt\"\n    let target = event.target;\n    // let offset = get(event, 'target.innerText.length', 2) / 2\n    let part = extractPart(target, null,'sentence');\n    let sentence = part[0].texts.join('') + part[1].texts.join('');\n    sentence = sentence.trim();\n\n    if(sentence.length < 3) return ;\n\n    let original = {\n        text:sentence,\n        elements:[...part[0].elements,...part[1].elements]\n    }\n\n    return dispatch => {\n        dispatch(setShow('half'))\n        dispatch(setStatus('loading'))\n        dispatch(setOriginal(original))\n        let formData = new URLSearchParams()\n        formData.append('text', sentence)\n        return new Promise(async resolve => {\n            try{\n                let res = await axios({\n                    url: url,\n                    method: \"POST\",\n                    data: formData\n                })\n                if(res.status === 200){\n                    console.log('slipTranslate', res)\n                    dispatch(setTranslation({\n                        text: res.data.Data.Translated,\n                        elements: res.data.Data.Translated\n                    }))\n                    dispatch(setStatus('completed'))\n                }else{\n                    throw new Error('request status != 200')\n                }\n            }catch(e){\n                console.log('slip translate error', e)\n    \n            }\n            resolve()\n        })     \n    }\n}","import React from \"react\";\r\nimport { connect } from 'react-redux';\r\n\r\nimport './readPanel.css';\r\n\r\nimport Switch from './switch.js';\r\n\r\nimport * as explActions from '../actions/explanation';\r\nimport * as translateActions from '../actions/translate'\r\n\r\nclass ReadPanel extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            menuPosition:{\r\n                top:0,\r\n                left:0,\r\n                opacity:0,\r\n                pointerEvents:'none',\r\n            },\r\n\r\n        }\r\n        this.touchStartDate = 0;\r\n        this.rpMenu = {w:60,h:200};\r\n        this.touchTarget = null;\r\n\r\n        this.touchMoving = false;\r\n        this.movingRecord = {\r\n            sumX:0,\r\n            sumY:0,\r\n            lastX:0,\r\n            lastY:0\r\n        }\r\n    }\r\n\r\n    handleClick(e){\r\n        // console.log(\"click e->\", e,e.pageX,e.pageY, e.clientX, e.clientY)\r\n\r\n        // console.log('e ->', e,e.target, e.currentTarget,e.detail, window.getSelection())\r\n\r\n        // console.log('window', window.getSelection())\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        let anchorNode = window.getSelection().anchorNode && window.getSelection().anchorNode.parentElement;\r\n        if(anchorNode == e.target){\r\n            this.props.tapWord(e)\r\n        }else{\r\n            try{\r\n                console.log('readPanel hiddenSomeone')\r\n                this.props.hiddenSomeone('explainPanel linkDialog');\r\n            }catch(e){\r\n                console.warn(\"readPanel.js need props.hiddenSomeone function!\", e)\r\n            }\r\n        }\r\n        \r\n        \r\n        // e.stopPropagation()\r\n    }\r\n\r\n    handleTouchStart(e){\r\n        this.touchStartDate = new Date();\r\n        // console.log('touchstart',e,e.target)\r\n        // 记录初始化\r\n        this.movingRecord = {\r\n            sumX:0,\r\n            sumY:0,\r\n            lastX:e.touches[0].pageX,\r\n            lastY:e.touches[0].clientY\r\n        }\r\n    }\r\n\r\n    handleTouchEnd(e){\r\n        this.touchMoving = false;\r\n        // 滑动 判断\r\n        if(Math.abs(this.movingRecord.sumX) > 50 && Math.abs(this.movingRecord.sumY) < 15){\r\n            // 成立\r\n            try{\r\n                // this.props.translate(e)\r\n                console.log('window.getSelection', window.getSelection())\r\n                this.props.setShowTranslate('half')\r\n                this.props.slipTranslate(e)\r\n            }catch(e){\r\n                console.warn(\"word: props.translate is not function!\", e);\r\n            }\r\n        }\r\n\r\n        let touchTime = (new Date()) - this.touchStartDate;\r\n        console.log('record', this.movingRecord.sumX,this.movingRecord.sumY )\r\n        let touchMove = Math.abs(this.movingRecord.sumX) < 15 && Math.abs(this.movingRecord.sumY) < 15;\r\n        if(touchTime > 300 && touchTime < 2000 && touchMove){\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            console.log('Touch', e, e.changedTouches, e.targetTouches, e.view, e.touches, e.target)\r\n            let x = e.changedTouches[0].clientX;\r\n            let y = e.changedTouches[0].clientY;\r\n            let vw = window.screen.availWidth;\r\n            let vh = window.screen.availHeight;\r\n            let marg = 8;\r\n            let position = Object.assign({},this.state.menuPosition);\r\n\r\n            if((x + this.rpMenu.w) > vw) x = vw - this.rpMenu.w - marg;\r\n            if((y + this.rpMenu.h) > vh) y = vh - this.rpMenu.h - marg;\r\n\r\n            position.top = y;\r\n            position.left = x;\r\n            position.opacity = '1';\r\n            position.pointerEvents = 'all';\r\n\r\n            this.setState({\r\n                menuPosition:position\r\n            })\r\n            this.touchTarget = e.target;\r\n        }\r\n    }\r\n\r\n    handleTouchMove(e){\r\n        // console.log('touchMove',e,e.touches,e.targetTouches)\r\n        // console.log(e.touches[0].pageX, e.touches[0].pageY, this.touchMoving)\r\n        if(!this.touchMoving){\r\n            // 触摸开始\r\n            this.touchMoving = true;\r\n            let self = this;\r\n            // setTimeout(()=>{\r\n            //     self.touchMoving = false;\r\n            //     // console.log('time up', this.touchMoving)\r\n            // }, 100, this);\r\n            // 记录初始化\r\n            this.movingRecord = {\r\n                sumX:0,\r\n                sumY:0,\r\n                lastX:e.touches[0].pageX,\r\n                lastY:e.touches[0].clientY\r\n            }\r\n        }else{\r\n            // 滑动中 记录\r\n            this.movingRecord.sumX = this.movingRecord.sumX + e.touches[0].pageX - this.movingRecord.lastX;\r\n            this.movingRecord.sumY = this.movingRecord.sumY + e.touches[0].clientY - this.movingRecord.lastY;\r\n            this.movingRecord.lastX = e.touches[0].pageX;\r\n            this.movingRecord.lastY = e.touches[0].clientY;\r\n        }\r\n    }\r\n\r\n    handleCloseRpMenu(){\r\n        let position = Object.assign({},this.state.menuPosition);\r\n        position.opacity = '0';\r\n        position.pointerEvents = 'none';\r\n\r\n        this.setState({\r\n            menuPosition:position\r\n        })\r\n    }\r\n\r\n    handleRpHidden(){\r\n        if(!this.touchTarget) return;\r\n        if(this.touchTarget.className.split(' ').includes('wrp-read-panel')) return;\r\n        this.touchTarget.classList.add('wrp-rp-hidden');\r\n        this.handleCloseRpMenu();\r\n    }\r\n\r\n    handleRpRemove(){\r\n        if(!this.touchTarget) return;\r\n        if(this.touchTarget.className.split(' ').includes('wrp-read-panel')) return;\r\n        this.touchTarget.classList.add('wrp-rp-remove');\r\n        this.handleCloseRpMenu();\r\n    }\r\n\r\n    handleRpShow(){\r\n        let hiddenList = document.getElementsByClassName('wrp-rp-hidden');\r\n        console.log('hiddenList', hiddenList.length)\r\n        for(let i = hiddenList.length - 1; i >= 0; i--){\r\n            console.log('show ->',i,hiddenList.length)\r\n            let element = hiddenList[i];\r\n            element.classList.remove('wrp-rp-hidden');\r\n            // break;\r\n        }\r\n        this.handleCloseRpMenu();\r\n    }\r\n\r\n    componentDidMount(){\r\n        let rm = document.getElementById('wrp-rp-menu');\r\n        this.rpMenu.w = rm.offsetWidth;\r\n        this.rpMenu.h = rm.offsetHeight;\r\n    }\r\n\r\n    render(){\r\n\r\n        let style = {};\r\n        // if(this.props.padding) style.padding = '1em';\r\n\r\n        return (\r\n            <div \r\n                id=\"wrp-read-panel\" \r\n                style={style}\r\n                onClick={(e)=>this.handleClick(e)}\r\n                onTouchStart={(e)=>this.handleTouchStart(e)}\r\n                onTouchEnd={(e)=>this.handleTouchEnd(e)}\r\n                onTouchMove={(e)=>this.handleTouchMove(e)}\r\n\r\n            >\r\n                {this.props.content}\r\n\r\n                <div id=\"wrp-rp-menu\" style={this.state.menuPosition}>\r\n                    <div className=\"wrp-nav-item\" onClick={()=>this.handleCloseRpMenu()}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill='var(--t-fore-c)' viewBox=\"0 0 1024 1024\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M877.216 491.808M575.328 510.496 946.784 140.672c17.568-17.504 17.664-45.824 0.192-63.424-17.504-17.632-45.792-17.664-63.36-0.192L512.032 446.944 143.712 77.216C126.304 59.712 97.92 59.648 80.384 77.12 62.848 94.624 62.816 123.008 80.288 140.576l368.224 369.632L77.216 879.808c-17.568 17.504-17.664 45.824-0.192 63.424 8.736 8.8 20.256 13.216 31.776 13.216 11.424 0 22.848-4.352 31.584-13.056l371.36-369.696 371.68 373.088C892.192 955.616 903.68 960 915.168 960c11.456 0 22.912-4.384 31.648-13.088 17.504-17.504 17.568-45.824 0.096-63.392L575.328 510.496 575.328 510.496zM575.328 510.496\" p-id=\"10091\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\"></div>\r\n                    </div>\r\n                    <div className=\"wrp-nav-item\" onClick={()=>this.handleRpHidden()}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill='var(--t-fore-c)' viewBox=\"0 0 1024 1024\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M947.6 477.2c-85-106-175.9-177.5-272.8-214.7l60.1-122.3c8.8-17.8 1.4-39.5-16.4-48.2-17.8-8.8-39.5-1.4-48.2 16.4l-65.6 133.4c-30.4-6.4-61.3-9.6-92.7-9.6-159.3 0-304.5 81.7-435.6 245-8.3 10.2-12.4 22.6-12.4 35s4.1 24.8 12.3 35.1C161.3 653.2 252.2 724.7 349 762l-59.9 121.9c-8.8 17.8-1.4 39.5 16.4 48.2s39.5 1.3 48.2-16.4l65.3-133c30.4 6.4 61.4 9.6 93 9.6 159.3 0 304.5-81.7 435.6-245 16.4-20.5 16.4-49.7 0-70.1z m-799.1 35c112.4-140 232.8-207.8 363.5-207.8 20.1 0 39.9 1.6 59.6 4.8L544.7 364c-10.5-2.3-21.5-3.5-32.7-3.5-83.8 0-151.8 68-151.8 151.8 0 46.7 21.1 88.5 54.4 116.4L381.4 696c-81.5-30.8-159-91.7-232.9-183.8z m443.3 0c0 43.8-35.3 79.4-79 79.8l62.9-127.9c10.1 13.4 16.1 30.1 16.1 48.1z m-159.6 0c0-43.8 35.2-79.2 78.8-79.8l-62.8 127.8c-10.1-13.3-16-29.9-16-48zM512 720c-20.2 0-40.1-1.6-59.7-4.9l26.9-54.7c10.6 2.3 21.6 3.6 32.8 3.6 83.8 0 151.8-68 151.8-151.8 0-46.8-21.2-88.6-54.5-116.5l33.1-67.4C724 359.1 801.5 420 875.5 512.2 763.1 652.2 642.6 720 512 720z\" p-id=\"7888\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\">隐藏</div>\r\n                    </div>\r\n                    <div className=\"wrp-nav-item\" onClick={()=>this.handleRpRemove()}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill='var(--t-fore-c)' viewBox=\"0 0 1024 1024\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M668.8 896h-320c-48.64 0-88.32-37.76-92.8-87.68L211.2 403.2c-1.92-17.28 10.88-33.28 28.16-35.2 17.28-1.92 33.28 10.88 35.2 28.16l44.16 405.76c1.28 17.28 14.08 30.08 28.8 30.08h320c14.72 0 27.52-12.8 28.8-29.44l44.16-406.4c1.92-17.28 17.92-30.08 35.2-28.16 17.28 1.92 30.08 17.92 28.16 35.2l-44.16 405.76c-2.56 49.28-42.88 87.04-90.88 87.04zM826.24 321.28H190.72c-17.92 0-32-14.08-32-32s14.08-32 32-32h636.16c17.92 0 32 14.08 32 32s-14.72 32-32.64 32z\" p-id=\"13417\"></path><path d=\"M424.96 789.12c-16.64 0-30.72-12.8-32-29.44l-27.52-347.52c-1.28-17.92 11.52-33.28 29.44-34.56 17.92-1.28 33.28 11.52 34.56 29.44l27.52 347.52c1.28 17.92-11.52 33.28-29.44 34.56h-2.56zM580.48 789.12h-2.56c-17.92-1.28-30.72-16.64-29.44-34.56L576 407.04c1.28-17.92 16.64-30.72 34.56-29.44 17.92 1.28 30.72 16.64 29.44 34.56l-27.52 347.52c-1.92 16.64-15.36 29.44-32 29.44zM581.76 244.48c-17.92 0-32-14.08-32-32 0-23.68-19.2-43.52-43.52-43.52s-43.52 19.2-43.52 43.52c0 17.92-14.08 32-32 32s-32-14.08-32-32c0-59.52 48-107.52 107.52-107.52s107.52 48 107.52 107.52c0 17.28-14.08 32-32 32z\" p-id=\"13418\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\">移除</div>\r\n                    </div>\r\n                    <div className=\"wrp-nav-item\" \r\n                        onClick={()=>this.handleRpShow()}\r\n                    >\r\n                        <svg className=\"wrp-nav-item-icon\" fill='var(--t-fore-c)' viewBox=\"0 0 1024 1024\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M512.14 819c-136.83 0-253.2-59.32-326.73-109.08C97.84 650.6 35.29 581.25 12.15 538.82a56.53 56.53 0 0 1 0-54.35c23.14-42.44 85.69-111.79 173.26-171 73.53-49.77 189.9-109.09 326.73-109.09 137.53 0 253.1 57.92 325.84 106.51 40.4 27 78.56 58.49 110.35 91.12 28.79 29.53 51.46 59.18 63.84 83.48a57.94 57.94 0 0 1 0 52.4c-12.38 24.3-35 53.95-63.84 83.48-31.79 32.63-70 64.14-110.35 91.13C765.24 761 649.67 819 512.14 819zM67 511.64c10 17.43 28.73 40.66 51.89 64.2a672.78 672.78 0 0 0 100.8 83.41c66.45 45 171.14 98.59 292.48 98.59 122.21 0 226.18-52.32 291.89-96.21 78.53-52.46 133.92-114.07 152.88-150-19-35.92-74.35-97.53-152.88-150-65.71-43.89-169.68-96.21-291.89-96.21-121.34 0-226 53.61-292.48 98.59a672.23 672.23 0 0 0-100.8 83.42C95.7 471 76.93 494.21 67 511.64z\" fill=\"#333333\" p-id=\"8662\"></path><path d=\"M511.81 682.86c-94.41 0-171.22-76.81-171.22-171.22s76.81-171.22 171.22-171.22S683 417.23 683 511.64s-76.78 171.22-171.19 171.22z m0-278.44A107.22 107.22 0 1 0 619 511.64a107.34 107.34 0 0 0-107.19-107.22z\" fill=\"#333333\" p-id=\"8663\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\">显示</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    tapWord: events => {\r\n        dispatch(explActions.tapWord(events))\r\n    },\r\n\r\n    setShowTranslate: value => {\r\n        dispatch(translateActions.setShow(value))\r\n    },\r\n\r\n    slipTranslate: event => {\r\n        dispatch(translateActions.slipTranslate(event))\r\n    }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReadPanel);","import React from 'react'\r\n\r\nimport Switch from './switch.js';\r\n\r\nimport './explanation.css';\r\n\r\nimport arrow_icon from \"./res/explainBoxArrow.svg\";\r\nimport audio_icon from \"./res/audio.svg\";\r\nimport star_icon from \"./res/star.svg\";\r\nimport menu_icon from \"./res/more.svg\";\r\nimport open_icon from './res/open.svg';\r\nimport arrowShadow_icon from './res/arrowShadow.png'\r\n\r\nconst calcFontSize = (size,maxNumber,text) => {\r\n    /**size:初始字符大小, maxNumber:初始字符大小下可以显示的最大字符, text：当前字符 */\r\n    if(!text) return size;\r\n    if(text.length <= maxNumber) return size;\r\n    return size*maxNumber/text.length;\r\n}\r\n\r\nconst calcPosition = (coordinate, zoom=0) => {\r\n    const ew = 17;                  // em explanation width 宽度\r\n    const eh = 8;                   // em explanation height 高度\r\n    const aw = 2.8;                 // em arrow width 三角箭头宽度\r\n    const ah = 2.8;                 // em arrow height 三角箭头高度\r\n    const topDistance = 12;         // em 顶部距离小于topDistance时,expainPanel显示在单词下方\r\n    const wordDistance = 3;         // em expainPanel距离单词的距离\r\n    const edgeDistance = 1;         // em 最小左右边距\r\n    const arrowOverlapping = 0.1;   // 箭头和框的重叠距离\r\n    const remRatioPx = 14;          // 1 rem = 16 px\r\n\r\n    let position = {};\r\n    let arrowPosition = {};\r\n    if(!coordinate) return { position, arrowPosition }\r\n    if(typeof(zoom) !== 'number') zoom = 0;\r\n    let x = coordinate.x, y= coordinate.y, clientY = coordinate.clientY;\r\n    let vw = window.innerWidth, vh= window.innerHeight;\r\n\r\n    let ratio = remRatioPx + remRatioPx * zoom;\r\n\r\n    //纵向位置 Vertical position\r\n    if(clientY >= topDistance * ratio){\r\n        // expainPanel显示在单词上方\r\n        position.top = `calc(${y}px - ${eh}em - ${wordDistance}em)`;\r\n        // arrowStyle.transform = 'rotate(180deg)'\r\n        arrowPosition.top = `${eh - ah / 2 - arrowOverlapping}em`\r\n    }else{\r\n        // expainPanel显示在单词下方\r\n        position.top = `calc(${y}px + ${wordDistance}em)`;\r\n        arrowPosition.top = `-${ah / 2 - arrowOverlapping}em`;\r\n        // arrowStyle.transform = 'rotate(0deg)';\r\n    }\r\n\r\n    // 横向位置 Horizontal position\r\n    if(x >= vw - (ew / 2 + edgeDistance) * ratio){\r\n        // 单词位置靠右边框\r\n        position.left = `calc(${vw}px - ${ew}em - ${edgeDistance}em)`;\r\n        // 太偏右 调整\r\n        if( (vw - x) < (edgeDistance * ratio + aw / 2 * ratio)) x = vw - (edgeDistance * ratio + aw / 2 * ratio);\r\n        arrowPosition.left = `calc(${x - vw}px + ${ew + edgeDistance - aw / 2}em)`;\r\n    }else if(x <= (ew / 2 + edgeDistance) * ratio){\r\n        // 单词位置靠左边框\r\n        position.left = `${edgeDistance}em`;\r\n        // 太偏左 调整\r\n        if(x < (edgeDistance * ratio + aw / 2 * ratio)) x = edgeDistance * ratio + aw / 2 * ratio;\r\n        arrowPosition.left = `calc(${x}px - ${edgeDistance + aw / 2}em)`;\r\n    }else{\r\n        // 中间\r\n        position.left = `calc(${x}px - ${ew / 2}em)`;\r\n        arrowPosition.left = `${ew / 2 - aw / 2}em`;\r\n    }\r\n\r\n    return {position,arrowPosition};\r\n}\r\n\r\nconst playingWhich = (data, value, auto) => {\r\n    let autoPlay = [false,false,false];\r\n    if(auto === false) return autoPlay;\r\n    // debugger\r\n    switch (value){\r\n        case 'us':\r\n            if(data.audioUS) autoPlay[0] = true; break;\r\n            if(data.audioUK) autoPlay[1] = true; break;\r\n            if(data.audio) autoPlay[2] = true; break; \r\n        case 'uk':\r\n            if(data.audioUK) autoPlay[1] = true; break;\r\n            if(data.audioUS) autoPlay[0] = true; break;\r\n            if(data.audio) autoPlay[2] = true; break;\r\n        case 'tts':\r\n            if(data.audio) autoPlay[2] = true; break;\r\n            if(data.audioUS) autoPlay[0] = true; break;\r\n            if(data.audioUK) autoPlay[1] = true; break;\r\n        default:\r\n            if(data.audioUS) {\r\n                autoPlay[0] = true; \r\n                break;\r\n            }\r\n            if(data.audioUK) {\r\n                autoPlay[1] = true;\r\n                break;\r\n            }\r\n            if(data.audio) {\r\n                autoPlay[2] = true; \r\n                break;\r\n            }\r\n    }\r\n    return autoPlay;\r\n}\r\n\r\nconst answerFormat = answer => {\r\n    // answer = [[\"n.\", \"开关\"],[\"vt.\", \"转变\"]]\r\n    if(!answer) return '';\r\n    return answer.map( value => (<dt><b>{value[0]}</b>{value[1]}</dt>))\r\n}\r\n \r\nconst Explanation = ({ explanation, setSetting, setMoreFold, loadWordData, setZoom }) =>{\r\n\r\n    const Loading = (\r\n        <div className=\"wrp-ep-other-content\">\r\n            <div className=\"wrp-icon\">\r\n                <div className=\"wrp-loading-icon\">\r\n                    <div/> <div/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const nothing = (\r\n        <div className=\"wrp-ep-other-content\">\r\n            <div className=\"wrp-icon\">\r\n                <svg t=\"1600868218467\" viewBox=\"0 0 1024 1024\" width=\"100%\" height=\"100%\"><defs><style type=\"text/css\"></style></defs><path d=\"M861.140992 694.10816c-3.49184-31.456256-17.475584-48.93184-17.475584-52.427776 0-3.49696-6.987776-3.49696-10.484736-3.49696-3.495936 3.49696-3.495936 6.992896-3.495936 13.980672 0 0 10.488832 17.475584 13.980672 45.44 3.495936 34.952192-6.987776 66.407424-31.456256 97.867776-27.96032 31.456256-69.904384 48.93184-129.324032 48.93184-20.97152 0-41.944064-3.495936-55.923712-3.495936 3.495936 0 3.495936-3.495936 6.991872-3.495936 10.483712-6.987776 17.475584-17.475584 20.967424-31.456256 6.992896-13.979648 10.488832-31.455232 10.488832-52.427776 0-48.93184 13.979648-83.888128 41.944064-101.363712 34.951168-27.96032 87.379968-10.483712 87.379968-10.483712h3.495936c-6.992896 13.979648-10.488832 27.959296-17.476608 38.447104-20.97152 34.952192-38.448128 55.924736-38.448128 59.420672-3.495936 3.49184-3.495936 10.483712 0 13.979648 3.495936 3.495936 10.484736 3.495936 13.980672 0 0 0 20.97152-24.467456 41.944064-59.419648 10.483712-20.972544 20.97152-41.944064 27.959296-62.916608 6.991872-24.46336 13.984768-48.93184 13.984768-73.399296 0-3.492864-3.495936-10.484736-10.488832-10.484736-3.495936 0-10.483712 3.495936-10.483712 10.484736 0 27.963392-6.991872 52.431872-13.983744 76.895232l-3.49184-3.495936s-13.984768-3.49184-34.952192-3.49184c-27.964416 0-48.935936 6.987776-66.412544 17.476608-31.455232 20.97152-45.44 59.419648-48.93184 115.34336 0 31.456256-10.487808 55.923712-27.963392 69.904384-10.484736 10.483712-24.46848 13.979648-24.46848 13.979648-3.49184 0-6.987776 3.495936-6.987776 6.991872 0 3.49184 3.495936 6.9888 6.987776 10.484736 0 0 38.448128 10.487808 83.888128 10.487808 27.964416 0 52.427776-3.495936 73.40032-10.487808 27.963392-10.484736 49.874944-26.417152 66.41152-45.436928C838.996992 797.696 851.456 777.728 856.832 756.992c2.866176-11.057152 7.2192-44.544 4.308992-62.88384z m-69.904384-531.279872c0-3.492864-3.495936-10.484736-6.987776-10.484736-3.495936 0-10.487808 3.495936-10.487808 6.991872-10.483712 59.416576-101.359616 171.264-199.227392 227.188736 3.495936-20.968448 0-41.939968-3.49696-55.924736-10.483712-38.444032-38.447104-66.407424-76.895232-73.399296-48.93184-10.484736-87.379968 10.487808-108.352512 48.935936-17.475584 34.952192-13.979648 73.40032 6.987776 97.867776 31.460352 34.952192 76.896256 41.939968 132.819968 24.464384 6.992896-3.495936 17.476608-6.9888 24.46848-10.484736-10.483712 31.456256-31.456256 66.408448-66.408448 94.372864-115.34336 97.867776-269.135872 118.8352-314.575872 118.8352-3.49184 0-10.483712 3.495936-10.483712 10.488832 0 6.987776 3.495936 10.483712 10.483712 10.483712 48.935936 0 206.220288-20.972544 325.060608-125.828096 45.44-38.448128 66.41152-80.392192 76.895232-118.84032 104.856576-52.427776 209.716224-174.759936 220.199936-244.667392zM553.561088 397.011968c-10.487808 6.991872-24.46848 10.483712-34.952192 13.979648-48.935936 13.980672-87.384064 6.991872-115.34336-20.97152-17.476608-17.476608-17.476608-48.93184-3.495936-76.896256 13.979648-27.96032 41.94304-41.939968 69.90336-41.939968h17.476608c31.459328 6.987776 52.431872 27.96032 62.915584 59.415552 6.991872 20.972544 6.991872 41.944064 3.495936 66.412544z m0 0\" fill=\"#999999\" p-id=\"28413\"></path></svg>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    const renderMore = (moreList, unfold) => {\r\n        let list = [];\r\n        if ( ! Array.isArray(moreList) ) return list;\r\n        if ( unfold ) {\r\n            // 展开状态\r\n            list = moreList.map( word => {\r\n                return (<span onClick={()=>loadWordData(word)}>{word}</span>)\r\n            })\r\n            list.push(<span \r\n                className=\"unfold-button\"\r\n                onClick={()=>setMoreFold()}            \r\n                >{`<`}</span>)\r\n        } else {\r\n            // 折叠状态\r\n            if (moreList.length >=1 ){\r\n                list.push(<span onClick={()=>loadWordData(moreList[0])}>{moreList[0]}</span>)\r\n            }\r\n            if(moreList.length > 1){\r\n                list.push(<span \r\n                    className=\"unfold-button\"\r\n                    onClick={()=>setMoreFold()}            \r\n                    >{`<`}</span>)\r\n            }\r\n        }\r\n        return list;\r\n    }\r\n\r\n    let { position, arrowPosition } = calcPosition(explanation.coordinate, explanation.zoom)\r\n    let data = explanation.data || {}\r\n    let setting = explanation.setting || {}\r\n    let autoPlay = playingWhich(data, setting.playWhich, setting.autoPlay)\r\n    let more = explanation.more || [];\r\n    let zoom = {fontSize:`${14  + explanation.zoom}px`}\r\n    return (\r\n        <div\r\n            id=\"wrp-ep\"\r\n            className={`explain-panel ${explanation.show ? '' : 'explain-hidden'}`} \r\n            style={{...position, ...zoom }}\r\n        >\r\n            <div \r\n                className=\"wrp-ep-arrow-container\" \r\n                style={ arrowPosition }\r\n            >\r\n                <div className=\"wrp-ep-arrow\"></div>\r\n            </div>\r\n            <div className=\"wrp-explain-content\">\r\n                <div className=\"wrp-ep-title\">\r\n                    <div className=\"wrp-title-left\">\r\n                        <h3 className=\"wrp-title-word\" \r\n                            style={ {fontSize: `${calcFontSize(1.2, 11, data.word || explanation.word)}em`} }>\r\n                            { data.word || explanation.word }\r\n                        </h3>\r\n                        {\r\n                            data.audioUS ? (\r\n                            <div className=\"title-tts\"  onClick={()=>document.getElementById(\"a-us\").play()}>\r\n                                <div className=\"\" >US</div>\r\n                                <svg \r\n                                    className=\"title-audio\"\r\n                                    // style={autoPlay[0]?playingStyle:{}}\r\n                                    fill=\"var(--t-fore-c)\"\r\n                                    viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M541.2 132.3c-7.2-3.3-15.2-5-23.3-5-13.9 0-26.8 5.1-36.5 14.4L280.6 312.4h-158c-11.5 0-23.9 3.9-33.6 10.4h-4l-8.7 9.2c-7.5 7.9-12.2 20.8-12.2 33.8v290.7c0 15 6.7 31.4 16.9 41.6 10.2 10.3 26.6 16.9 41.6 16.9h158.2l200.7 165.6c8.4 7.9 23.3 16 35.6 16 5.6 0 16.5 0 27.1-8 10-4.2 17.8-10.4 23.1-18.6 5.7-8.6 8.4-19.1 8.4-32V184c0-12.9-2.8-23.4-8.4-32-5.8-9-14.6-15.6-26.1-19.7z m-24.8 57.4v642.9L310.2 662.5l-8.2-6.8v0.1H123.3V371.7h179l214.1-182zM899.3 300c-20.9-32.7-46.5-61.1-75.9-84.2l-0.1-0.1c-1.3-1.1-2.2-1.8-2.9-2.4-4.5-2.8-9.6-4.3-15.1-4.3-10.3 0-21.6 5.3-31.1 14.5l-0.1 0.1c-8.4 13.5-3.9 35.9 9 45.2l0.1 0.1c6.1 2.5 14.7 9.7 20.8 15.4 9.4 8.7 23.6 23.7 38.1 45.6 24.3 36.8 53.3 99.7 53.3 190.8 0 91-27.4 153.9-50.3 190.6-13.7 22-27.2 36.9-36.1 45.6-8.6 8.3-15.3 13.5-20.1 15.5l-0.1 0.1c-13.9 9.8-17.2 28.6-8.1 46.7 3.8 7.7 17.2 12.9 27.3 12.9 3.8 0 13.9 0 17.4-3.5 0.7-0.7 1.5-1.4 3.3-2.8 28.1-22.9 52.6-51 72.7-83.8 38.8-63.2 58.5-137.6 58.5-221.4 0-83.4-20.4-157.6-60.6-220.6z\" p-id=\"778\"></path><path d=\"M752.7 376.7c-23.8-27.4-48.4-40.2-53.7-42.1h-1.6l-1.9-1.3c-3.2-2.2-7.4-3.3-12-3.3-11.9 0-24.9 7.6-27.8 16.4l-0.3 1-0.6 0.9c-3.8 5.8-4.3 14.2-1.4 22.7 2.9 8.4 8.6 15.1 14.6 17.1l0.6 0.2 0.6 0.3c0.7 0.4 17.2 9.5 33.6 29.7 15.1 18.5 33.1 50.3 33.1 96.7 0 96.6-54.4 128.5-60.7 131.9-13.8 9.4-23 27.9-14.6 40.4l0.3 0.4 0.2 0.5c4.3 8.7 18.9 18.6 27.3 18.6 5.5 0 8.4-0.1 11.7-3.8l2.2-2.2H704.7c6.2-2.3 28.7-15.6 50.6-44.2 20.6-26.9 45.1-74.4 45.1-147.4 0-64.2-25.9-107.5-47.7-132.5z\" p-id=\"779\"></path></svg>\r\n                                <audio id=\"a-us\" key={data.audioUS} src={data.audioUS} autoPlay={autoPlay[0]} ></audio>\r\n                            </div>)\r\n                            :\r\n                            ''\r\n                        }\r\n                        {\r\n                            data.audioUK ? (\r\n                            <div className=\"title-tts\" onClick={()=>document.getElementById(\"a-uk\").play()}>\r\n                                <div className=\"\" >UK</div>\r\n                                <svg \r\n                                    className=\"title-audio\" \r\n                                    // style={autoPlay[1]?playingStyle:{}}\r\n                                    fill=\"var(--t-fore-c)\"\r\n                                    viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M541.2 132.3c-7.2-3.3-15.2-5-23.3-5-13.9 0-26.8 5.1-36.5 14.4L280.6 312.4h-158c-11.5 0-23.9 3.9-33.6 10.4h-4l-8.7 9.2c-7.5 7.9-12.2 20.8-12.2 33.8v290.7c0 15 6.7 31.4 16.9 41.6 10.2 10.3 26.6 16.9 41.6 16.9h158.2l200.7 165.6c8.4 7.9 23.3 16 35.6 16 5.6 0 16.5 0 27.1-8 10-4.2 17.8-10.4 23.1-18.6 5.7-8.6 8.4-19.1 8.4-32V184c0-12.9-2.8-23.4-8.4-32-5.8-9-14.6-15.6-26.1-19.7z m-24.8 57.4v642.9L310.2 662.5l-8.2-6.8v0.1H123.3V371.7h179l214.1-182zM899.3 300c-20.9-32.7-46.5-61.1-75.9-84.2l-0.1-0.1c-1.3-1.1-2.2-1.8-2.9-2.4-4.5-2.8-9.6-4.3-15.1-4.3-10.3 0-21.6 5.3-31.1 14.5l-0.1 0.1c-8.4 13.5-3.9 35.9 9 45.2l0.1 0.1c6.1 2.5 14.7 9.7 20.8 15.4 9.4 8.7 23.6 23.7 38.1 45.6 24.3 36.8 53.3 99.7 53.3 190.8 0 91-27.4 153.9-50.3 190.6-13.7 22-27.2 36.9-36.1 45.6-8.6 8.3-15.3 13.5-20.1 15.5l-0.1 0.1c-13.9 9.8-17.2 28.6-8.1 46.7 3.8 7.7 17.2 12.9 27.3 12.9 3.8 0 13.9 0 17.4-3.5 0.7-0.7 1.5-1.4 3.3-2.8 28.1-22.9 52.6-51 72.7-83.8 38.8-63.2 58.5-137.6 58.5-221.4 0-83.4-20.4-157.6-60.6-220.6z\" p-id=\"778\"></path><path d=\"M752.7 376.7c-23.8-27.4-48.4-40.2-53.7-42.1h-1.6l-1.9-1.3c-3.2-2.2-7.4-3.3-12-3.3-11.9 0-24.9 7.6-27.8 16.4l-0.3 1-0.6 0.9c-3.8 5.8-4.3 14.2-1.4 22.7 2.9 8.4 8.6 15.1 14.6 17.1l0.6 0.2 0.6 0.3c0.7 0.4 17.2 9.5 33.6 29.7 15.1 18.5 33.1 50.3 33.1 96.7 0 96.6-54.4 128.5-60.7 131.9-13.8 9.4-23 27.9-14.6 40.4l0.3 0.4 0.2 0.5c4.3 8.7 18.9 18.6 27.3 18.6 5.5 0 8.4-0.1 11.7-3.8l2.2-2.2H704.7c6.2-2.3 28.7-15.6 50.6-44.2 20.6-26.9 45.1-74.4 45.1-147.4 0-64.2-25.9-107.5-47.7-132.5z\" p-id=\"779\"></path></svg>\r\n                                <audio id=\"a-uk\" key={data.audioUK} src={data.audioUK} autoPlay={autoPlay[1]} ></audio>\r\n                            </div>)\r\n                            :\r\n                            \"\"\r\n                        }\r\n                        {\r\n                            (!data.audioUK || !data.audioUS && data.audio) ? (\r\n                            <div className=\"title-tts\"  onClick={()=>document.getElementById(\"a-tts\").play()}>\r\n                                <svg\r\n                                    className=\"title-audio\" \r\n                                    // style={autoPlay[2]?playingStyle:{}}\r\n                                    fill=\"var(--t-fore-c)\" \r\n                                    viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M541.2 132.3c-7.2-3.3-15.2-5-23.3-5-13.9 0-26.8 5.1-36.5 14.4L280.6 312.4h-158c-11.5 0-23.9 3.9-33.6 10.4h-4l-8.7 9.2c-7.5 7.9-12.2 20.8-12.2 33.8v290.7c0 15 6.7 31.4 16.9 41.6 10.2 10.3 26.6 16.9 41.6 16.9h158.2l200.7 165.6c8.4 7.9 23.3 16 35.6 16 5.6 0 16.5 0 27.1-8 10-4.2 17.8-10.4 23.1-18.6 5.7-8.6 8.4-19.1 8.4-32V184c0-12.9-2.8-23.4-8.4-32-5.8-9-14.6-15.6-26.1-19.7z m-24.8 57.4v642.9L310.2 662.5l-8.2-6.8v0.1H123.3V371.7h179l214.1-182zM899.3 300c-20.9-32.7-46.5-61.1-75.9-84.2l-0.1-0.1c-1.3-1.1-2.2-1.8-2.9-2.4-4.5-2.8-9.6-4.3-15.1-4.3-10.3 0-21.6 5.3-31.1 14.5l-0.1 0.1c-8.4 13.5-3.9 35.9 9 45.2l0.1 0.1c6.1 2.5 14.7 9.7 20.8 15.4 9.4 8.7 23.6 23.7 38.1 45.6 24.3 36.8 53.3 99.7 53.3 190.8 0 91-27.4 153.9-50.3 190.6-13.7 22-27.2 36.9-36.1 45.6-8.6 8.3-15.3 13.5-20.1 15.5l-0.1 0.1c-13.9 9.8-17.2 28.6-8.1 46.7 3.8 7.7 17.2 12.9 27.3 12.9 3.8 0 13.9 0 17.4-3.5 0.7-0.7 1.5-1.4 3.3-2.8 28.1-22.9 52.6-51 72.7-83.8 38.8-63.2 58.5-137.6 58.5-221.4 0-83.4-20.4-157.6-60.6-220.6z\" p-id=\"778\"></path><path d=\"M752.7 376.7c-23.8-27.4-48.4-40.2-53.7-42.1h-1.6l-1.9-1.3c-3.2-2.2-7.4-3.3-12-3.3-11.9 0-24.9 7.6-27.8 16.4l-0.3 1-0.6 0.9c-3.8 5.8-4.3 14.2-1.4 22.7 2.9 8.4 8.6 15.1 14.6 17.1l0.6 0.2 0.6 0.3c0.7 0.4 17.2 9.5 33.6 29.7 15.1 18.5 33.1 50.3 33.1 96.7 0 96.6-54.4 128.5-60.7 131.9-13.8 9.4-23 27.9-14.6 40.4l0.3 0.4 0.2 0.5c4.3 8.7 18.9 18.6 27.3 18.6 5.5 0 8.4-0.1 11.7-3.8l2.2-2.2H704.7c6.2-2.3 28.7-15.6 50.6-44.2 20.6-26.9 45.1-74.4 45.1-147.4 0-64.2-25.9-107.5-47.7-132.5z\" p-id=\"779\"></path></svg>\r\n                                <audio id=\"a-tts\" key={data.audio} src={data.audio} autoPlay={autoPlay[2]}></audio>\r\n                            </div>\r\n                            )\r\n                            :\r\n                            \"\"\r\n                        }\r\n                        \r\n                    </div>\r\n                    <div>\r\n                        <svg \r\n                            className=\"wrp-title-button\" \r\n                            style={{display:'none'}} \r\n                            fill=\"var(--t-fore-c)\" \r\n                            viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\" ><defs><style type=\"text/css\"></style></defs><path d=\"M1009.562 454.103c-72.264 88.023-200.049 233.339-200.049 233.339s20.9 159.55 32.614 268.534c5.09 55.51-34.928 79.513-80.25 57.876-86.242-43.325-217.478-110.448-247-125.573-30.044 14.97-162.6 80.988-249.733 124.211-45.844 21.586-86.343-2.416-81.193-57.825 11.869-108.82 32.983-268.216 32.983-268.216S87.685 541.44 14.582 453.529c-25.836-31.928-9.247-77.311 41.697-85.657 103.885-19.64 264.909-50.944 264.909-50.944s88.074-162.335 143.8-261.755C495.657-5.325 516.874 1.66 520.5 3.441c9.452 3.256 24.371 15.022 43.848 51.783 55.091 99.574 142.172 262.124 142.172 262.124s159.13 31.304 261.806 50.995c50.33 8.397 66.765 53.832 41.237 85.76z\"  p-id=\"3336\"></path></svg>\r\n                        <svg \r\n                            className={`wrp-title-button ${ setting.show ? \"expl-menu-show\" : \"expl-menu-hidden\" }`} \r\n                            onClick={()=>{ setSetting({show:!setting.show})}} \r\n                            fill=\"var(--t-fore-c)\" \r\n                            viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M415.93 223.79c0-52.98 43.004-95.984 95.984-95.984s95.984 43.004 95.984 95.984-43.004 95.984-95.984 95.984-95.984-43.003-95.984-95.984zM415.93 511.742c0-52.98 43.004-95.984 95.984-95.984s95.984 43.004 95.984 95.984-43.004 95.984-95.984 95.984-95.984-43.004-95.984-95.984zM415.93 799.866c0-52.98 43.004-95.984 95.984-95.984s95.984 43.003 95.984 95.984-43.004 95.983-95.984 95.983-95.984-43.175-95.984-95.983z\" p-id=\"4126\"></path></svg>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"wrp-ep-content\">\r\n                    <dl style={explanation.menuBgStyle}>\r\n                        { explanation.status === 'completed' ? answerFormat(data.answer) : Loading }\r\n                        {(explanation.status === 'completed' && !data.answer) ? nothing : ''}\r\n                    </dl>\r\n                    <div className={`more-word-contanier ${explanation.unfoldMore ? 'more-unfold' : ''}`}>\r\n                        { renderMore(more, explanation.unfoldMore) }\r\n                    </div>\r\n                    {/* MENU 更多 菜单 */}\r\n                    <div className={`wrp-ep-menu ${ setting.show ? \"wrp-expl-menu-show\" : \"\"}`} >\r\n                        <div>\r\n                            <span>Auto Speech</span>\r\n                            <Switch\r\n                                status={setting.autoPlay !== false} \r\n                                switchChange={(status)=> setSetting({autoPlay: status})}\r\n                                onStyle={{backgroundColor:'var(--sc)'}}\r\n                            ></Switch>\r\n                        </div>\r\n                        <div>\r\n                            <span>Speech US</span>\r\n                            <Switch\r\n                                status={setting.playWhich ? setting.playWhich === 'us': true} \r\n                                switchChange={(status)=> setSetting({playWhich: status ? 'us' : 'uk'})}\r\n                                onStyle={{backgroundColor:'var(--sc)'}}\r\n                            ></Switch>\r\n                        </div>  \r\n                        <svg className=\"menu-button\" onClick={()=>setZoom(1)} fill=\"var(--t-fore-c)\" viewBox=\"0 0 1024 1024\" version=\"1.1\" p-id=\"2685\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M592 400l-128 0 0-128c0-19.2-12.8-32-32-32s-32 12.8-32 32l0 128-128 0c-19.2 0-32 12.8-32 32s12.8 32 32 32l128 0 0 128c0 19.2 12.8 32 32 32s32-12.8 32-32l0-128 128 0c19.2 0 32-12.8 32-32S611.2 400 592 400z\" p-id=\"2686\"></path><path d=\"M950.4 905.6l-236.8-236.8c54.4-64 86.4-147.2 86.4-236.8C800 227.2 636.8 64 432 64 227.2 64 64 227.2 64 432 64 636.8 227.2 800 432 800c89.6 0 172.8-32 236.8-86.4l236.8 236.8c6.4 6.4 16 9.6 22.4 9.6s16-3.2 22.4-9.6C963.2 937.6 963.2 918.4 950.4 905.6zM432 736C265.6 736 128 598.4 128 432 128 265.6 265.6 128 432 128c166.4 0 304 137.6 304 304C736 598.4 598.4 736 432 736z\" p-id=\"2687\"></path></svg>\r\n                        <svg className=\"menu-button\" onClick={()=>setZoom(-1)} fill=\"var(--t-fore-c)\" viewBox=\"0 0 1024 1024\" version=\"1.1\" p-id=\"2556\" width=\"200\" height=\"200\"><defs><style type=\"text/css\"></style></defs><path d=\"M592 400l-320 0c-19.2 0-32 12.8-32 32s12.8 32 32 32l320 0c19.2 0 32-12.8 32-32S611.2 400 592 400z\" p-id=\"2557\"></path><path d=\"M950.4 905.6l-236.8-236.8c54.4-64 86.4-147.2 86.4-236.8C800 227.2 636.8 64 432 64 227.2 64 64 227.2 64 432 64 636.8 227.2 800 432 800c89.6 0 172.8-32 236.8-86.4l236.8 236.8c6.4 6.4 16 9.6 22.4 9.6s16-3.2 22.4-9.6C963.2 937.6 963.2 918.4 950.4 905.6zM432 736C265.6 736 128 598.4 128 432 128 265.6 265.6 128 432 128c166.4 0 304 137.6 304 304C736 598.4 598.4 736 432 736z\" p-id=\"2558\"></path></svg>\r\n                    </div>\r\n                </div>  \r\n            </div>\r\n                        \r\n        </div>\r\n    )\r\n}\r\n\r\n export default Explanation","import { connect } from 'react-redux'\r\n\r\nimport * as explActions from '../actions/explanation'\r\nimport Explanation from '../components/Explanation'\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    explanation: state.explanation\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    setSetting: setting => {\r\n        dispatch(explActions.setSetting(setting))\r\n    },\r\n    setMoreFold: isUnfold => {\r\n        dispatch(explActions.setMoreFold(isUnfold))\r\n    },\r\n    loadWordData: (word) =>{\r\n        dispatch(explActions.loadWordData(word))\r\n    },\r\n    setZoom: zoom => {\r\n        dispatch(explActions.setZoom(zoom))\r\n    }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Explanation)\r\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { get } from 'lodash'\n\nimport * as explActions from '../actions/explanation';\nimport * as translateActions from '../actions/translate';\n\nimport Word from '../components/word.js';\n// import TranslatePanel from '../components/TranslatePanel'\n\n// import { renderToString } from \"react-dom/server\";\n\nimport '../components/translatePanel.css';\n\n// 放到TranslatePanel 哪里合适\nvar translateScope={\n    front:1,    //设定值\n    behind:1,   //设定值\n    nf:0,       //当前值\n    nb:0        //当前值\n}\n\nconst touchRecord = {\n    lastY:0,\n    moving:false,\n    slipY:0,\n    slipNum:0,\n}\n\nclass TranslatePanel extends React.Component{\n    constructor(props){\n        super(props)\n        this.state={\n            // showStatus:'hidden',\n            movingStyle:{},\n            // '0' 表示隐藏 \n            status:'0',\n            dragY:0,\n        }\n        this.data = {};\n        this.tpHeight = 550;\n        this.count = 0;\n        this.handleClick = this.handleClick.bind(this)\n    }\n\n    handleDrag(e){\n        // console.log(e)\n        // e.preventDefault();\n        e.stopPropagation();\n        if(touchRecord.moving == false) {\n            touchRecord.lastY = e.touches[0].clientY;\n            touchRecord.moving = true;\n            setTimeout(()=>touchRecord.moving = false, 200);\n            console.log('moving = true')\n        }else{\n            console.log('moving')\n            let dragY = this.state.dragY + e.touches[0].clientY - touchRecord.lastY;\n\n            touchRecord.lastY = e.touches[0].clientY;\n\n            if(this.props.translate.show == \"full\") {\n                if(dragY < 0) dragY = 0;\n                if(dragY > this.tpHeight - 100) dragY = this.tpHeight - 100;\n            }else if(this.props.translate.show == \"half\") {\n                // 向上偏移值限制\n                if(dragY < -this.tpHeight / 2) dragY = -this.tpHeight / 2;\n                // 向下偏移值限制\n                if(dragY > this.tpHeight / 5 ) dragY = this.tpHeight / 5;\n                if(dragY > 150 ) dragY = 150;\n            }\n\n            this.setDrag(dragY);\n        }\n    }\n\n    resetDrag(e){\n        e.stopPropagation()\n        this.setDrag(0)\n    }\n\n    setDrag(value){\n        this.setState({\n            dragY:value\n        })\n    }\n\n    handleTouchSlip(e) {\n        // console.log('touch slip')\n        e.stopPropagation();\n        if(touchRecord.moving == false){\n            touchRecord.lastY = e.touches[0].clientY;\n            touchRecord.slipY = 0;\n            touchRecord.moving = true;\n            setTimeout(()=>{\n                touchRecord.moving = false;\n                touchRecord.slipNum = 0;\n            }, 150);\n        }else{\n            touchRecord.slipY = touchRecord.slipY + e.touches[0].clientY - touchRecord.lastY;\n            \n            let status = 0;\n            if(this.props.translate.show == \"half\"){\n                status = 1;\n            }else if(this.props.translate.show == \"full\"){\n                status = 2;\n                this.setDrag(0);\n            }\n    \n            if(touchRecord.slipY > 100 && touchRecord.slipNum == 0){\n                status = status - 1;\n                touchRecord.slipY = 0;\n                touchRecord.slipNum = 1;\n            }else if(touchRecord.slipY < -100 && touchRecord.slipNum == 0){\n                status = status + 1;\n                touchRecord.slipY = 0;\n                touchRecord.slipNum = 1;\n            }\n    \n            if(status < 0)status = 0;\n            if(status > 2)status = 2;\n            let show = ['hidden', 'half', 'full'][status];\n    \n            if(this.props.translate.show == show) return;\n            this.props.setShow(show)\n        }\n    }\n\n    handleClick(e) {\n        e.stopPropagation()\n        this.props.tapWord(e)\n    }\n\n    test(e){\n        console.log(e)\n        e.preventDefault();\n\n    }\n\n    handleMouseMove(e){\n        console.log('mouse move ->', this.movingRecord.moving,e)\n        \n        if(this.movingRecord.moving == true){\n            \n            this.movingRecord.slipY = this.movingRecord.slipY + e.clientY - this.movingRecord.lastY;\n            \n            let status = 0;\n            if(this.state.showStatus == \"half\"){\n                status = 1;\n            }else if(this.state.showStatus == \"full\"){\n                status = 2;\n            }\n\n            if(this.movingRecord.slipY > 100 && this.slipNum == 0){\n                status = status - 1;\n                this.movingRecord.slipY = 0;\n                this.slipNum = 1;\n            }else if(this.movingRecord.slipY < -100 && this.slipNum == 0){\n                status = status + 1;\n                this.movingRecord.slipY = 0;\n                this.slipNum = 1;\n            }\n\n            if(status < 0)status = 0;\n            if(status > 2)status = 2;\n            let showStatus = ['hidden', 'half', 'full'][status];\n            // console.log('status', status, this.movingRecord.slipY);\n\n            if(this.state.showStatus == showStatus) return;\n\n            this.setState({\n                showStatus:showStatus\n            })\n\n            // let tp = document.getElementById(\"tp\"); \n            // tp.style.transform = style.transform;\n        }\n        \n    }\n\n    handleMouseDown(e){\n        this.movingRecord.moving = true;\n    }\n\n    handleMouseUp(e){\n        this.movingRecord.moving = false;\n        this.slipNum = 0;\n    }\n\n    handleMouseLeave(e){\n        this.movingRecord.moving = false;\n        this.slipNum = 0;\n    }\n\n    translate(){\n        // let url = \"http://192.168.1.14:8000/translate\";\n        // let url = \"http://47.94.145.177:8000/translate\";\n        // let url = \"https://baotlake.ink:8001/translate\";\n        let url = \"https://1773134661611650.cn-shanghai.fc.aliyuncs.com/2016-08-15/proxy/wrp/wrp_server/alimt\"\n        \n        var xhr = new XMLHttpRequest(false,true);\n        xhr.open(\"POST\", url, true );\n        xhr.withCredentials = false;\n        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n        // xhr.onreadystatechange = ()=>{}\n        let self = this;\n        xhr.onload = function(){\n            console.log('xhr onload')\n            let json = JSON.parse(xhr.responseText);\n            if(json.status == '1'){\n                self.data.translate = json.value;\n                self.setState({\n                    status:'1'\n                })\n                // console.log('data', self.data)\n            }\n        }\n\n        let text = this.props.translateText && this.props.translateText.text;\n\n        xhr.send(`text=${encodeURIComponent(text)}&lang=${encodeURIComponent('en')}`);\n\n    }\n\n    getTextContent(element){\n        \n    }\n\n    componentDidMount(){\n        let tp = document.getElementById('tp');\n        tp.addEventListener('touchmove', (e)=>e.preventDefault());\n        this.tpHeight = tp.offsetHeight;\n\n    }\n\n    render(){\n        let showStyle={\n            hidden:{\n                bottom:\"-85%\",\n                height:'80%',\n            },\n            half:{\n                bottom:\"-45%\",\n                height:'80%',\n            },\n            full:{\n                bottom:0,\n                height:'80%',\n            }\n        }\n\n        let dragStyle = {\n            transform:`translateY(${this.state.dragY}px)`\n        }\n\n        let show = get(this.props.translate, 'show', 'hidden')\n        let panelStyle = Object.assign({}, showStyle[show], dragStyle);\n        let original = this.props.translate.original || {}\n        let status = this.props.translate.status\n        let translation = this.props.translate.translation\n\n        return (\n            <div id=\"tp\" className=\"wrp-translate-panel\" style={panelStyle}\n            onTouchMove={(e)=>this.handleTouchSlip(e)}\n            // onMouseMove={(e)=>this.handleMouseMove(e)}\n            // onMouseDown={(e)=>this.handleMouseDown(e)}\n            // onMouseUp={(e)=>this.handleMouseUp(e)}\n            // onMouseLeave={(e)=>this.handleMouseLeave(e)}\n            onClick={this.handleClick}\n        >\n            <div className=\"wrp-tp-handle\" \n                onTouchMove={(e)=>this.handleDrag(e)} \n                onClick={(e)=>this.resetDrag(e)} \n            />\n\n            <div className=\"\">{original.elements}</div>\n            <br/>\n            <div className=\"\">\n                {(status == \"completed\") ? translation.text :''}\n            </div>\n\n        </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    translate: state.translate\n})\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n    tapWord: event => {\n        dispatch(explActions.tapWord(event))\n    },\n    setShow: value => {\n        dispatch(translateActions.setShow(value))\n    }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TranslatePanel);","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport logo from \"./components/res/logo.png\";\r\nimport manifest from \"./manifest.json\";\r\n\r\nimport './Head.css'\r\n\r\nfunction Head(props) {\r\n  return <div id=\"wrp-head\">{props.heads}</div>;\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  heads: state.app.heads,\r\n});\r\n\r\nexport default connect(mapStateToProps)(Head);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport * as actions from './actions/app';\r\nimport * as explActions from './actions/explanation';\r\nimport * as aActions from './actions/a';\r\n\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport jQuery from 'jquery';\r\nimport {\r\n    Link,\r\n    withRouter,\r\n} from 'react-router-dom'\r\n\r\nimport './App.css';\r\n\r\nimport Word from './components/word';\r\nimport ReadPanel from './components/readPanel';\r\nimport ManageExplanation from './containers/ManageExplanation';\r\n\r\nimport TranslatePanel from './containers/TranslatePanel';\r\nimport Head from './Head';\r\nimport A from './components/a';\r\n\r\nimport {extractPart} from './utils/core'\r\n\r\n// var wrp = \"wordReadingPro\";\r\n\r\n// import ReactDOMServer from 'react-dom/server';\r\n\r\n// import getText from './text.js';\r\n// import { isFulfilled } from 'q';\r\n// import { throwError } from 'rxjs';\r\n\r\nclass App extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        /**props.url */\r\n        this.state={\r\n            // showExplainPanel:false,\r\n            showLinkDialog:false,\r\n            // clickedWord:{},\r\n            // translateText:undefined,\r\n            translateCount:0,\r\n        };\r\n        this.htmlElements = [];\r\n        // this.headCssText = '';\r\n        // this.externalLink = '';\r\n        // this.abstract = null;\r\n        this.extractScope = {\r\n            front:1,\r\n            behind:1,\r\n            // fn, bn为断句过程中的变量\r\n            fn:0,\r\n            bn:0,\r\n        };\r\n        this.translateText = {};\r\n        // 标识阅读界面, 页面序号\r\n        this.docId = -1;\r\n        // 链接，点击链接时显示转跳对话框\r\n        this.link = {\r\n            hash:false,\r\n            url:\"\",\r\n        };\r\n        this.config = {\r\n            splitWord:false,\r\n            splitSentence:true,\r\n            runScript:true,\r\n        };\r\n\r\n        // 移除$的控制权，避免冲突\r\n        jQuery.noConflict();\r\n        this.checkURI()\r\n    }\r\n\r\n    // 放入actions\r\n    handleClickWord(e){\r\n        this.props.tapWord(e)\r\n    }\r\n\r\n    // translate(e){\r\n    //     // console.log('translate',e, e.target, e.currentTarget,'\\ndetail',e.detail,'\\ntouches',e.touches,'\\ntargetTouches',e.targetTouches,'\\nchangedTouches',e.changedTouches,'\\neventPhase',e.eventPhase)\r\n    //     // console.log(window.getSelection());\r\n    //     // this.extractScope.fn = 0;\r\n    //     // this.extractScope.bn = 0;\r\n    //     let target = e.target;\r\n    //     let part = this.extractPart(target, null,'sentence');\r\n    //     let sentence = part[0].texts.join('') + part[1].texts.join('');\r\n    //     sentence = sentence.trim();\r\n    //     console.log('sentence ->:', sentence);\r\n    //     if(sentence.length < 3) return;\r\n    //     this.translateText = {\r\n    //         text:sentence,\r\n    //         elements:[...part[0].elements,...part[1].elements]\r\n    //     }\r\n    //     this.setState({\r\n    //         translateCount:this.state.translateCount + 1,\r\n    //     })\r\n\r\n    // }\r\n\r\n\r\n    styleFormat(cssText){\r\n        cssText.replace(/-([a-z])/,(m,g)=>g.toUpperCase());\r\n        if(cssText != \"\"){\r\n            cssText = cssText.replace(/:\\s*/g, '\":\"')\r\n            cssText = cssText.replace(/;\\s*/g, '\",\"')\r\n            cssText = '{\"' + cssText + '\"}'\r\n            cssText = cssText.replace(/,\"\"/g, '')\r\n            // 还需要对一些内容进行替换，比如 border-radius 替换为borderRadius\r\n            let style = {};\r\n            try{\r\n                style = JSON.parse(cssText)\r\n            }catch(e){\r\n\r\n            }\r\n\r\n            return style\r\n        }\r\n        return {}\r\n    }\r\n\r\n    \r\n    // 未使用 \r\n    findCrossIndex(node){\r\n        /** node为父标签，判断子标签的交叉情况\r\n         *  index 表示该标签的*前*半部分 上个标签的后部分 有交叉情况\r\n         *  返回值为列表\r\n         */\r\n        let t1 = Date.now()\r\n        let indexList = [];\r\n        let childNodes = node.childNodes;\r\n        if( childNodes.length <= 1 || !node) return indexList;\r\n        for(let i = 1; i < childNodes.length; i++){\r\n            this.isInline(childNodes[i].nodeName)\r\n            this.isInline(childNodes[i - 1].nodeName)\r\n            if(this.isInline(childNodes[i].nodeName) && this.isInline(childNodes[i - 1].nodeName)){\r\n                let nodeChar = childNodes[i].textContent[0];\r\n                let lastNodeChar = childNodes[i - 1].textContent[childNodes[i - 1].textContent.length - 1];\r\n                let re = /[a-zA-Z0-9_-]/;\r\n                if(re.test(nodeChar) && re.test(lastNodeChar)){\r\n                    indexList.push(i);\r\n                }\r\n            }\r\n        }\r\n        let t2 = Date.now()\r\n        console.log('FindCrossIndex runing time', t2 - t1)\r\n        return indexList;\r\n    }\r\n\r\n    // 未使用\r\n    getHeadCssText(head){\r\n        if(!head) return '';\r\n        let cssText = '';\r\n        let styles = head.getElementsByTagName(\"style\");\r\n        for(let i=0; i < styles.length; i++){\r\n            cssText = cssText + styles[i].innerText;\r\n        }\r\n        return cssText;\r\n    }\r\n\r\n    hiddenSomeone(name){\r\n        let names = name.split(' ');\r\n        names.map((name)=>{\r\n            switch(name){\r\n                case \"explainPanel\":\r\n                    this.props.setExplShow(false);\r\n                    break;\r\n                case \"linkDialog\":\r\n                    this.props.setAShow(false)\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n    clickLink(link, status){\r\n        console.log(\"click Link\", link)\r\n        if(!link) return;\r\n\r\n        this.link.url = link;\r\n        this.link.hash = false;\r\n\r\n        let url = new URL(link);\r\n        let docUrl = new URL(this.props.url)\r\n        if((url.origin + url.pathname)==(docUrl.origin + docUrl.pathname)){\r\n            if(url.hash != \"\"){\r\n                // # hash 页面内标识符\r\n                this.link.hash = true;\r\n                this.link.url = url.hash;\r\n            }\r\n        }\r\n\r\n        // this.externalLink = link;\r\n\r\n        if(this.state.showLinkDialog == status) return;\r\n        if(typeof(status) != 'boolean') return;\r\n        this.setState({\r\n            showLinkDialog:status\r\n        });\r\n    }\r\n\r\n    readNewPage(){\r\n        // console.log(\"App.js readNewPage()\", this.link.url);\r\n\r\n        // // this.props.history.push(`/r?url=${encodeURIComponent(this.link.url)}`);\r\n        // this.props.setInput(this.link.url, true);\r\n\r\n        // // 关闭对话框\r\n        // if(this.state.showExplainPanel){\r\n        //     this.setState({\r\n        //         showExplainPanel:false\r\n        //     });\r\n        //     console.log('readNewPage')\r\n        //     this.props.setExplShow(false)\r\n        // };\r\n\r\n        // if(this.state.showLinkDialog){\r\n        //     this.setState({\r\n        //         showLinkDialog:false\r\n        //     });\r\n        // };\r\n    }\r\n    \r\n    render() {\r\n        let htmlElements = this.props.app.elements;\r\n        console.log('App.js: render()  status = ', this.props.app.status)\r\n\r\n        console.log(`props.app`, this.props.app)\r\n\r\n        return(\r\n            <>\r\n                <Head></Head>\r\n                <div id=\"wrp-app\" >\r\n                    <ReadPanel\r\n                        padding={!this.props.url}\r\n                        content={htmlElements}\r\n                        hiddenSomeone = {(name)=>this.hiddenSomeone(name)}\r\n                        handleClick={(e)=>{this.handleClickWord(e)}}\r\n                        translate={(e)=>this.translate(e)}\r\n                    />\r\n\r\n                    <ManageExplanation/>\r\n                    <div className=\"wrp-view\">\r\n                        <TranslatePanel \r\n                            // translateTarget={this.state.translateTarget}\r\n                            // translateText = {this.translateText}\r\n                            // translateCount ={this.state.translateCount}\r\n                            // clickWord={(e)=>this.handleClickWord(e)}\r\n                        />\r\n                        <div className={'wrp-link-dialog-box '.concat(this.props.a.show ? 'link-dialog-show' : '')} >\r\n                            <div>\r\n                                {(this.link.hash)?\r\n                                <a href={this.link.url}>\r\n                                    <div className=\"wrp-nav-item wrp-ld-button\">\r\n                                        <svg className=\"wrp-nav-item-icon \" viewBox=\"0 0 1024 1024\" version=\"1.1\" fill=\"var(--c-dark)\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4385\"><defs><style type=\"text/css\"></style></defs><path d=\"M250.016 416.992l319.008 43.008 40 310.016 236-591.008zM120.992 464q-11.008-0.992-18.496-8.512t-8.992-19.008 4-20.512 15.488-12.992l778.016-311.008q8.992-4 18.016-2.016t16 8.992 8.992 16-2.016 18.016l-310.016 776q-4 10.016-13.504 15.488t-20.512 4-18.496-8.992-8.512-18.496l-48.992-384z\" p-id=\"4386\"></path></svg>\r\n                                        <div className=\"wrp-nav-item-title\" >转跳至此处</div>\r\n                                    </div>\r\n                                </a>\r\n                                :\r\n                                <Link \r\n                                    className=\"wrp-nav-item wrp-ld-button\" \r\n                                    to={`/wrp-read?url=${encodeURIComponent(this.props.a.url)}`} \r\n                                    // onClick={()=>this.readNewPage()}\r\n                                >\r\n                                    <svg className=\"wrp-nav-item-icon \" viewBox=\"0 0 1024 1024\" version=\"1.1\"  fill=\"var(--c-dark)\"><path  d=\"M863 942H500.3L309.7 822.6c-33.8-21.2-54.9-60.7-54.9-103V162.5c0-30.4 14.5-57.6 38.7-72.9 24.4-15.4 53.6-15.4 78-0.1L507 174.3h356c52.9 0 96 46.9 96 104.6v558.4c0 57.8-43.1 104.7-96 104.7z m-345.6-69.8H863c17.6 0 32-15.6 32-34.9V278.9c0-19.2-14.4-34.9-32-34.9H489.9l-150.3-94.1c-6.4-4-12-1.3-14.1 0-2.5 1.6-6.7 5.3-6.7 12.6v557.1c0 17.5 8.7 33.8 22.8 42.5l175.8 110.1z\" fill=\"#595959\" p-id=\"4277\"></path><path d=\"M508.8 942H161c-52.9 0-96-46.9-96-104.6V278.9c0-57.7 43.1-104.6 96-104.6h125.8v69.8H161c-17.6 0-32 15.6-32 34.9v558.4c0 19.2 14.4 34.9 32 34.9h347.8V942zM497.5 174.3h1v69.8h-1z\" p-id=\"4278\"></path><path d=\"M480 209.2h64v697.2h-64z\" p-id=\"4279\"></path></svg>\r\n                                    <div className=\"wrp-nav-item-title\">阅读新页面</div>\r\n                                </Link>\r\n                                }\r\n                            </div>\r\n                            <a href={this.externalLink} target=\"_blank\" href={this.props.a.url}>\r\n                                <div className=\"wrp-nav-item wrp-ld-button\">\r\n                                    <svg className=\"wrp-nav-item-icon \" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\" ><path fill=\"var(--c-dark)\" d=\"M168.8,123.3c0-3.2,2.8-5.8,6.3-5.8s6.3,2.6,6.3,5.8V164c0,6.4-5.6,11.6-12.5,11.6H31.2\tc-6.9,0-12.5-5.2-12.5-11.6V36c0-6.4,5.6-11.6,12.5-11.6H75c3.5,0,6.3,2.6,6.3,5.8s-2.8,5.8-6.3,5.8H37.5c-3.4,0-6.2,2.6-6.3,5.8\tc0,0,0,0,0,0.1v116.2c0,3.2,2.8,5.8,6.2,5.8c0,0,0,0,0.1,0h125c3.4,0,6.2-2.6,6.3-5.8c0,0,0,0,0-0.1V123.3z M74,132.8\tc-2.4,2.3-6.4,2.3-8.8,0c0,0,0,0,0,0c-2.4-2.2-2.5-5.9-0.1-8.2c0,0,0,0,0,0l94-87.4l-34.4,0.1c-3.4,0-6.1-2.5-6.2-5.7\tc0,0,0-0.1,0-0.1c0-3.2,2.8-5.8,6.2-5.8l49.8-0.2c3.4,0,6.1,2.5,6.2,5.7c0,0,0,0.1,0,0.1l-0.2,46.4c-0.1,3.2-2.8,5.8-6.3,5.8\tc-3.4,0-6.2-2.5-6.2-5.6c0,0,0-0.1,0-0.1l0.1-32.6L74,132.8z\"/></svg>\r\n                                    <div className=\"wrp-nav-item-title\">新窗口打开</div>\r\n                                </div>\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    checkURI(){\r\n        console.log('webApp.js: checkURI()');\r\n\r\n        let urlParams = (new URL(window.location.href)).searchParams;\r\n        let url = urlParams.get('url');\r\n        let key = urlParams.get('key');\r\n\r\n        if(key){\r\n            let doc = localStorage.getItem(key);\r\n            // this.props.setXmlDoc(doc)\r\n            this.props.docParser(doc, '', key)\r\n        }\r\n\r\n        let elements = this.props.elements || []\r\n\r\n        if (url === this.props.app.url && elements.length !== 0) {\r\n            \r\n        }\r\n\r\n        if (url === this.props.app.url && elements.length === 0) {\r\n            // this.props.setStatus('parsing')\r\n            // this.docParser(this.props.app.xmlDoc)\r\n            console.log('checkURI call docParser')\r\n            this.props.docParser(this.props.app.xmlDoc, this.props.app.url)\r\n            // this.props.setLocation('/wrp-read')\r\n        }\r\n\r\n        if (url !== this.props.app.url) {\r\n            this.inputIsURL = true;\r\n            if(this.input == url) return;\r\n            this.props.setUrl(url)\r\n            this.props.setStatus('loading')\r\n            this.props.loadXmlDoc(url)\r\n        }\r\n        this.props.setAShow(false)\r\n        this.props.setExplShow(false)\r\n\r\n    }\r\n\r\n    // 生命周期函数\r\n    componentDidMount(){\r\n        console.log('componentDidMount')\r\n        let self = this;\r\n        // 窗口滚动事件可以移动至readpenal中\r\n        // 窗口滚动事件\r\n        let windowScroll = function(e){\r\n            if(!self.state.showExplainPanel) return;\r\n\r\n            console.log('window scroll')\r\n            self.props.setExplShow(false)\r\n\r\n            if(!self.state.showLinkDialog) return;\r\n            self.props.setAShow(false)\r\n        }\r\n        // window.addEventListener('scroll', windowScroll);\r\n        // 路由监听\r\n        this.props.history.listen(location => {\r\n            console.log('history.listen',location, window.location)\r\n            let url = new URLSearchParams(window.location.search).get('url')\r\n            if (this.props.app.status !== 'loading') {\r\n                this.checkURI()\r\n            }\r\n        })\r\n    }\r\n\r\n    async componentDidUpdate(){\r\n\r\n        console.log('App.js componentDidUpdate')\r\n        console.log('this.docId', this.docId, \"this.props.docId\",this.props.docId);\r\n\r\n        // TODO\r\n        // 代码优化\r\n        if(this.docId != this.props.docId && this.props.status === \"completed\" && false){\r\n\r\n            this.docId = this.props.docId;\r\n            \r\n            // 加载Script\r\n            if(this.config.runScript){\r\n                let wrpReadPanel = jQuery(\"#wrp-read-panel\")[0];\r\n                let scriptList = wrpReadPanel.getElementsByTagName('script');\r\n\r\n                let fakeHead = jQuery(\"#wrp-head\")[0];\r\n                let headScriptList= fakeHead.getElementsByTagName('script');\r\n                scriptList = [...scriptList, ...headScriptList];\r\n                \r\n                let wrpApp = jQuery(\"#wrp-app\")[0];\r\n                for(let s of scriptList){\r\n                    let script = document.createElement('script');\r\n                    if(s.hasAttribute('type')) script.type = s.type;\r\n                    if(s.hasAttribute('data-href')) script.src = s.getAttribute('data-href');\r\n                    if(s.hasAttribute('async')) script.async = s.async;\r\n                    if(s.hasAttribute(\"data-src\")) script.setAttribute(\"data-src\", s.getAttribute(\"data-src\"));\r\n                    if(s.innerText) script.innerText = s.innerText;\r\n                    // if(s.hasAttribute('integrity')) script.integrity = s.integrity;\r\n                    wrpApp.appendChild(script);\r\n                    // await new Promise((resolve,reject)=>{setTimeout(()=>{resolve()}, 500)});\r\n                }\r\n\r\n                // 手动触发 DOMContentLoaded\r\n                var DOMContentLoaded_event = document.createEvent(\"Event\");\r\n                DOMContentLoaded_event.initEvent(\"DOMContentLoaded\", true, true);\r\n                window.document.dispatchEvent(DOMContentLoaded_event)\r\n\r\n                // 监控DOM更新\r\n\r\n\r\n            }\r\n            \r\n\r\n\r\n\r\n        }\r\n\r\n        console.log(\"PATH\", this.props.input);\r\n\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        console.log(\"App.js() componentWillUnmout() \");\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    app: state.app,\r\n    a: state.a\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    setStatus: (status) => {\r\n        dispatch(actions.setStatus(status))\r\n    },\r\n    setHistory: (item) => {\r\n        dispatch(actions.setHistory(item))\r\n    },\r\n    setXmlDoc: xmlDoc => {\r\n        dispatch(actions.setXmlDoc(xmlDoc))\r\n    },\r\n    docParser: (doc, baseUrl) => {\r\n        console.log('doc Parser----------------- dispatch')\r\n        dispatch(actions.docParser(doc, baseUrl))\r\n    },\r\n\r\n    tapWord: events => {\r\n        dispatch(explActions.tapWord(events))\r\n    },\r\n    loadWordData: word => {\r\n        dispatch(explActions.loadWordData(word))\r\n    },\r\n    setExplShow: show => {\r\n        dispatch(explActions.setShow(show))\r\n        dispatch(explActions.setSetting({show:false}))\r\n        dispatch(explActions.setMore([]))\r\n        dispatch(explActions.setMoreFold(false))\r\n    },\r\n    setAShow: isShow => {\r\n        dispatch(aActions.setShow(isShow))\r\n    },\r\n    setASrc: src => {\r\n        dispatch(aActions.setSrc(src))\r\n    },\r\n    loadXmlDoc: url => {\r\n        console.log(`mapDispatchToProps: input: ${url}`)\r\n        dispatch(actions.loadXmlDoc(url))\r\n    },\r\n    setUrl: url => {\r\n        dispatch(actions.setUrl(url))\r\n    },\r\n    \r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App));\r\n\r\n// let AppWithRouter = withRouter(WrpApp);\r\n// export { AppWithRouter }; ","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useLocation,\r\n    useRouteMatch,\r\n    useParams,\r\n    useHistory,\r\n    withRouter,\r\n} from 'react-router-dom';\r\n\r\nimport * as actions from './actions/app'\r\n\r\nimport './home.css';\r\n\r\nimport logo from './components/res/logo.png';\r\n\r\n// 未使用\r\nfunction itemCard(data){\r\n    if(!data) return '';\r\n    return (\r\n        <div className=\"wrp-card-wrapper wrp-cp\" onClick={()=>{}}>\r\n            <div className=\"wrp-image-wrapper wrp-card-image\">\r\n                <img className=\"wrp-image\" src={data.icon}></img>\r\n            </div>\r\n            <div className=\"wrp-card-text-wrapper\">\r\n                <div className=\"wrp-ellipsis wrp-ct\">{data.title}</div>\r\n                <div className=\"wrp-cs\">{data.des}</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction ItemCard(props){\r\n    /**props.data = {icon:'src',title:'title',des:'description'} */\r\n    let data = props.data;\r\n    if(!data) data = {};\r\n    return (\r\n        <Link\r\n            to={`/wrp-read`}\r\n            className=\"wrp-card-wrapper wrp-cp\"\r\n            onClick={props.onClick}\r\n            data-url={data.url}\r\n            data-key={data.key}\r\n        >\r\n            <div className=\"wrp-image-wrapper wrp-card-image\">\r\n                <img className=\"wrp-image\" src={data.icon}></img>\r\n            </div>\r\n            <div className=\"wrp-card-text-wrapper\">\r\n                <div className=\"wrp-ellipsis wrp-ct\">{data.title}</div>\r\n                <div className=\"wrp-cs\">{data.des}</div>\r\n            </div>\r\n        </Link>\r\n    )\r\n}\r\n\r\n\r\nclass Home extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            // ReactRouter_DeclarativeRoutingForReact.js.html\r\n            // https://github.com/reactjs/react-router-tutorial/tree/master/lessons/08-index-routes \r\n            // 点击Next: Index Links 中的非文字部分，不弹出转跳框\r\n            input: 'https://',  //  paste.html   Golden_swallow-Wiki.html   wikipedia-1.html\r\n            typing: false,\r\n\r\n        };\r\n        this.urlPattern = /^https?:\\/\\/(.+\\.\\w+.*)|(localhost.*)/;\r\n        this.jumpChange = 0;\r\n    }\r\n\r\n    handleChange(e){\r\n        if(this.jumpChange >= 1){\r\n            // console.log('change jump', e, e.currentTarget.value);\r\n            this.jumpChange -= 1;\r\n            return '';\r\n        };\r\n        // console.log('change', e, e.currentTarget.value);\r\n        let input = e.currentTarget.value;\r\n        if(this.state.input != input){\r\n            // console.log('setState')\r\n            this.setState({\r\n                input:input\r\n            })\r\n        }\r\n    }\r\n\r\n    handlePaste(e){\r\n        console.log('paste', e.clipboardData.getData('text/plain'),e.clipboardData.getData('text/html'));\r\n        let pasteText = e.clipboardData.getData('text/plain');\r\n        if(this.urlPattern.test(pasteText)){\r\n            // 粘贴的为url, 不进行操作\r\n        }else{\r\n            // 如果粘贴的不是url, 则尝试获取富文本\r\n            let pasteHtml = e.clipboardData.getData('text/html');\r\n            let input = this.state.input;\r\n            if(pasteHtml != '' && input == ''){\r\n                console.log('获取html', input + pasteHtml);\r\n                if(this.state.input != pasteHtml){\r\n                    this.jumpChange += 1;\r\n                    this.setState({\r\n                        input:input + pasteHtml\r\n                    })\r\n                }\r\n                // e.currentTarget.value = pasteHtml;\r\n                // this.input = pasteHtml;\r\n            }\r\n        }\r\n    }\r\n\r\n    goRead() {\r\n        console.log(`home.js goRead: ${this.state.input} url: ${this.props.app.url}`)\r\n\r\n        let input = this.state.input\r\n\r\n        let a = /^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/\r\n\r\n        let urlPattern = /^http(s)?:\\/\\/\\w{0,62}(\\.?\\w{0,62})+\\.\\w{1,62}([:\\/].*)*$/\r\n        let isUrl = input.length < 10000 ? urlPattern.test(input) : false\r\n\r\n        if(isUrl){\r\n            this.readFromUrl(input)\r\n        }else{\r\n            const getHash = (s) => {\r\n                return s.split(\"\").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);              \r\n            }\r\n            const t1 = new Date()\r\n            let key = String(getHash(input))\r\n            const t2 = new Date()\r\n            console.log('getHash: time', t2-t1, key)\r\n            localStorage.setItem(key, input)\r\n            this.readFromText(key, input)\r\n        }\r\n\r\n    }\r\n\r\n    readFromUrl(url) {\r\n        if(url === this.props.app.url){\r\n            this.props.setStatus('parsing')\r\n            this.props.setLocation('/wrp-read')\r\n        }else{\r\n            this.props.setUrl(url)\r\n            this.props.setKey('')\r\n            this.props.setStatus('loading')\r\n            this.props.loadXmlDoc(url)\r\n            this.props.setLocation('/wrp-read')\r\n        }\r\n        // 转跳至 /wrp-read\r\n        this.props.history.push({\r\n            pathname: '/wrp-read',\r\n            search: `?url=${url}`\r\n        })\r\n    }\r\n\r\n    readFromText(key, value = '') {\r\n        if( !value) value = localStorage.getItem(key)\r\n        this.props.setKey(key)\r\n        this.props.setXmlDoc( value )\r\n        this.props.setUrl('')\r\n        this.props.setStatus('parsing')\r\n        this.props.setLocation('/wrp-read')\r\n\r\n        // 转跳至 /wrp-read\r\n        this.props.history.push({\r\n            pathname: '/wrp-read',\r\n            search: `?key=${key}`\r\n        })\r\n    }\r\n\r\n    onClickCard (e) {\r\n        e.preventDefault()\r\n        console.log(`e : ${e}`, e,e.currentTarget.dataset.input)\r\n        let url = e.currentTarget.dataset.url\r\n        let key = e.currentTarget.dataset.key\r\n        if( key ) this.readFromText(key)\r\n        if( url ) this.readFromUrl(url)\r\n\r\n    }\r\n\r\n    handleKeyUp(e){\r\n        console.log('handleKeyUp',e)\r\n        if(e.key == \"Enter\"){\r\n            this.goRead();\r\n        }\r\n    }\r\n\r\n    setTyping(value){\r\n        if(this.state.typing == value) return;\r\n        this.setState({\r\n            typing:value\r\n        })\r\n    }\r\n\r\n    setInput(value,focus){\r\n        console.log('setInput', value,focus)\r\n        if(focus){\r\n            document.getElementById('whinput').focus();\r\n        }\r\n        if(typeof(value) !== 'string') return;\r\n        if(this.state.input == value) return;\r\n        this.setState({\r\n            input:value,\r\n        })\r\n    }\r\n\r\n    createHistory(){\r\n        let readHistory = this.props.readHistory;\r\n        // console.log('createHistory', readHistory);\r\n        if(!readHistory) return [];\r\n        let history = [];\r\n        for(let i in readHistory){\r\n            // console.log('i loog',i);\r\n            history.unshift(<ItemCard\r\n                data={readHistory[i]} \r\n                onClick={(e) => this.onClickCard(e)}\r\n            ></ItemCard>)\r\n        }\r\n        // console.log('createHistory - a', history);\r\n        this.history = this.props.readHistory;\r\n        return history;\r\n    }\r\n\r\n    render(){\r\n        let typing = this.state.typing;\r\n        let history = this.createHistory();\r\n\r\n        return(<div className=\"wrp-page\">\r\n                    <div className=\"wrp-app-logo-container\">\r\n                        <img className=\"wrp-app-logo\" src={logo} />\r\n                        {/*<h1 class=\"wrp-app-logo-title\">Word Reading Pro</h1>*/}\r\n                    </div>\r\n                    <div className={\"wrp-input-container \".concat(typing ? \"typing\":\"\")}>\r\n                        <div className=\"wrp-input-bar\">\r\n                            {typing ? (<div className=\"wrp-input-bar-button\" onClick={()=>this.setTyping(false)}>\r\n                                <svg viewBox=\"0 0 1118 1024\" version=\"1.1\" width=\"218.359375\" height=\"200\" fill=\"var(--c-dark)\"><defs><style type=\"text/css\"></style></defs><path d=\"M229.42 558.545h841.125c25.707 0 46.546-20.839 46.546-46.545 0-25.706-20.84-46.545-46.546-46.545H229.42L544.913 149.96c18.177-18.177 18.177-47.648 0-65.825-18.178-18.177-47.648-18.177-65.826 0L84.137 479.087c-9.09 9.089-13.634 21.001-13.634 32.913 0 11.912 4.545 23.824 13.633 32.913l394.951 394.95c18.178 18.178 47.648 18.178 65.826 0 18.177-18.176 18.177-47.647 0-65.824L229.419 558.545z\" p-id=\"5564\"></path></svg>\r\n                            </div>):''}\r\n                            <input\r\n                                className={\"wrp-input \".concat(typing ? \"wrp-input-typing\":\"\")}\r\n                                id=\"whinput\"\r\n                                autoComplete=\"on\"\r\n                                contentEditable=\"true\" \r\n                                onChange={(e)=>this.handleChange(e)}\r\n                                onKeyUp={(e)=>this.handleKeyUp(e)}\r\n                                onPaste={(e)=>{this.handlePaste(e);}}\r\n                                onFocus={()=>this.setTyping(true)}\r\n                                type=\"text\"\r\n                                placeholder=\"输入文章或链接\"\r\n                                value={this.state.input}\r\n                            ></input>\r\n                            {typing ? (<div className=\"wrp-input-bar-button wb-clearinput\" onClick={()=>{this.setInput('', true)}}> \r\n                                <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\" fill=\"var(--c-dark)\"><defs><style type=\"text/css\"></style></defs><path d=\"M512 0a512 512 0 0 0-512 512 512 512 0 0 0 512 512 512 512 0 0 0 512-512 512 512 0 0 0-512-512z m241.005714 703.268571a32.182857 32.182857 0 0 1 0.512 45.348572 32.182857 32.182857 0 0 1-45.348571 0.512L512 556.763429 315.830857 748.982857a31.963429 31.963429 0 1 1-44.836571-45.787428L466.285714 512l-195.291428-191.268571a32.182857 32.182857 0 0 1-0.512-45.348572 32.182857 32.182857 0 0 1 45.348571-0.512L512 467.236571 708.169143 275.017143a31.963429 31.963429 0 1 1 44.836571 45.787428L557.714286 512l195.291428 191.268571z\" p-id=\"10064\"></path></svg>\r\n                            </div>):''}\r\n                            <div className=\"wrp-input-bar-go\" onClick={()=>{this.goRead()}}> \r\n                                <svg viewBox=\"0 0 218.36 200\"><path fill=\"var(--c-light)\" d=\"M187.14,109.09l-61.62,61.62a9.09,9.09,0,0,0,12.86,12.86l77.14-77.14a9.1,9.1,0,0,0,0-12.86L138.38,16.43a9.09,9.09,0,1,0-12.86,12.86l61.62,61.62H22.86a9.09,9.09,0,1,0,0,18.18Z\"/></svg>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                    <div>\r\n                        {history}\r\n                    </div>\r\n                    <div>\r\n                        {/**推荐文章 */}\r\n                    </div>\r\n                </div>\r\n            );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    readHistory: state.app.history,\r\n    app: state.app\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    goRead: (input, currentUrl) => {\r\n        dispatch(actions.goRead(input, currentUrl))\r\n    },\r\n    setUrl: url => {\r\n        dispatch(actions.setUrl(url))\r\n    },\r\n    setKey: key => {\r\n        dispatch(actions.setKey(key))\r\n    },\r\n    loadXmlDoc: (url) => {\r\n        dispatch(actions.loadXmlDoc(url))\r\n    },\r\n    setStatus: status => {\r\n        dispatch(actions.setStatus(status))\r\n    },\r\n    setLocation: location => {\r\n        dispatch(actions.setLocation(location))\r\n    },\r\n    setXmlDoc: xmlDoc => {\r\n        dispatch(actions.setXmlDoc(xmlDoc))\r\n    }\r\n})\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Home));\r\nexport {ItemCard}","import React from \"react\";\r\nimport { connect } from 'react-redux'\r\nimport * as actions from './actions/app'\r\n\r\n\r\nfunction Status(props){\r\n    // props.status,\r\n    console.log('Status', props.status)\r\n\r\n    const handleClick = ()=>{\r\n        // 回退，将状态重置为completed\r\n        if(props.status == 'completed') return;\r\n        if(props.status == 'loading') return;\r\n        if(props.status == 'parsing') return;\r\n\r\n        try{\r\n            props.setStatus('completed')\r\n        }catch(e){\r\n            console.error('status.js: need props.setStatus() ', e);\r\n        }\r\n\r\n    }\r\n\r\n    const wrapper = (content)=>{\r\n        return (\r\n            <div \r\n                className=\"wrp-show-status\"\r\n                onClick = {handleClick}\r\n            >\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const errorIcon = (\r\n        <div className=\"wrp-icon\">\r\n            <svg className=\"wrp-icon-svg\" viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\" fill=\"rgb(var(--t-c-e))\"><defs><style type=\"text/css\"></style></defs><path d=\"M512 0a512 512 0 0 0-512 512 512 512 0 0 0 512 512 512 512 0 0 0 512-512 512 512 0 0 0-512-512z m241.005714 703.268571a32.182857 32.182857 0 0 1 0.512 45.348572 32.182857 32.182857 0 0 1-45.348571 0.512L512 556.763429 315.830857 748.982857a31.963429 31.963429 0 1 1-44.836571-45.787428L466.285714 512l-195.291428-191.268571a32.182857 32.182857 0 0 1-0.512-45.348572 32.182857 32.182857 0 0 1 45.348571-0.512L512 467.236571 708.169143 275.017143a31.963429 31.963429 0 1 1 44.836571 45.787428L557.714286 512l195.291428 191.268571z\" p-id=\"10064\"></path></svg>\r\n        </div>\r\n    );\r\n\r\n    const button = (\r\n        <div>\r\n            <button>重试</button>\r\n            <button>返回</button>\r\n        </div>\r\n    );\r\n\r\n    var statusContent = '';\r\n    switch(props.status){\r\n        case \"loading\":\r\n        case \"parsing\":\r\n        default:\r\n            if(props.status == \"loading\" || props.status == \"parsing\"){\r\n                statusContent = wrapper(\r\n                    <>\r\n                        <div className=\"wrp-icon\">\r\n                            <div className=\"wrp-loading-icon\">\r\n                                <div/> <div/>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"wrp-status-tip\">{props.status==\"loading\"?\"加载中...\":\"解析中...\"}</div>\r\n                    </>\r\n                )\r\n            }\r\n            break;\r\n        case \"failed\":\r\n        case \"timeout\":\r\n            statusContent = wrapper(\r\n                <>\r\n                    {errorIcon}\r\n                    <div className=\"wrp-text\">{props.status==\"failed\"?\"加载失败\":\"加载超时\"}</div>\r\n                    <div className=\"wrp-text wrp-status-des\">\r\n                        加载此网址：\r\n                        <span className=\"wrp-warning\">{props.url}</span>\r\n                        <br/>发生问题，请检查网址!\r\n                    </div>\r\n                </>\r\n            )\r\n            break;\r\n        case \"typeError\":\r\n            statusContent = wrapper(\r\n                <>\r\n                    {errorIcon}\r\n                    <div className=\"wrp-text\">返回类型错误</div>\r\n                    <div className=\"wrp-text wrp-status-des\">\r\n                        此网址：\r\n                        <span className=\"wrp-warning\">{props.url}</span>\r\n                        <br/>返回不受支持的内容，请检查网址!\r\n                    </div>\r\n                </>\r\n            )\r\n            break;\r\n        case \"completed\":\r\n            statusContent = ''\r\n            break;\r\n    }\r\n\r\n    return statusContent\r\n            \r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    status: state.app.status\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    setStatus: status => {\r\n        dispatch(actions.setStatus(status))\r\n    }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Status);","import React, { useState } from 'react';\r\n\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useLocation,\r\n    useRouteMatch,\r\n    useParams,\r\n    useHistory,\r\n    withRouter,\r\n} from 'react-router-dom';\r\n\r\nimport './navBar.css';\r\n\r\nfunction fixCurrentIndex(currentIndex, setCurrentIndex){\r\n    let navList = [/\\/home(\\/.*)?$/, /\\/find(\\/.*)?$/, /\\/word(\\/.*)?$/, /\\/about(\\/.*)?$/];\r\n    let pathName =  (new URL(window.location.href)).pathname;\r\n    let current = navList.findIndex((re)=>re.test(pathName));\r\n    if(setCurrentIndex && currentIndex == current) return current;\r\n    setCurrentIndex(current);\r\n    return current;\r\n}\r\n\r\nfunction NavBar(){\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n    fixCurrentIndex(currentIndex, setCurrentIndex);\r\n    var c = \"var(--t-fore-c)\";\r\n    var c2 = \"var(--sc)\";\r\n\r\n    var colors = [c,c,c,c];\r\n    colors = colors.map((v,i)=>{return i==currentIndex?c2:c}); \r\n    \r\n    return(\r\n        <div className=\"wrp-nav\">\r\n            <div className=\"wrp-nav-item-container\">\r\n                <Link to=\"/wrp-home\" onClick={()=>setCurrentIndex(0)}>\r\n                    <div className=\"wrp-nav-item\" style={{color:colors[0]}}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill={colors[0]} viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\"><path d=\"M854.08768 503.1168l0 342.08768c0 44.450816-36.040704 80.490496-80.49152 80.490496L612.614144 925.694976 612.614144 664.09984c0-44.450816-36.03968-80.490496-80.490496-80.490496l-40.245248 0c-44.450816 0-80.49152 36.03968-80.49152 80.490496L411.38688 925.696 250.40384 925.696c-44.450816 0-80.490496-36.03968-80.490496-80.490496l0-342.08768L49.175552 503.117824 512 60.416l462.824448 442.701824L854.08768 503.117824z\" p-id=\"13773\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\">首页</div>\r\n                    </div>\r\n                </Link>\r\n                <Link to=\"/wrp-find\" onClick={()=>setCurrentIndex(1)}>\r\n                    <div className=\"wrp-nav-item\" style={{color:colors[1]}}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill={colors[1]} viewBox=\"0 0 1024 1024\" version=\"1.1\" width=\"200\" height=\"200\"><path d=\"M534.378667 574.549333c31.338667 0 58.410667-17.130667 73.152-42.346667 0.149333 0.149333 0.256 0.256 0.405333 0.405333 32.341333-55.658667 57.045333-127.168 74.176-190.869333-57.472 15.466667-121.024 36.949333-173.717333 64.725333-1.365333 0.725333-2.730667 1.450667-4.096 2.176-9.557333 5.141333-12.8 7.445333-13.952 8.405333-24.490667 14.933333-41.024 41.642667-41.024 72.448C449.322667 536.469333 487.402667 574.549333 534.378667 574.549333z\" p-id=\"14571\"></path><path d=\"M512.021333 64C264.554667 64 64 264.554667 64 511.978667 64 759.445333 264.554667 960 512.021333 960 759.381333 960 960 759.445333 960 511.978667 960 264.512 759.381333 64 512.021333 64zM603.989333 603.989333c-90.986667 90.944-304.149333 120.213333-304.149333 120.213333s29.269333-213.205333 120.213333-304.149333 304.149333-120.213333 304.149333-120.213333S694.976 513.045333 603.989333 603.989333z\" p-id=\"14572\"></path></svg>\r\n                        <div className=\"wrp-nav-item-title\">发现</div>\r\n                    </div>\r\n                </Link>\r\n                <Link to=\"/wrp-word\" onClick={()=>setCurrentIndex(2)}>\r\n                    <div className=\"wrp-nav-item\" style={{color:colors[2]}}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill={colors[2]} version=\"1.1\" viewBox=\"0 0 200 200\"><path  d=\"M78.6,96.4h42.8c10.8,0,19.6-8.8,19.6-19.6V34.1c0-10.8-8.8-19.6-19.6-19.6H78.6C67.8,14.5,59,23.3,59,34.1v42.8\tC59,87.7,67.8,96.4,78.6,96.4z M84,44.8c0-8.9,7.2-16,16-16s16,7.2,16,16v32.1c0,3-2.4,5.3-5.3,5.3s-5.3-2.4-5.3-5.3V64.4\tc0-2-1.6-3.6-3.6-3.6h-3.6c-2,0-3.6,1.6-3.6,3.6v0v12.5c0,3-2.4,5.3-5.3,5.3S84,79.8,84,76.8V44.8z M98.2,50.1h3.6\tc2,0,3.6-1.6,3.6-3.6v-1.8c0-3-2.4-5.3-5.3-5.3s-5.3,2.4-5.3,5.3v1.8C94.7,48.5,96.3,50.1,98.2,50.1L98.2,50.1z M76.8,103.6H34.1\tc-10.8,0-19.6,8.8-19.6,19.6v42.8c0,10.8,8.8,19.6,19.6,19.6h42.8c10.8,0,19.6-8.8,19.6-19.6v-42.8\tC96.4,112.3,87.7,103.6,76.8,103.6L76.8,103.6z M68.9,146.5c4.8,7.4,2.7,17.3-4.7,22.2c-2.6,1.7-5.7,2.6-8.8,2.6H44.8\tc-3,0-5.3-2.4-5.3-5.3v-42.8c0-3,2.4-5.3,5.3-5.3h10.7c8.8,0,16,7.1,16,16c0,3.1-0.9,6.2-2.6,8.8C68.1,143.8,68.1,145.3,68.9,146.5\tL68.9,146.5z M55.5,149.9h-1.8c-2,0-3.6,1.6-3.6,3.6v3.6c0,2,1.6,3.6,3.6,3.6h1.8c3,0,5.3-2.4,5.3-5.3\tC60.8,152.3,58.4,149.9,55.5,149.9L55.5,149.9z M55.5,128.5h-1.8c-2,0-3.6,1.6-3.6,3.6v3.6c0,2,1.6,3.6,3.6,3.6h1.8\tc3,0,5.3-2.4,5.3-5.3C60.8,130.9,58.4,128.5,55.5,128.5L55.5,128.5z M165.9,103.6h-42.8c-10.8,0-19.6,8.8-19.6,19.6v42.8\tc0,10.8,8.8,19.6,19.6,19.6h42.8c10.8,0,19.6-8.8,19.6-19.6v-42.8C185.5,112.3,176.7,103.6,165.9,103.6L165.9,103.6z M151.7,160.6\tc3,0,5.3,2.4,5.3,5.3s-2.4,5.3-5.3,5.3c-14.8,0-26.7-12-26.7-26.7c0-14.8,12-26.7,26.7-26.7c3,0,5.3,2.4,5.3,5.3\tc0,3-2.4,5.3-5.3,5.3c-8.9,0-16,7.2-16,16S142.8,160.6,151.7,160.6z\"/></svg>\r\n                        <div className=\"wrp-nav-item-title\">单词</div>\r\n                    </div>\r\n                </Link>\r\n                <Link to=\"/about\" onClick={()=>setCurrentIndex(3)}>\r\n                    <div className=\"wrp-nav-item\" style={{color:colors[3]}}>\r\n                        <svg className=\"wrp-nav-item-icon\" fill={colors[3]} version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 200 200\"><path  d=\"M100,10c-49.7,0-90,40.3-90,90c0,49.7,40.3,90,90,90c49.7,0,90-40.3,90-90C190,50.3,149.7,10,100,10z M97.2,156.3\tc-4.3,0-7.8-4.2-7.8-9.3l0-56.7c0-5.1,3.5-9.3,7.8-9.3c4.3,0,7.8,4.2,7.8,9.3l0,56.7C105,152.1,101.5,156.3,97.2,156.3z M97.2,64\tc-4.6,0-8.4-4.5-8.4-10l0-0.3c0-5.5,3.8-10,8.4-10c4.6,0,8.4,4.5,8.4,10l0,0.3C105.6,59.6,101.9,64,97.2,64z\"/></svg>\r\n                        <div className=\"wrp-nav-item-title\">关于</div>\r\n                    </div>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport {NavBar};","import React from 'react';\r\n\r\nimport './findPage.css';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport {ItemCard} from '../Home.js';\r\n\r\n\r\nfunction itemCard(){\r\n\r\n    return (\r\n        <div className=\"wrp-card-wrapper wrp-cp\" onClick={()=>{}}>\r\n            <div className=\"wrp-image-wrapper wrp-card-image\">\r\n                {/*<img className=\"wrp-image\" src=\"https://lh6.googleusercontent.com/proxy/GICqS-kiP8lyGI9A7Qq-JJvzZl5HTfMjebIFUmD3k8rE4hMW2f7fBPpusTyl2KYNEF47lNVtuF5YFvfiXWTHqRghBA\"></img>*/}\r\n                <svg className=\"wrp-image \" height=\"32\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"32\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path></svg>\r\n            </div>\r\n            <div className=\"wrp-card-text-wrapper\">\r\n                <div className=\"wrp-ellipsis wrp-ct\">GitHub-Built for developers</div>\r\n                <div className=\"wrp-cs\">GitHub is a development platform inspired by the way you work. From open source to business, you can host and review code, manage projects, and build software alongside 40 million developers.</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction itemIcon(){\r\n\r\n    return (\r\n        <div className=\"wrp-nav-item wrp-item-icon\" onClick={()=>{}}>\r\n            <svg className=\"wrp-nav-item-icon \" height=\"32\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"32\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"></path></svg>\r\n            <div className=\"wrp-nav-item-title wrp-ellipsis\" >GitHub-Built for developers</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction FindPage(){\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className=\"wrp-card-container\">\r\n                <ItemCard data={{src:'',title:'a',des:'b'}} ></ItemCard>\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n                {itemCard()}\r\n            </div>\r\n            <div className=\"wrp-card-container\">\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n                {itemIcon()}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\n// export {FindPage};\r\n// let withRouterFindPage = withRouter(FindPage);\r\n// export {FindPage};\r\nexport default withRouter(FindPage);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useLocation,\r\n    useRouteMatch,\r\n    useParams,\r\n    useHistory,\r\n    withRouter,\r\n\r\n} from 'react-router-dom';\r\nimport './webApp.css';\r\n\r\nimport App from './App';\r\n// import {AppWithRouter as App} from './App';\r\nimport Home from './Home';\r\nimport Status from './Status';\r\nimport './common.css';\r\n\r\nimport {NavBar} from './components/navBar';\r\nimport FindPage from './components/findPage';\r\n\r\nimport { store } from './index'\r\nimport * as actions from './actions/app'\r\nimport { connect } from 'react-redux'\r\n\r\nclass WebApp extends React.Component{\r\n    constructor(props){\r\n        console.log(`store: ${JSON.stringify(store)}`)\r\n        super(props);\r\n        this.input = \"\";\r\n        this.urlPattern = /^https?:\\/\\/(.+\\.\\w+.*)|(localhost.*)/;\r\n        this.docId = 0;\r\n        /** history = {icon,title,des,input,isURL} */\r\n\r\n        let historyStr = localStorage.getItem('read_history');\r\n        let history = JSON.parse(historyStr);\r\n        console.log(`通过localStorage获取的 history: ${historyStr}`)\r\n        if(Array.isArray(history)){\r\n            console.log(`初始化 history : ${JSON.stringify(history)}`)\r\n            this.props.setHistory(history, null)\r\n        }\r\n\r\n        // this.checkURI()\r\n    }\r\n\r\n    go(input, isUri){\r\n        console.log(\"webApp.js: go() \", input, isUri);\r\n\r\n        // 当前网页\r\n        if(input == this.input){\r\n            console.log('input = this.input 跳过加载')\r\n            this.props.setStatus('parsing')\r\n            //当前阅读的页面，跳过加载，直接渲染\r\n            return ;\r\n        }\r\n\r\n        // 复制粘贴富文本\r\n        if(! isUri) {\r\n            this.props.setXmlDoc( input );\r\n            this.props.setStatus('parsing')\r\n            return ;\r\n        }\r\n\r\n        // 新网页，加载\r\n        this.input = input;\r\n        this.inputIsURL = isUri;\r\n\r\n        this.props.setStatus('loading')\r\n        this.props.loadXmlDoc(input)\r\n    }\r\n\r\n    checkURI(){\r\n        console.log('webApp.js: checkURI()');\r\n\r\n        let urlParams = (new URL(window.location.href)).searchParams;\r\n        let url = urlParams.get('url');\r\n        let key = urlParams.get('key');\r\n\r\n        if(key){\r\n            let doc = localStorage.getItem(key);\r\n            this.props.setXmlDoc(doc)\r\n            this.props.setStatus('parsing')\r\n        }\r\n\r\n        if(url){\r\n            this.inputIsURL = true;\r\n            if(this.input == url) return;\r\n            this.input = url;\r\n            this.props.setStatus('loading')\r\n            this.props.loadXmlDoc(url)\r\n        }\r\n    }\r\n\r\n    componentWillUnmount(){\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        console.log('webApp.js: componentWillMount');\r\n        console.log(`store: ${JSON.stringify(store)}`)\r\n        this.componentDidUpdate();\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        console.log('webApp.js: componentDidUpdate', window.location);\r\n        \r\n        // 对页面内js控制的转跳进行重定向\r\n        let location = window.location;\r\n        let dir = location.pathname.split(\"/\")[1]; // 没有的话返回\"\"\r\n        switch(dir){\r\n            case \"\":\r\n                this.props.history.push('/wrp-home');\r\n                break\r\n            case \"wrp-read\":\r\n            case \"wrp-home\":\r\n            case \"wrp-find\":\r\n            case \"wrp-word\":\r\n            case \"wrp-about\":\r\n            case \"wrp-test\":\r\n                break;\r\n            default:\r\n                console.log(\"pathname 为 其他路径\", dir);\r\n                // js转跳 或是 用户输入的路径\r\n                let newSearch = `?url=${encodeURIComponent(this.input + location.pathname + location.search)}`;\r\n                let origin;\r\n                let history = this.props.app.history\r\n                if(! history ) break\r\n                if(history[history.length - 1]){\r\n                    origin = new URL(history[history.length - 1].input).origin;\r\n                    let href = `${location.origin}/wrp-read?url=${encodeURIComponent(origin + location.pathname + location.search)}`;\r\n                    console.log('转跳目标 ->', origin + location.pathname + location.search)\r\n                    window.location.href = href;\r\n\r\n                }else{\r\n                    origin = window.location.origin + \"/wrp-home\";\r\n                    console.log('转跳目标', origin);\r\n                    window.location.href = origin;\r\n                }\r\n                \r\n                // alert('转跳！');\r\n                // window.location.pathname = '/wrp-read';\r\n                // window.location.search = `?url=${encodeURIComponent(\"https://qq.com\")}`\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    render(){\r\n        console.log('webApp.js: render()');\r\n        console.log(`store: ${JSON.stringify(store)}`)\r\n\r\n        if (this.props.app.location ) {\r\n            // this.props.history.push({\r\n            //     path: this.props.app.location.path,\r\n            //     search: this.props.app.location.search\r\n            // })\r\n        }\r\n\r\n        let Page = (\r\n                    <>\r\n                        <Switch>\r\n                            <Route path=\"/\" >\r\n                                <Switch>\r\n                                    <Route exact path=\"/wrp-home\">\r\n                                        <Home\r\n                                            setInput={(input, type)=>this.go(input, type)}\r\n                                        ></Home>\r\n                                    </Route>\r\n                                    <Route path=\"/wrp-find\" >\r\n                                        <FindPage></FindPage>\r\n                                    </Route>\r\n                                    <Route path=\"/wrp-word\" >\r\n                                        <div>\r\n                                            <h1>a {JSON.stringify({...this.props.a})}</h1>\r\n                                            <h2>APP: {JSON.stringify({})}</h2>\r\n                                            <button \r\n                                                onClick={ this.props.testAction }>action</button>\r\n                                        </div>\r\n                                    </Route>\r\n                                    <Route\r\n                                        path=\"/wrp-word/:id\"\r\n                                    >\r\n                                        <div>\r\n                                            <input type=\"text\" className=\"form-control input-sm header-search-input  js-site-search-focus \" data-hotkey=\"s,/\" name=\"q\" placeholder=\"Search GitHub\" data-unscoped-placeholder=\"Search GitHub\" data-scoped-placeholder=\"Search\" autocapitalize=\"off\" aria-label=\"Search GitHub\"></input>\r\n\r\n                                            <input style={{\"border\":\"1px solid #000\"}} onInput={()=>{console.log('test entering')}}></input>\r\n\r\n                                            <input style={{\"border\":\"1px solid #000\"}} ></input>\r\n                                        </div>\r\n                                    </Route>\r\n                                    <Route path=\"/:name\">\r\n                                        <App\r\n                                            docId={this.docId}\r\n                                            setInput={(input, type)=>this.go(input, type)}\r\n                                        ></App>\r\n                                        {\r\n                                            // this.showStatus()\r\n                                        }\r\n                                        <Status\r\n                                            url={this.input}\r\n                                        />\r\n                                    </Route>\r\n                                </Switch>\r\n                                <NavBar path={this.props.path}/>\r\n                            </Route>\r\n                        </Switch>                      \r\n                    </>\r\n                );\r\n\r\n        return Page;\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    \"app\": state.app,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    setStatus: (status) => {\r\n        dispatch(actions.setStatus(status))\r\n    },\r\n\r\n    loadXmlDoc: url => {\r\n        console.log(`mapDispatchToProps: input: ${url}`)\r\n        dispatch(actions.loadXmlDoc(url))\r\n    },\r\n\r\n    setXmlDoc: doc => {\r\n        dispatch(actions.setXmlDoc(doc))\r\n    },\r\n\r\n    setHistory: (historyList, item) => {\r\n        dispatch(actions.setHistory(historyList, item))\r\n    }\r\n})\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(WebApp));\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport rootReducer from './reducers'; \r\nimport thunk from 'redux-thunk';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useLocation,\r\n    useRouteMatch,\r\n    useParams,\r\n    useHistory,\r\n    withRouter,\r\n\r\n} from 'react-router-dom';\r\n\r\n\r\n// import ReactDOMServer from 'react-dom/server';\r\n// import ReactHtmlParser from 'react-html-parser';\r\n\r\nimport './index.css';\r\nimport WebApp from './webApp';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nconst traget = document.getElementById('wrp-root')\r\nconst store = createStore( rootReducer, applyMiddleware(thunk))\r\n\r\nrender(\r\n    <Provider store={store}>\r\n        <Router>\r\n            <WebApp/>\r\n        </Router>\r\n    </Provider>\r\n    , traget);\r\n\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\nexport { store }","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/explainBoxArrow.cd1bf698.svg\";","module.exports = __webpack_public_path__ + \"static/media/audio.4030fa08.svg\";","module.exports = __webpack_public_path__ + \"static/media/star.e07fbbc9.svg\";","module.exports = __webpack_public_path__ + \"static/media/more.26f6d80d.svg\";","module.exports = __webpack_public_path__ + \"static/media/open.4645967c.svg\";","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}